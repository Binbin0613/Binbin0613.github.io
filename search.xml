<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ç›®æ ‡æ£€æµ‹--åˆ©ç”¨labelimgåˆ¶ä½œæ·±åº¦å­¦ä¹ æ•°æ®é›†</title>
      <link href="/2022/111116121.html"/>
      <url>/2022/111116121.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h3 id="ä¸€ã€é¡¹ç›®çš„å…‹éš†ä»¥åŠå¿…è¦çš„ç¯å¢ƒä¾èµ–"><a class="header-anchor" href="#ä¸€ã€é¡¹ç›®çš„å…‹éš†ä»¥åŠå¿…è¦çš„ç¯å¢ƒä¾èµ–">Â¶</a>ä¸€ã€é¡¹ç›®çš„å…‹éš†ä»¥åŠå¿…è¦çš„ç¯å¢ƒä¾èµ–</h3><p>YOLOv5çš„ä»£ç æ˜¯å¼€æºçš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä»githubä¸Šå…‹éš†å…¶æºç ã€‚ä¸å¾—ä¸è¯´GitHubçš„ç¡®æ˜¯å…¨çƒæœ€å¤§çš„ç”·æ€§äº¤å‹ç½‘ç«™ï¼Œé‡Œé¢çš„äººä¸ªä¸ªéƒ½æ˜¯äººæ‰ï¼Œyolov5å‘å¸ƒæ‰ä¸€å¹´å·¦å³çš„æ—¶é—´ï¼ŒYOLOv5å°±å·²ç»æ›´æ–°äº†5ä¸ªåˆ†æ”¯äº†ï¼Œåˆ†åˆ«æ˜¯yolov5.1-yolov5.5åˆ†æ”¯ã€‚è¯¥é¡¹ç›®å°±æ˜¯åˆ©ç”¨çš„yolov5.5åˆ†æ”¯æ¥ä½œä¸ºè®²è§£ã€‚</p><p><a href="https://github.com/ultralytics/yolov5/tree/v5.0">å®˜ç½‘</a></p><h5 id="1ã€æ³¨æ„çš„æ˜¯ï¼šéœ€è¦åœ¨Tagsä¸Šé€‰æ‹©V5-0ç‰ˆæœ¬"><a class="header-anchor" href="#1ã€æ³¨æ„çš„æ˜¯ï¼šéœ€è¦åœ¨Tagsä¸Šé€‰æ‹©V5-0ç‰ˆæœ¬">Â¶</a>1ã€æ³¨æ„çš„æ˜¯ï¼šéœ€è¦åœ¨Tagsä¸Šé€‰æ‹©V5.0ç‰ˆæœ¬</h5><p>ä¸ªå¼€æºçš„é¡¹ç›®é€šè¿‡å¤§å®¶çš„ä¸æ–­çš„å®Œå–„å’Œä¿®å¤å·²ç»åˆ°äº†ç¬¬5ä¸ªåˆ†æ”¯ï¼Œå› æ­¤æˆ‘ä»¬é€‰æ‹©ç¬¬äº”ä¸ªç‰ˆæœ¬æ¥å®éªŒï¼Œé¦–å…ˆç‚¹å‡»å·¦ä¸Šè§’çš„masterè¿™ä¸ªå›¾æ ‡æ¥é€‰æ‹©é¡¹ç›®çš„ç¬¬5ä¸ªåˆ†æ”¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç„¶åå°†ç‰ˆæœ¬é€‰æ‹©å¥½ä»¥åï¼Œç‚¹å‡»å³ä¸Šè§’çš„codeé‚£ä¸ªæŒ‰é”®ï¼Œå°†ä»£ç ä¸‹è½½ä¸‹æ¥ã€‚è‡³æ­¤æ•´ä¸ªé¡¹ç›®å°±å·²ç»å‡†å¤‡å¥½äº†ã€‚</p><p><img src="/2022/111116121/yolov5%E5%9C%B0%E5%9D%80.png" alt></p><h5 id="2ã€é¡¹ç›®çš„ä»£ç ç»“æ„"><a class="header-anchor" href="#2ã€é¡¹ç›®çš„ä»£ç ç»“æ„">Â¶</a>2ã€é¡¹ç›®çš„ä»£ç ç»“æ„</h5><p><img src="/2022/111116121/YOLO%E7%9B%AE%E5%BD%95.png" alt></p><p>â”œâ”€â”€ dataï¼šä¸»è¦æ˜¯å­˜æ”¾ä¸€äº›è¶…å‚æ•°çš„é…ç½®æ–‡ä»¶ï¼ˆè¿™äº›æ–‡ä»¶ï¼ˆyamlæ–‡ä»¶ï¼‰æ˜¯ç”¨æ¥é…ç½®è®­ç»ƒé›†å’Œæµ‹è¯•é›†è¿˜æœ‰éªŒè¯é›†çš„è·¯å¾„çš„ï¼Œå…¶ä¸­è¿˜åŒ…æ‹¬ç›®æ ‡æ£€æµ‹çš„ç§ç±»æ•°å’Œç§ç±»çš„åç§°ï¼‰ï¼›è¿˜æœ‰ä¸€äº›å®˜æ–¹æä¾›æµ‹è¯•çš„å›¾ç‰‡ã€‚å¦‚æœæ˜¯è®­ç»ƒè‡ªå·±çš„æ•°æ®é›†çš„è¯ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¿®æ”¹å…¶ä¸­çš„yamlæ–‡ä»¶ã€‚ä½†æ˜¯è‡ªå·±çš„æ•°æ®é›†ä¸å»ºè®®æ”¾åœ¨è¿™ä¸ªè·¯å¾„ä¸‹é¢ï¼Œè€Œæ˜¯å»ºè®®æŠŠæ•°æ®é›†æ”¾åˆ°yolov5é¡¹ç›®çš„åŒçº§ç›®å½•ä¸‹é¢ã€‚</p><p>â”œâ”€â”€ modelsï¼šé‡Œé¢ä¸»è¦æ˜¯ä¸€äº›ç½‘ç»œæ„å»ºçš„é…ç½®æ–‡ä»¶å’Œå‡½æ•°ï¼Œå…¶ä¸­åŒ…å«äº†è¯¥é¡¹ç›®çš„å››ä¸ªä¸åŒçš„ç‰ˆæœ¬ï¼Œåˆ†åˆ«ä¸ºæ˜¯sã€mã€lã€xã€‚ä»åå­—å°±å¯ä»¥çœ‹å‡ºï¼Œè¿™å‡ ä¸ªç‰ˆæœ¬çš„å¤§å°ã€‚ä»–ä»¬çš„æ£€æµ‹æµ‹åº¦åˆ†åˆ«éƒ½æ˜¯ä»å¿«åˆ°æ…¢ï¼Œä½†æ˜¯ç²¾ç¡®åº¦åˆ†åˆ«æ˜¯ä»ä½åˆ°é«˜ã€‚è¿™å°±æ˜¯æ‰€è°“çš„é±¼å’Œç†ŠæŒä¸å¯å…¼å¾—ã€‚å¦‚æœè®­ç»ƒè‡ªå·±çš„æ•°æ®é›†çš„è¯ï¼Œå°±éœ€è¦ä¿®æ”¹è¿™é‡Œé¢ç›¸å¯¹åº”çš„yamlæ–‡ä»¶æ¥è®­ç»ƒè‡ªå·±æ¨¡å‹ã€‚</p><p>â”œâ”€â”€ utilsï¼šå­˜æ”¾çš„æ˜¯å·¥å…·ç±»çš„å‡½æ•°ï¼Œé‡Œé¢æœ‰losså‡½æ•°ï¼Œmetricså‡½æ•°ï¼Œplotså‡½æ•°ç­‰ç­‰ã€‚</p><p>â”œâ”€â”€ weightsï¼šæ”¾ç½®è®­ç»ƒå¥½çš„æƒé‡å‚æ•°ã€‚</p><p>â”œâ”€â”€ <a href="http://detect.py">detect.py</a>ï¼šåˆ©ç”¨è®­ç»ƒå¥½çš„æƒé‡å‚æ•°è¿›è¡Œç›®æ ‡æ£€æµ‹ï¼Œå¯ä»¥è¿›è¡Œå›¾åƒã€è§†é¢‘å’Œæ‘„åƒå¤´çš„æ£€æµ‹ã€‚</p><p>â”œâ”€â”€ <a href="http://train.py">train.py</a>ï¼šè®­ç»ƒè‡ªå·±çš„æ•°æ®é›†çš„å‡½æ•°ã€‚</p><p>â”œâ”€â”€ <a href="http://test.py">test.py</a>ï¼šæµ‹è¯•è®­ç»ƒçš„ç»“æœçš„å‡½æ•°ã€‚</p><p>â”œâ”€â”€requirements.txtï¼šè¿™æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé‡Œé¢å†™ç€ä½¿ç”¨yolov5é¡¹ç›®çš„ç¯å¢ƒä¾èµ–åŒ…çš„ä¸€äº›ç‰ˆæœ¬ï¼Œå¯ä»¥åˆ©ç”¨è¯¥æ–‡æœ¬å¯¼å…¥ç›¸åº”ç‰ˆæœ¬çš„åŒ…ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯yolov5é¡¹ç›®ä»£ç çš„æ•´ä½“ä»‹ç»ã€‚æˆ‘ä»¬è®­ç»ƒå’Œæµ‹è¯•è‡ªå·±çš„æ•°æ®é›†åŸºæœ¬å°±æ˜¯åˆ©ç”¨åˆ°å¦‚ä¸Šçš„ä»£ç ã€‚</p><h5 id="3ã€ç¯å¢ƒä¾èµ–å®‰è£…"><a class="header-anchor" href="#3ã€ç¯å¢ƒä¾èµ–å®‰è£…">Â¶</a>3ã€ç¯å¢ƒä¾èµ–å®‰è£…</h5><p>æ‰“å¼€requirements.txtè¿™ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢æœ‰å¾ˆå¤šçš„ä¾èµ–åº“å’Œå…¶å¯¹åº”çš„ç‰ˆæœ¬è¦æ±‚ã€‚æˆ‘ä»¬æ‰“å¼€pycharmçš„å‘½ä»¤ç»ˆç«¯ï¼Œåœ¨ä¸­è¾“å…¥å¦‚ä¸‹çš„å‘½ä»¤ï¼Œå°±å¯ä»¥å®‰è£…äº†ã€‚</p><pre class="language-cmd" data-language="cmd"><code class="language-cmd">pip install -r requirements.txt</code></pre><h3 id="äºŒã€æ•°æ®é›†çš„å‡†å¤‡å’Œé¢„è®­ç»ƒæƒé‡çš„å‡†å¤‡"><a class="header-anchor" href="#äºŒã€æ•°æ®é›†çš„å‡†å¤‡å’Œé¢„è®­ç»ƒæƒé‡çš„å‡†å¤‡">Â¶</a>äºŒã€æ•°æ®é›†çš„å‡†å¤‡å’Œé¢„è®­ç»ƒæƒé‡çš„å‡†å¤‡</h3><p>æ•°æ®æœ€å¥½æ”¾åœ¨æœ€å¤–ä¸€çº§ç›®å½•ä¸­ï¼Œç„¶åæ•°æ®é›†çš„ç›®å½•æ ¼å¼å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å¤§å®¶ä¸€å®šè¦ä¸¥æ ¼æŒ‰æˆ‘çš„æ ¼å¼æ¥ï¼Œå¦åˆ™éå¸¸å®¹æ˜“å‡ºé—®é¢˜ã€‚<br><font color="#0000FF">ç›®å½•ç»“æ„å½“ä¸­çš„VOCdevkitå°±æ˜¯æˆ‘çš„æ•°æ®é›†</font></p><p><img src="/2022/111116121/%E6%95%B0%E6%8D%AE%E9%9B%86%E7%9B%AE%E5%BD%95.png" alt></p><h5 id="é¢„è®­ç»ƒæƒé‡"><a class="header-anchor" href="#é¢„è®­ç»ƒæƒé‡">Â¶</a>é¢„è®­ç»ƒæƒé‡</h5><p>ä¸€èˆ¬ä¸ºäº†ç¼©çŸ­ç½‘ç»œçš„è®­ç»ƒæ—¶é—´ï¼Œå¹¶è¾¾åˆ°æ›´å¥½çš„ç²¾åº¦ï¼Œæˆ‘ä»¬ä¸€èˆ¬åŠ è½½é¢„è®­ç»ƒæƒé‡è¿›è¡Œç½‘ç»œçš„è®­ç»ƒã€‚è€Œyolov5çš„5.0ç‰ˆæœ¬ç»™æˆ‘ä»¬æä¾›äº†å‡ ä¸ªé¢„è®­ç»ƒæƒé‡ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹åº”æˆ‘ä»¬ä¸åŒçš„éœ€æ±‚é€‰æ‹©ä¸åŒçš„ç‰ˆæœ¬çš„é¢„è®­ç»ƒæƒé‡ã€‚é€šè¿‡å¦‚ä¸‹çš„å›¾å¯ä»¥è·å¾—æƒé‡çš„åå­—å’Œå¤§å°ä¿¡æ¯ï¼Œå¯ä»¥é¢„æ–™çš„åˆ°ï¼Œé¢„è®­ç»ƒæƒé‡è¶Šå¤§ï¼Œè®­ç»ƒå‡ºæ¥çš„ç²¾åº¦å°±ä¼šç›¸å¯¹æ¥è¯´è¶Šé«˜ï¼Œä½†æ˜¯å…¶æ£€æµ‹çš„é€Ÿåº¦å°±ä¼šè¶Šæ…¢ã€‚é¢„è®­ç»ƒæƒé‡å¯ä»¥é€šè¿‡è¿™ä¸ªç½‘å€è¿›è¡Œä¸‹è½½ï¼Œ<a href="http://xn--yolov5s-e73k318ipqlslfg1fwix19biu0b9seda6019aga742nml2cia0817a06ywvj.pt">æœ¬æ¬¡è®­ç»ƒè‡ªå·±çš„æ•°æ®é›†ç”¨çš„é¢„è®­ç»ƒæƒé‡ä¸ºyolov5s.pt</a>ã€‚</p><p><a href="https://github.com/ultralytics/yolov5/releases">ç½‘å€çš„åº•éƒ¨</a></p><h3 id="ä¸‰ã€è®­ç»ƒè‡ªå·±çš„æ¨¡å‹"><a class="header-anchor" href="#ä¸‰ã€è®­ç»ƒè‡ªå·±çš„æ¨¡å‹">Â¶</a>ä¸‰ã€è®­ç»ƒè‡ªå·±çš„æ¨¡å‹</h3><h5 id="1ã€ä¿®æ”¹æ•°æ®é…ç½®æ–‡ä»¶"><a class="header-anchor" href="#1ã€ä¿®æ”¹æ•°æ®é…ç½®æ–‡ä»¶">Â¶</a>1ã€ä¿®æ”¹æ•°æ®é…ç½®æ–‡ä»¶</h5><p>Â Â Â Â é¢„è®­ç»ƒæ¨¡å‹å’Œæ•°æ®é›†éƒ½å‡†å¤‡å¥½äº†ï¼Œå°±å¯ä»¥å¼€å§‹è®­ç»ƒè‡ªå·±çš„yolov5ç›®æ ‡æ£€æµ‹æ¨¡å‹äº†ï¼Œè®­ç»ƒç›®æ ‡æ£€æµ‹æ¨¡å‹éœ€è¦ä¿®æ”¹ä¸¤ä¸ªyamlæ–‡ä»¶ä¸­çš„å‚æ•°ã€‚ä¸€ä¸ªæ˜¯dataç›®å½•ä¸‹çš„ç›¸åº”çš„yamlæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯modelç›®å½•æ–‡ä»¶ä¸‹çš„ç›¸åº”çš„yamlæ–‡ä»¶ã€‚</p><p>Â Â Â Â ä¿®æ”¹dataç›®å½•ä¸‹çš„ç›¸åº”çš„yamlæ–‡ä»¶ã€‚æ‰¾åˆ°ç›®å½•ä¸‹çš„voc.yamlæ–‡ä»¶ï¼Œå°†è¯¥æ–‡ä»¶å¤åˆ¶ä¸€ä»½ï¼Œå°†å¤åˆ¶çš„æ–‡ä»¶é‡å‘½åï¼Œæœ€å¥½å’Œé¡¹ç›®ç›¸å…³ï¼Œè¿™æ ·æ–¹ä¾¿åé¢æ“ä½œã€‚æˆ‘è¿™é‡Œä¿®æ”¹ä¸ºhat.yamlã€‚è¯¥é¡¹ç›®æ˜¯å¯¹å®‰å…¨å¸½çš„è¯†åˆ«ã€‚</p><p><img src="/2022/111116121/%E7%9B%AE%E5%BD%95%E6%9B%B4%E6%94%B9.png" alt></p><h6 id="dataæ–‡ä»¶å¤¹ä¸‹hat-yamlæ–‡ä»¶çš„ä¿®æ”¹"><a class="header-anchor" href="#dataæ–‡ä»¶å¤¹ä¸‹hat-yamlæ–‡ä»¶çš„ä¿®æ”¹">Â¶</a>dataæ–‡ä»¶å¤¹ä¸‹hat.yamlæ–‡ä»¶çš„ä¿®æ”¹</h6><p>æ‰“å¼€è¿™ä¸ªæ–‡ä»¶å¤¹ä¿®æ”¹å…¶ä¸­çš„å‚æ•°ï¼Œé¦–å…ˆå°†ç®­å¤´1ä¸­çš„é‚£ä¸€è¡Œä»£ç æ³¨é‡Šæ‰ï¼ˆæˆ‘å·²ç»æ³¨é‡Šæ‰äº†ï¼‰ï¼Œå¦‚æœä¸æ³¨é‡Šè¿™è¡Œä»£ç è®­ç»ƒçš„æ—¶å€™ä¼šæŠ¥é”™ï¼›ç®­å¤´2ä¸­éœ€è¦å°†è®­ç»ƒå’Œæµ‹è¯•çš„æ•°æ®é›†çš„è·¯å¾„å¡«ä¸Šï¼ˆæœ€å¥½è¦å¡«ç»å¯¹è·¯å¾„ï¼Œæœ‰æ—¶å€™ç”±ç›®å½•ç»“æ„çš„é—®é¢˜ä¼šè«åå¥‡å¦™çš„æŠ¥é”™ï¼‰ï¼›ç®­å¤´3ä¸­éœ€è¦æ£€æµ‹çš„ç±»åˆ«æ•°ï¼Œæˆ‘è¿™é‡Œæ˜¯è¯†åˆ«å®‰å…¨å¸½å’Œäººï¼Œæ‰€ä»¥è¿™é‡Œå¡«å†™2ï¼›æœ€åç®­å¤´4ä¸­å¡«å†™éœ€è¦è¯†åˆ«çš„ç±»åˆ«çš„åå­—ï¼ˆå¿…é¡»æ˜¯è‹±æ–‡ï¼Œå¦åˆ™ä¼šä¹±ç è¯†åˆ«ä¸å‡ºæ¥ï¼‰ã€‚åˆ°è¿™é‡Œå’Œdataç›®å½•ä¸‹çš„yamlæ–‡ä»¶å°±ä¿®æ”¹å¥½äº†ã€‚</p><p><img src="/2022/111116121/data%E4%B8%8Byaml%E6%96%87%E4%BB%B6.png" alt></p><h6 id="modelsæ–‡ä»¶å¤¹ä¸‹hat-yamlæ–‡ä»¶çš„ä¿®æ”¹"><a class="header-anchor" href="#modelsæ–‡ä»¶å¤¹ä¸‹hat-yamlæ–‡ä»¶çš„ä¿®æ”¹">Â¶</a>modelsæ–‡ä»¶å¤¹ä¸‹hat.yamlæ–‡ä»¶çš„ä¿®æ”¹</h6><p>ç”±äºè¯¥é¡¹ç›®ä½¿ç”¨çš„æ˜¯yolov5s.ptè¿™ä¸ªé¢„è®­ç»ƒæƒé‡ï¼Œæ‰€ä»¥è¦ä½¿ç”¨modelsç›®å½•ä¸‹çš„yolov5s.yamlæ–‡ä»¶ä¸­çš„ç›¸åº”å‚æ•°ï¼ˆå› ä¸ºä¸åŒçš„é¢„è®­ç»ƒæƒé‡å¯¹åº”ç€ä¸åŒçš„ç½‘ç»œå±‚æ•°ï¼Œæ‰€ä»¥ç”¨é”™é¢„è®­ç»ƒæƒé‡ä¼šæŠ¥é”™ï¼‰ã€‚åŒä¸Šä¿®æ”¹dataç›®å½•ä¸‹çš„yamlæ–‡ä»¶ä¸€æ ·ï¼Œæˆ‘ä»¬æœ€å¥½å°†yolov5s.yamlæ–‡ä»¶å¤åˆ¶ä¸€ä»½ï¼Œç„¶åå°†å…¶é‡å‘½åï¼Œæˆ‘å°†å…¶é‡å‘½åä¸ºhat.yamlã€‚</p><p>æ‰“å¼€yolov5_hat.yamlæ–‡ä»¶åªéœ€è¦ä¿®æ”¹å¦‚å›¾ä¸­çš„æ•°å­—å°±å¥½äº†ï¼Œè¿™é‡Œæ˜¯è¯†åˆ«ä¸¤ä¸ªç±»åˆ«ã€‚</p><p><img src="/2022/111116121/models%E4%B8%8Byaml%E6%96%87%E4%BB%B6.png" alt></p><h6 id="train-pyæ–‡ä»¶çš„ç›¸å…³å‚æ•°çš„ä¿®æ”¹"><a class="header-anchor" href="#train-pyæ–‡ä»¶çš„ç›¸å…³å‚æ•°çš„ä¿®æ”¹">Â¶</a>train.pyæ–‡ä»¶çš„ç›¸å…³å‚æ•°çš„ä¿®æ”¹</h6><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span><span class="token triple-quoted-string string">"""    optæ¨¡å‹ä¸»è¦å‚æ•°è§£æï¼š    --weightsï¼šåˆå§‹åŒ–çš„æƒé‡æ–‡ä»¶çš„è·¯å¾„åœ°å€    --cfgï¼šæ¨¡å‹yamlæ–‡ä»¶çš„è·¯å¾„åœ°å€    --dataï¼šæ•°æ®yamlæ–‡ä»¶çš„è·¯å¾„åœ°å€    --hypï¼šè¶…å‚æ•°æ–‡ä»¶è·¯å¾„åœ°å€    --epochsï¼šè®­ç»ƒè½®æ¬¡    --batch-sizeï¼šå–‚å…¥æ‰¹æ¬¡æ–‡ä»¶çš„å¤šå°‘    --img-sizeï¼šè¾“å…¥å›¾ç‰‡å°ºå¯¸    --rect:æ˜¯å¦é‡‡ç”¨çŸ©å½¢è®­ç»ƒï¼Œé»˜è®¤False    --resume:æ¥ç€æ‰“æ–­è®­ç»ƒä¸Šæ¬¡çš„ç»“æœæ¥ç€è®­ç»ƒ    --nosave:ä¸ä¿å­˜æ¨¡å‹ï¼Œé»˜è®¤False    --notest:ä¸è¿›è¡Œtestï¼Œé»˜è®¤False    --noautoanchor:ä¸è‡ªåŠ¨è°ƒæ•´anchorï¼Œé»˜è®¤False    --evolve:æ˜¯å¦è¿›è¡Œè¶…å‚æ•°è¿›åŒ–ï¼Œé»˜è®¤False    --bucket:è°·æ­Œäº‘ç›˜bucketï¼Œä¸€èˆ¬ä¸ä¼šç”¨åˆ°    --cache-images:æ˜¯å¦æå‰ç¼“å­˜å›¾ç‰‡åˆ°å†…å­˜ï¼Œä»¥åŠ å¿«è®­ç»ƒé€Ÿåº¦ï¼Œé»˜è®¤False    --image-weightsï¼šä½¿ç”¨åŠ æƒå›¾åƒé€‰æ‹©è¿›è¡Œè®­ç»ƒ    --device:è®­ç»ƒçš„è®¾å¤‡ï¼Œcpuï¼›0(è¡¨ç¤ºä¸€ä¸ªgpuè®¾å¤‡cuda:0)ï¼›0,1,2,3(å¤šä¸ªgpuè®¾å¤‡)    --multi-scale:æ˜¯å¦è¿›è¡Œå¤šå°ºåº¦è®­ç»ƒï¼Œé»˜è®¤False    --single-cls:æ•°æ®é›†æ˜¯å¦åªæœ‰ä¸€ä¸ªç±»åˆ«ï¼Œé»˜è®¤False    --adam:æ˜¯å¦ä½¿ç”¨adamä¼˜åŒ–å™¨    --sync-bn:æ˜¯å¦ä½¿ç”¨è·¨å¡åŒæ­¥BN,åœ¨DDPæ¨¡å¼ä½¿ç”¨    --local_rankï¼šDDPå‚æ•°ï¼Œè¯·å‹¿ä¿®æ”¹    --workersï¼šæœ€å¤§å·¥ä½œæ ¸å¿ƒæ•°    --project:è®­ç»ƒæ¨¡å‹çš„ä¿å­˜ä½ç½®    --nameï¼šæ¨¡å‹ä¿å­˜çš„ç›®å½•åç§°    --exist-okï¼šæ¨¡å‹ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨å°±åˆ›å»º"""</span>    parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--weights'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'yolov5s.pt'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'initial weights path'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--cfg'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'model.yaml path'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--data'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'data/coco128.yaml'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'data.yaml path'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--hyp'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'data/hyp.scratch.yaml'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'hyperparameters path'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--epochs'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--batch-size'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'total batch size for all GPUs'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--img-size'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'+'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">640</span><span class="token punctuation">,</span> <span class="token number">640</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'[train, test] image sizes'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--rect'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'rectangular training'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--resume'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'?'</span><span class="token punctuation">,</span> const<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'resume most recent training'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--nosave'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'only save final checkpoint'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--notest'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'only test final epoch'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--noautoanchor'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'disable autoanchor check'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--evolve'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'evolve hyperparameters'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--bucket'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'gsutil bucket'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--cache-images'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'cache images for faster training'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--image-weights'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'use weighted image selection for training'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--device'</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'cuda device, i.e. 0 or 0,1,2,3 or cpu'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--multi-scale'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'vary img-size +/- 50%%'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--single-cls'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'train multi-class data as single-class'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--adam'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'use torch.optim.Adam() optimizer'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--sync-bn'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'use SyncBatchNorm, only available in DDP mode'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--local_rank'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'DDP parameter, do not modify'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--workers'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'maximum number of dataloader workers'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--project'</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'runs/train'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'save to project/name'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--entity'</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'W&amp;B entity'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--name'</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'exp'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'save to project/name'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--exist-ok'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'existing project/name ok, do not increment'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--quad'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'quad dataloader'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--linear-lr'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'linear LR'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--label-smoothing'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">float</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'Label smoothing epsilon'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--upload_dataset'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'Upload dataset as W&amp;B artifact table'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--bbox_interval'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'Set bounding-box image logging interval for W&amp;B'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--save_period'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'Log model after every "save_period" epoch'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--artifact_alias'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">"latest"</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'version of dataset artifact to be used'</span><span class="token punctuation">)</span>    opt <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>è®­ç»ƒè‡ªå·±çš„æ¨¡å‹éœ€è¦ä¿®æ”¹å¦‚ä¸‹å‡ ä¸ªå‚æ•°å°±å¯ä»¥è®­ç»ƒäº†ã€‚é¦–å…ˆå°†weightsæƒé‡çš„è·¯å¾„å¡«å†™åˆ°å¯¹åº”çš„å‚æ•°é‡Œé¢ï¼Œç„¶åå°†ä¿®å¥½å¥½çš„modelsæ¨¡å‹çš„yolov5s.yamlæ–‡ä»¶è·¯å¾„å¡«å†™åˆ°ç›¸åº”çš„å‚æ•°é‡Œé¢ï¼Œæœ€åå°†dataæ•°æ®çš„hat.yamlæ–‡ä»¶è·¯å¾„å¡«å†™åˆ°ç›¸å¯¹äºçš„å‚æ•°é‡Œé¢ã€‚è¿™å‡ ä¸ªå‚æ•°å°±å¿…é¡»è¦ä¿®æ”¹çš„å‚æ•°ã€‚</p><pre class="language-python" data-language="python"><code class="language-python">parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--weights'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'weights/yolov5s.pt'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'initial weights path'</span><span class="token punctuation">)</span>parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--cfg'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'models/yolov5s_hat.yaml'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'model.yaml path'</span><span class="token punctuation">)</span>parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--data'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'data/hat.yaml'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'data.yaml path'</span><span class="token punctuation">)</span></code></pre><p>è¿˜æœ‰å‡ ä¸ªéœ€è¦æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥æ›´æ”¹çš„å‚æ•°ï¼š</p><p>é¦–å…ˆæ˜¯æ¨¡å‹çš„è®­ç»ƒè½®æ¬¡ï¼Œè¿™é‡Œæ˜¯è®­ç»ƒçš„300è½®ã€‚(æˆ‘çš„åƒåœ¾æˆ´å°”G3[GPU GTX1650]è®­ç»ƒ40è½®ï¼Œæäº†ä¸€å¤©,)</p><pre class="language-python" data-language="python"><code class="language-python">parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--epochs'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span></code></pre><p><font color="#FF0000">å¦‚æœå‡ºç° out of memory è¡¨ç¤ºæ˜¾å­˜æº¢å‡ºäº†ï¼Œ éœ€è¦ä¸‹è°ƒä»¥ä¸‹ä¸¤ä¸ªå‚æ•°</font></p><pre class="language-python" data-language="python"><code class="language-python">parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--batch-size'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'total batch size for all GPUs'</span><span class="token punctuation">)</span>parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--workers'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'maximum number of dataloader workers'</span><span class="token punctuation">)</span></code></pre><p><font color="#FF0000">å¦‚æœå‡ºç°OSErrorï¼š[WinError 1455] é¡µé¢æ–‡ä»¶å¤ªå°ï¼Œæ— æ³•å®Œæˆæ“ä½œ</font></p><p>å¯ä»¥æ ¹æ®å¦‚ä¸‹çš„æ“ä½œæ¥ä¿®æ”¹ï¼Œåœ¨utilsè·¯å¾„ä¸‹æ‰¾åˆ°datasets.pyè¿™ä¸ªæ–‡ä»¶ï¼Œå°†é‡Œé¢çš„ç¬¬81è¡Œé‡Œé¢çš„å‚æ•°nwæ”¹å®Œ0å°±å¯ä»¥äº†ã€‚</p><p>ğŸ‘<br>ğŸ’<br>ğŸ“<br>ğŸ”<br>ğŸ•<br>ğŸ–<br>ğŸ—<br>ğŸ˜<br>ğŸ™<br>ğŸš<br>ğŸ›</p><p>ç„¶åè¿è¡Œtrain.pyå°±å¯ä»¥è®­ç»ƒæ¨¡å‹äº†</p><h3 id="å››ï¼Œä½¿ç”¨tensorboardæŸ¥çœ‹å‚æ•°"><a class="header-anchor" href="#å››ï¼Œä½¿ç”¨tensorboardæŸ¥çœ‹å‚æ•°">Â¶</a>å››ï¼Œä½¿ç”¨tensorboardæŸ¥çœ‹å‚æ•°</h3><p>yolov5é‡Œé¢æœ‰å†™å¥½çš„tensorbordå‡½æ•°ï¼Œå¯ä»¥è¿è¡Œå‘½ä»¤å°±å¯ä»¥è°ƒç”¨tensorbordï¼Œç„¶åæŸ¥çœ‹tensorbordäº†ã€‚é¦–å…ˆæ‰“å¼€pycharmçš„å‘½ä»¤æ§åˆ¶ç»ˆç«¯ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªç½‘å€åœ°å€ï¼Œå°†é‚£è¡Œç½‘å€å¤åˆ¶ä¸‹æ¥åˆ°æµè§ˆå™¨æ‰“å¼€å°±å¯ä»¥çœ‹åˆ°è®­ç»ƒçš„è¿‡ç¨‹äº†</p><p>æ³¨æ„éœ€è¦åˆ‡æ¢åˆ°pytorchè™šæ‹Ÿç¯å¢ƒä¸‹</p><pre class="language-cmd" data-language="cmd"><code class="language-cmd">tensorboard --logdir&#x3D;runs&#x2F;train</code></pre><p><img src="/2022/111116121/tensorboard%E9%9D%A2%E6%9D%BF.png" alt></p><h3 id="äº”ã€è®­ç»ƒå®Œæˆä¹‹åï¼Œä¼šå‡ºç°ä¸€ä¸ªrunsçš„æ–‡ä»¶å¤¹"><a class="header-anchor" href="#äº”ã€è®­ç»ƒå®Œæˆä¹‹åï¼Œä¼šå‡ºç°ä¸€ä¸ªrunsçš„æ–‡ä»¶å¤¹">Â¶</a>äº”ã€è®­ç»ƒå®Œæˆä¹‹åï¼Œä¼šå‡ºç°ä¸€ä¸ªrunsçš„æ–‡ä»¶å¤¹</h3><p>ç­‰åˆ°æ•°æ®è®­ç»ƒå¥½äº†ä»¥åï¼Œå°±ä¼šåœ¨ä¸»ç›®å½•ä¸‹äº§ç”Ÿä¸€ä¸ªrunæ–‡ä»¶å¤¹ï¼Œåœ¨run/train/exp/weightsç›®å½•ä¸‹ä¼šäº§ç”Ÿä¸¤ä¸ªæƒé‡æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯æœ€åä¸€è½®çš„æƒé‡æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯æœ€å¥½çš„æƒé‡æ–‡ä»¶ï¼Œä¸€ä¼šæˆ‘ä»¬å°±è¦åˆ©ç”¨è¿™ä¸ªæœ€å¥½çš„æƒé‡æ–‡ä»¶æ¥åšæ¨ç†æµ‹è¯•ã€‚é™¤æ­¤ä»¥å¤–è¿˜ä¼šäº§ç”Ÿä¸€äº›éªŒè¯æ–‡ä»¶çš„å›¾ç‰‡ç­‰ä¸€äº›æ–‡ä»¶</p><p>æ‰¾åˆ°detect.pyæ–‡ä»¶<br>ç„¶åæ‰¾åˆ°ä¸»å‡½æ•°çš„å…¥å£ï¼Œè¿™é‡Œé¢æœ‰æ¨¡å‹çš„ä¸»è¦å‚æ•°ã€‚æ¨¡å‹çš„ä¸»è¦å‚æ•°è§£æå¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre class="language-python" data-language="python"><code class="language-python">f __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span><span class="token triple-quoted-string string">"""--weights:æƒé‡çš„è·¯å¾„åœ°å€--source:æµ‹è¯•æ•°æ®ï¼Œå¯ä»¥æ˜¯å›¾ç‰‡/è§†é¢‘è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯'0'(ç”µè„‘è‡ªå¸¦æ‘„åƒå¤´),ä¹Ÿå¯ä»¥æ˜¯rtspç­‰è§†é¢‘æµ--output:ç½‘ç»œé¢„æµ‹ä¹‹åçš„å›¾ç‰‡/è§†é¢‘çš„ä¿å­˜è·¯å¾„--img-size:ç½‘ç»œè¾“å…¥å›¾ç‰‡å¤§å°--conf-thres:ç½®ä¿¡åº¦é˜ˆå€¼--iou-thres:åšnmsçš„ioué˜ˆå€¼--device:æ˜¯ç”¨GPUè¿˜æ˜¯CPUåšæ¨ç†--view-img:æ˜¯å¦å±•ç¤ºé¢„æµ‹ä¹‹åçš„å›¾ç‰‡/è§†é¢‘ï¼Œé»˜è®¤False--save-txt:æ˜¯å¦å°†é¢„æµ‹çš„æ¡†åæ ‡ä»¥txtæ–‡ä»¶å½¢å¼ä¿å­˜ï¼Œé»˜è®¤False--classes:è®¾ç½®åªä¿ç•™æŸä¸€éƒ¨åˆ†ç±»åˆ«ï¼Œå½¢å¦‚0æˆ–è€…0 2 3--agnostic-nms:è¿›è¡Œnmsæ˜¯å¦ä¹Ÿå»é™¤ä¸åŒç±»åˆ«ä¹‹é—´çš„æ¡†ï¼Œé»˜è®¤False--augment:æ¨ç†çš„æ—¶å€™è¿›è¡Œå¤šå°ºåº¦ï¼Œç¿»è½¬ç­‰æ“ä½œ(TTA)æ¨ç†--update:å¦‚æœä¸ºTrueï¼Œåˆ™å¯¹æ‰€æœ‰æ¨¡å‹è¿›è¡Œstrip_optimizeræ“ä½œï¼Œå»é™¤ptæ–‡ä»¶ä¸­çš„ä¼˜åŒ–å™¨ç­‰ä¿¡æ¯ï¼Œé»˜è®¤ä¸ºFalse--projectï¼šæ¨ç†çš„ç»“æœä¿å­˜åœ¨runs/detectç›®å½•ä¸‹--nameï¼šç»“æœä¿å­˜çš„æ–‡ä»¶å¤¹åç§°"""</span>    parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--weights'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'+'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'yolov5s.pt'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'model.pt path(s)'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--source'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'data/images'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'source'</span><span class="token punctuation">)</span>  <span class="token comment"># file/folder, 0 for webcam</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--img-size'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">640</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'inference size (pixels)'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--conf-thres'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">float</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'object confidence threshold'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--iou-thres'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">float</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token number">0.45</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'IOU threshold for NMS'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--device'</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'cuda device, i.e. 0 or 0,1,2,3 or cpu'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--view-img'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'display results'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--save-txt'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'save results to *.txt'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--save-conf'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'save confidences in --save-txt labels'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--nosave'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'do not save images/videos'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--classes'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'+'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'filter by class: --class 0, or --class 0 2 3'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--agnostic-nms'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'class-agnostic NMS'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--augment'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'augmented inference'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--update'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'update all models'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--project'</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'runs/detect'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'save results to project/name'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--name'</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'exp'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'save results to project/name'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--exist-ok'</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">'store_true'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'existing project/name ok, do not increment'</span><span class="token punctuation">)</span>    opt <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>è¿™é‡Œéœ€è¦å°†åˆšåˆšè®­ç»ƒå¥½çš„æœ€å¥½çš„æƒé‡ä¼ å…¥åˆ°æ¨ç†å‡½æ•°ä¸­å»ã€‚ç„¶åå°±å¯ä»¥å¯¹å›¾åƒè§†é¢‘è¿›è¡Œæ¨ç†äº†ã€‚</p> <pre class="language-python" data-language="python"><code class="language-python">parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--weights'</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">'+'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'runs/train/exp/weights/best.pt'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'model.pt path(s)'</span><span class="token punctuation">)</span></code></pre><p>å¯¹å›¾ç‰‡è¿›è¡Œæµ‹è¯•æ¨ç†ï¼Œå°†å¦‚ä¸‹å‚æ•°ä¿®æ”¹æˆå›¾ç‰‡çš„è·¯å¾„ï¼Œç„¶åè¿è¡Œdetect.pyå°±å¯ä»¥è¿›è¡Œæµ‹è¯•äº†ã€‚</p> <pre class="language-python" data-language="python"><code class="language-python">parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'--source'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'000295.jpg'</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'source'</span><span class="token punctuation">)</span> </code></pre><p>åœ¨runsä¸‹æœ‰detectæ–‡ä»¶å¤¹ï¼Œå³ä¸ºè¿è¡Œçš„ç»“æœ</p><p>å¯¹è§†é¢‘è¿›è¡Œæµ‹è¯•ï¼Œå’Œå¦‚ä¸Šçš„å›¾ç‰‡çš„æµ‹è¯•æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡æ˜¯å°†å›¾ç‰‡çš„è·¯å¾„æ”¹ä¸ºè§†é¢‘çš„è·¯å¾„è€Œå·²ã€‚åˆ©ç”¨æ‘„åƒå¤´è¿›è¡Œæµ‹è¯•åªéœ€å°†è·¯å¾„æ”¹å†™ä¸º0å°±å¥½äº†ã€‚ä½†æ˜¯å¥½åƒè¿˜æ˜¯ä¼šæŠ¥é”™ï¼Œè¿™ä¸€ç‚¹å¡äº†æˆ‘å¾ˆä¹…ã€‚æŠ¥é”™å¦‚ä¸‹ã€‚</p><p>æ‰“å¼€datasetsæ–‡ä»¶ï¼Œæ‰¾åˆ°ç¬¬279è¡Œä»£ç ï¼Œç»™ä¸¤ä¸ªurlå‚æ•°åŠ ä¸Šstrå°±å¯ä»¥äº†ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œå°±å¯ä»¥å®Œç¾è¿è¡Œç”µè„‘çš„æ‘„åƒå¤´äº†ã€‚</p><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> <span class="token string">'youtube.com/'</span> <span class="token keyword">in</span> <span class="token builtin">str</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token string">'youtu.be/'</span> <span class="token keyword">in</span> <span class="token builtin">str</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">:</span></code></pre><font></font></font>]]></content>
      
      
      <categories>
          
          <category> Pytorch </category>
          
          <category> ç›®æ ‡æ£€æµ‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
            <tag> ç½‘ç»œæ¨¡å‹ </tag>
            
            <tag> æ¨¡å‹è®­ç»ƒ </tag>
            
            <tag> ç›®æ ‡æ£€æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç›®æ ‡æ£€æµ‹--åˆ©ç”¨labelimgåˆ¶ä½œæ·±åº¦å­¦ä¹ æ•°æ®é›†</title>
      <link href="/2022/110916121.html"/>
      <url>/2022/110916121.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h3 id="ä¸€ã€ä½¿ç”¨labelImgæ ‡è®°æ•°æ®"><a class="header-anchor" href="#ä¸€ã€ä½¿ç”¨labelImgæ ‡è®°æ•°æ®">Â¶</a>ä¸€ã€ä½¿ç”¨labelImgæ ‡è®°æ•°æ®</h3><p>Labelimgæ˜¯ä¸€æ¬¾å¼€æºçš„æ•°æ®æ ‡æ³¨å·¥å…·ï¼Œå¯ä»¥æ ‡æ³¨ä¸‰ç§æ ¼å¼ã€‚</p><pre><code>   1  VOCæ ‡ç­¾æ ¼å¼ï¼Œä¿å­˜ä¸ºxmlæ–‡ä»¶ã€‚   2  yoloæ ‡ç­¾æ ¼å¼ï¼Œä¿å­˜ä¸ºtxtæ–‡ä»¶ã€‚   3 createMLæ ‡ç­¾æ ¼å¼ï¼Œä¿å­˜ä¸ºjsonæ ¼å¼ã€‚</code></pre><h3 id="äºŒã€labelimgçš„å®‰è£…"><a class="header-anchor" href="#äºŒã€labelimgçš„å®‰è£…">Â¶</a>äºŒã€labelimgçš„å®‰è£…</h3><p>è¿™é‡Œä¸»è¦è®²çš„æ˜¯åœ¨windowç³»ç»Ÿä¸­çš„å®‰è£…ï¼Œé¦–å…ˆæ‰“å¼€cmdå‘½ä»¤è¡Œï¼ˆå¿«æ·é”®ï¼šwin+Rï¼‰ã€‚è¿›å…¥cmdå‘½ä»¤è¡Œæ§åˆ¶å°ã€‚è¾“å…¥å¦‚ä¸‹çš„å‘½ä»¤ï¼š</p><pre class="language-cmd" data-language="cmd"><code class="language-cmd">pip install labelimg -i https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple</code></pre><p>è¡Œå¦‚ä¸Šå‘½ä»¤åï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨ä¸‹è½½labelimgç›¸å…³çš„ä¾èµ–ã€‚ç”±äºè¿™æ˜¯ä¸€ä¸ªå¾ˆè½»é‡çš„å·¥å…·ï¼Œæ‰€ä»¥ä¸‹è½½èµ·æ¥å¾ˆå¿«ï¼Œå½“å‡ºç°å¦‚ä¸‹çº¢è‰²æ¡†æ¡†ä¸­çš„å‘Šè¯‰æˆ‘ä»¬æˆåŠŸå®‰è£…çš„æ—¶å€™ï¼Œè¯´æ˜labelimgå®‰è£…æˆåŠŸäº†ã€‚<br><img src="/2022/110916121/%E5%AE%89%E8%A3%85labelimg.png" alt></p><h3 id="ä¸‰ã€æ•°æ®å‡†å¤‡"><a class="header-anchor" href="#ä¸‰ã€æ•°æ®å‡†å¤‡">Â¶</a>ä¸‰ã€æ•°æ®å‡†å¤‡</h3><p>é¦–å…ˆè¿™é‡Œéœ€è¦å‡†å¤‡æˆ‘ä»¬éœ€è¦æ‰“æ ‡æ³¨çš„æ•°æ®é›†ã€‚è¿™é‡Œæˆ‘å»ºè®®æ–°å»ºä¸€ä¸ªåä¸ºVOC2007çš„æ–‡ä»¶å¤¹ï¼ˆè¿™ä¸ªæ˜¯çº¦å®šä¿—æˆï¼Œä¸è¿™ä¹ˆåšä¹Ÿè¡Œï¼‰ï¼Œé‡Œé¢åˆ›å»ºä¸€ä¸ªåä¸ºJPEGImagesçš„æ–‡ä»¶å¤¹å­˜æ”¾æˆ‘ä»¬éœ€è¦æ‰“æ ‡ç­¾çš„å›¾ç‰‡æ–‡ä»¶ï¼›å†åˆ›å»ºä¸€ä¸ªåä¸ºAnnotationså­˜æ”¾æ ‡æ³¨çš„æ ‡ç­¾æ–‡ä»¶ï¼›æœ€ååˆ›å»ºä¸€ä¸ªåä¸º predefined_classes.txt çš„txtæ–‡ä»¶æ¥å­˜æ”¾æ‰€è¦æ ‡æ³¨çš„ç±»åˆ«åç§°ã€‚</p><p>VOC2007çš„ç›®å½•ç»“æ„ä¸ºï¼š</p><p>â”œâ”€â”€ VOC2007<br>â”‚â”œâ”€â”€ JPEGImages  å­˜æ”¾éœ€è¦æ‰“æ ‡ç­¾çš„å›¾ç‰‡æ–‡ä»¶<br>â”‚â”œâ”€â”€ Annotations  å­˜æ”¾æ ‡æ³¨çš„æ ‡ç­¾æ–‡ä»¶<br>â”‚â”œâ”€â”€ predefined_classes.txt  å®šä¹‰è‡ªå·±è¦æ ‡æ³¨çš„æ‰€æœ‰ç±»åˆ«ï¼ˆè¿™ä¸ªæ–‡ä»¶å¯æœ‰å¯æ— ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬å®šä¹‰ç±»åˆ«æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œæœ€å¥½æœ‰è¿™ä¸ªåˆ›å»ºä¸€ä¸ªè¿™æ ·çš„txtæ–‡ä»¶æ¥å­˜æ”¾ç±»åˆ«ï¼‰</p><p>å…·ä½“æŸ¥çœ‹ï¼šE:\DeepLearning\BinCode\VOCdevkit\VOC2007</p><p><img src="/2022/110916121/%E6%A0%87%E6%B3%A8%E8%AE%BE%E7%BD%AE.png" alt></p><p>æ‰“å¼€cmdå‘½ä»¤ç»ˆç«¯ï¼ˆå¿«æ·é”®ï¼šwin+Rï¼‰ã€‚è¿›å…¥åˆ°åˆšåˆšåˆ›å»ºçš„è¿™ä¸ªVOC2007è·¯å¾„ï¼ˆè¿™ä¸ªå¾ˆé‡è¦ï¼Œæ¶‰åŠåˆ°èƒ½ä¸èƒ½åˆ©ç”¨predefined_classes.txt è¿™ä¸ªtxtæ–‡ä»¶ä¸­å®šä¹‰çš„ç±»åˆ«ï¼Œæˆ‘åœ¨è¿™é‡Œå¡äº†å¾ˆä¹…ï¼Œä¸€åº¦ä»¥ä¸ºä¸èƒ½æ˜¾ç¤ºtxtæ–‡ä»¶ä¸­å®šä¹‰çš„ç±»åˆ«æ˜¯æˆ‘å®‰è£…æœ‰é—®é¢˜ï¼‰ã€‚æ‰§è¡Œå¦‚å›¾ä¸­çš„å‘½ä»¤è¿›å…¥åˆ°VOC2007è·¯å¾„ä¸‹ï¼ˆæ¯ä¸ªäººçš„è·¯å¾„éƒ½ä¸ä¸€æ ·ï¼ŒæŒ‰ä¸ªäººçš„è·¯å¾„å»å†™ï¼‰å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå¯ä»¥çœ‹åˆ°è¿›å…¥åˆ°ç›¸åº”çš„ç›®å½•äº†ã€‚</p><p><img src="/2022/110916121/%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95.png" alt></p><p>è¾“å…¥å¦‚ä¸‹çš„å‘½ä»¤æ‰“å¼€labelimgã€‚è¿™ä¸ªå‘½ä»¤çš„æ„æ€æ˜¯æ‰“å¼€labelimgå·¥å…·ï¼›æ‰“å¼€JPEGImageæ–‡ä»¶å¤¹ï¼Œåˆå§‹åŒ–predefined_classes.txté‡Œé¢å®šä¹‰çš„ç±»ã€‚</p><pre class="language-cmd" data-language="cmd"><code class="language-cmd">labelimg JPEGImages predefined_classes.txt</code></pre><p><a href="https://blog.csdn.net/didiaopao/article/details/119808973">å­¦ä¹ è·¯å¾„</a></p></font>]]></content>
      
      
      <categories>
          
          <category> Pytorch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
            <tag> ç½‘ç»œæ¨¡å‹ </tag>
            
            <tag> æ¨¡å‹è®­ç»ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pytorchå­¦ä¹ 4-ä½¿ç”¨GPUè®­ç»ƒæ¨¡å‹</title>
      <link href="/2022/110816121.html"/>
      <url>/2022/110816121.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h4 id="ä¸€ã€ç¬¬ä¸€ç§æ–¹å¼ä½¿ç”¨GPUè®­ç»ƒæ¨¡å‹"><a class="header-anchor" href="#ä¸€ã€ç¬¬ä¸€ç§æ–¹å¼ä½¿ç”¨GPUè®­ç»ƒæ¨¡å‹">Â¶</a>ä¸€ã€ç¬¬ä¸€ç§æ–¹å¼ä½¿ç”¨GPUè®­ç»ƒæ¨¡å‹</h4><h5 id="æ–¹æ³•ï¼šåœ¨æŸå¤±å‡½æ•°ï¼Œç½‘ç»œæ¨¡å‹ï¼Œæ•°æ®-imgs-targets-ä¸Šæ·»åŠ -cuda"><a class="header-anchor" href="#æ–¹æ³•ï¼šåœ¨æŸå¤±å‡½æ•°ï¼Œç½‘ç»œæ¨¡å‹ï¼Œæ•°æ®-imgs-targets-ä¸Šæ·»åŠ -cuda">Â¶</a>æ–¹æ³•ï¼šåœ¨æŸå¤±å‡½æ•°ï¼Œç½‘ç»œæ¨¡å‹ï¼Œæ•°æ®(imgs, targets) ä¸Šæ·»åŠ  .cuda()</h5><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">import</span> torchvision<span class="token keyword">import</span> time<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>tensorboard <span class="token keyword">import</span> SummaryWriter<span class="token comment"># 1ã€å‡†å¤‡æ•°æ®é›†(å‚æ•°å½“ä¸­éœ€è¦å°†å…¶è½¬æ¢ä¸ºtensorç±»å‹)</span><span class="token keyword">from</span> torch <span class="token keyword">import</span> nn<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> DataLoadertrain_data <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>CIFAR10<span class="token punctuation">(</span>root<span class="token operator">=</span><span class="token string">"./data"</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> transform<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                          download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>test_data <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>CIFAR10<span class="token punctuation">(</span>root<span class="token operator">=</span><span class="token string">"./data"</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> transform<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                         download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token comment"># 2ã€æŸ¥çœ‹è®­ç»ƒæ•°æ®é›† æµ‹è¯•æ•°æ®é›†çš„å¤§å°</span>train_data_size <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>train_data<span class="token punctuation">)</span>test_data_size <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>test_data<span class="token punctuation">)</span><span class="token comment"># ä¸‹é¢æ˜¯å­—ç¬¦ä¸²çš„æ›¿æ¢æ–¹æ³•</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è®­ç»ƒæ•°æ®é›†çš„å¤§å°ä¸ºï¼š&#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>train_data_size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æµ‹è¯•æ•°æ®é›†çš„å¤§å°ä¸ºï¼š&#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>test_data_size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># è®­ç»ƒæ•°æ®é›†çš„å¤§å°ä¸ºï¼š50000</span><span class="token comment"># æµ‹è¯•æ•°æ®é›†çš„å¤§å°ä¸ºï¼š10000</span><span class="token comment"># 3ã€ä½¿ç”¨DataLoaderåŠ è½½æ•°æ®é›†</span>train_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span>test_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>test_data<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token comment"># 4ã€å¼•å…¥æ­å»ºå¥½çš„ç¥ç»ç½‘ç»œï¼š model.py</span><span class="token comment"># ä½¿ç”¨äº† from model import *</span><span class="token keyword">class</span> <span class="token class-name">Bin</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>Bin<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>model <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">64</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>model<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token keyword">return</span> x<span class="token builtin">bin</span> <span class="token operator">=</span> Bin<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å°†ç½‘ç»œæ¨¡å‹è½¬ç§»åˆ°cudaä¸Šå»</span><span class="token keyword">if</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">bin</span> <span class="token operator">=</span> <span class="token builtin">bin</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># 5ã€æ„å»ºæŸå¤±å‡½æ•°</span>loss_fn <span class="token operator">=</span> nn<span class="token punctuation">.</span>CrossEntropyLoss<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    loss_fn <span class="token operator">=</span> loss_fn<span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># 6ã€æ„å»ºä¼˜åŒ–å™¨</span><span class="token comment"># å­¦ä¹ é€Ÿç‡</span><span class="token comment"># learning_rate = 0.01</span><span class="token comment"># ä¹Ÿæœ‰ä¸‹é¢çš„å†™æ³•</span><span class="token comment"># 1e-2 = (10) ^ (-2) = 0.01</span>learning_rate <span class="token operator">=</span> <span class="token number">1e-2</span>optimizer <span class="token operator">=</span> torch<span class="token punctuation">.</span>optim<span class="token punctuation">.</span>SGD<span class="token punctuation">(</span><span class="token builtin">bin</span><span class="token punctuation">.</span>parameters<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lr<span class="token operator">=</span>learning_rate<span class="token punctuation">)</span><span class="token comment"># 7ã€è®¾ç½®è®­ç»ƒç½‘ç»œå½“ä¸­çš„ä¸€äº›å‚æ•°</span><span class="token comment"># è®­ç»ƒçš„æ¬¡æ•°</span>total_train_step <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># æµ‹è¯•çš„æ¬¡æ•°</span>total_test_step <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># è®­ç»ƒçš„è½®æ•°</span>epoch <span class="token operator">=</span> <span class="token number">10</span><span class="token comment"># 8ã€å¾ªç¯è¿›è¡Œè®­ç»ƒ</span><span class="token comment"># åœ¨è®­ç»ƒçš„è¿‡ç¨‹å½“ä¸­æ·»åŠ tensorboard</span>writer <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token string">"./logs_train"</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>epoch<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ç¬¬ &#123;&#125; è½®è®­ç»ƒå¼€å§‹"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># è®­ç»ƒæ­¥éª¤å¼€å§‹</span>    <span class="token builtin">bin</span><span class="token punctuation">.</span>train<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> data <span class="token keyword">in</span> train_dataloader<span class="token punctuation">:</span>        imgs<span class="token punctuation">,</span> targets <span class="token operator">=</span> data        <span class="token keyword">if</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            imgs <span class="token operator">=</span> imgs<span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span>            targets <span class="token operator">=</span> targets<span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span>        output <span class="token operator">=</span> <span class="token builtin">bin</span><span class="token punctuation">(</span>imgs<span class="token punctuation">)</span>        loss <span class="token operator">=</span> loss_fn<span class="token punctuation">(</span>output<span class="token punctuation">,</span> targets<span class="token punctuation">)</span>        <span class="token comment"># ä¼˜åŒ–å™¨ä¼˜åŒ–æ¨¡å‹</span>        optimizer<span class="token punctuation">.</span>zero_grad<span class="token punctuation">(</span><span class="token punctuation">)</span>        loss<span class="token punctuation">.</span>backward<span class="token punctuation">(</span><span class="token punctuation">)</span>        optimizer<span class="token punctuation">.</span>step<span class="token punctuation">(</span><span class="token punctuation">)</span>        total_train_step <span class="token operator">=</span> total_train_step <span class="token operator">+</span> <span class="token number">1</span>        <span class="token keyword">if</span> total_train_step <span class="token operator">%</span> <span class="token number">100</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è®­ç»ƒæ¬¡æ•°: &#123;&#125; ï¼Œ loss: &#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>total_train_step<span class="token punctuation">,</span> loss<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment"># å°†è®­ç»ƒè¿‡ç¨‹å½“ä¸­çš„é¢lossæ·»åŠ åˆ°tensorboardä¸Š</span>            writer<span class="token punctuation">.</span>add_scalar<span class="token punctuation">(</span><span class="token string">"train_loss"</span><span class="token punctuation">,</span> loss<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> total_train_step<span class="token punctuation">)</span>    <span class="token comment"># æµ‹è¯•æ­¥éª¤å¼€å§‹</span>    <span class="token builtin">bin</span><span class="token punctuation">.</span><span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    total_test_loss <span class="token operator">=</span> <span class="token number">0</span>    total_accuracy <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment"># ä¸éœ€è¦è¿›è¡Œæ¢¯åº¦å¤„ç†</span>    <span class="token keyword">with</span> torch<span class="token punctuation">.</span>no_grad<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> data <span class="token keyword">in</span> test_dataloader<span class="token punctuation">:</span>            imgs<span class="token punctuation">,</span> targets <span class="token operator">=</span> data            <span class="token keyword">if</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                imgs <span class="token operator">=</span> imgs<span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span>                targets <span class="token operator">=</span> targets<span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span>            outputs <span class="token operator">=</span> <span class="token builtin">bin</span><span class="token punctuation">(</span>imgs<span class="token punctuation">)</span>            loss <span class="token operator">=</span> loss_fn<span class="token punctuation">(</span>outputs<span class="token punctuation">,</span> targets<span class="token punctuation">)</span>            total_test_loss <span class="token operator">=</span> total_test_loss <span class="token operator">+</span> loss<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span>            accuracy <span class="token operator">=</span> <span class="token punctuation">(</span>outputs<span class="token punctuation">.</span>argmax<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> targets<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            total_accuracy <span class="token operator">=</span> total_accuracy <span class="token operator">+</span> accuracy    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ•´ä½“æµ‹è¯•é›†ä¸Šçš„loss: &#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>total_test_loss<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ•´ä½“æµ‹è¯•é›†ä¸Šçš„æ­£ç¡®ç‡ï¼š &#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>total_accuracy<span class="token operator">/</span>test_data_size<span class="token punctuation">)</span><span class="token punctuation">)</span>    writer<span class="token punctuation">.</span>add_scalar<span class="token punctuation">(</span><span class="token string">"test_loss"</span><span class="token punctuation">,</span> total_test_loss<span class="token punctuation">,</span> total_test_step<span class="token punctuation">)</span>    writer<span class="token punctuation">.</span>add_scalar<span class="token punctuation">(</span><span class="token string">"test_accuracy"</span><span class="token punctuation">,</span> total_accuracy<span class="token operator">/</span>test_data_size<span class="token punctuation">,</span> total_test_step<span class="token punctuation">)</span>    total_test_step <span class="token operator">=</span> total_test_step <span class="token operator">+</span> <span class="token number">1</span>    <span class="token comment"># åœ¨è¿™é‡Œä¿å­˜æ¯ä¸€è½®è®­ç»ƒçš„ç»“æœ</span>    torch<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token builtin">bin</span><span class="token punctuation">,</span> <span class="token string">"bin_&#123;&#125;.pth"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ¨¡å‹å·²ä¿å­˜"</span><span class="token punctuation">)</span>writer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h4 id="ä¸€ã€ç¬¬äºŒç§æ–¹å¼ä½¿ç”¨GPUè®­ç»ƒæ¨¡å‹"><a class="header-anchor" href="#ä¸€ã€ç¬¬äºŒç§æ–¹å¼ä½¿ç”¨GPUè®­ç»ƒæ¨¡å‹">Â¶</a>ä¸€ã€ç¬¬äºŒç§æ–¹å¼ä½¿ç”¨GPUè®­ç»ƒæ¨¡å‹</h4><h5 id="æ–¹æ³•ï¼šæ·»åŠ "><a class="header-anchor" href="#æ–¹æ³•ï¼šæ·»åŠ ">Â¶</a>æ–¹æ³•ï¼šæ·»åŠ </h5><p>.to(device)<br>Device = torch.device(â€œcpuâ€)<br>Torch.device(â€œcudaâ€)<br>Torch.device(â€œcuda:0â€)<br>Torch.device(â€œcuda:1â€)</p><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">import</span> torchvision<span class="token keyword">import</span> time<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>tensorboard <span class="token keyword">import</span> SummaryWriter<span class="token comment"># 1ã€å‡†å¤‡æ•°æ®é›†(å‚æ•°å½“ä¸­éœ€è¦å°†å…¶è½¬æ¢ä¸ºtensorç±»å‹)</span><span class="token keyword">from</span> torch <span class="token keyword">import</span> nn<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> DataLoader<span class="token comment"># å®šä¹‰è®­ç»ƒçš„è®¾å¤‡</span><span class="token comment"># device = torch.device("cpu")</span><span class="token comment"># device = torch.device("cuda:0")</span><span class="token comment"># device = torch.device("cude" if torch.cuda.is_available() else "cpu") è¯­æ³•ç³–çš„æ ¼å¼</span>device <span class="token operator">=</span> torch<span class="token punctuation">.</span>device<span class="token punctuation">(</span><span class="token string">"cuda"</span><span class="token punctuation">)</span>train_data <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>CIFAR10<span class="token punctuation">(</span>root<span class="token operator">=</span><span class="token string">"./data"</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> transform<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                          download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>test_data <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>CIFAR10<span class="token punctuation">(</span>root<span class="token operator">=</span><span class="token string">"./data"</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> transform<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                         download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token comment"># 2ã€æŸ¥çœ‹è®­ç»ƒæ•°æ®é›† æµ‹è¯•æ•°æ®é›†çš„å¤§å°</span>train_data_size <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>train_data<span class="token punctuation">)</span>test_data_size <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>test_data<span class="token punctuation">)</span><span class="token comment"># ä¸‹é¢æ˜¯å­—ç¬¦ä¸²çš„æ›¿æ¢æ–¹æ³•</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è®­ç»ƒæ•°æ®é›†çš„å¤§å°ä¸ºï¼š&#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>train_data_size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æµ‹è¯•æ•°æ®é›†çš„å¤§å°ä¸ºï¼š&#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>test_data_size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># è®­ç»ƒæ•°æ®é›†çš„å¤§å°ä¸ºï¼š50000</span><span class="token comment"># æµ‹è¯•æ•°æ®é›†çš„å¤§å°ä¸ºï¼š10000</span><span class="token comment"># 3ã€ä½¿ç”¨DataLoaderåŠ è½½æ•°æ®é›†</span>train_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span>test_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>test_data<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token comment"># 4ã€å¼•å…¥æ­å»ºå¥½çš„ç¥ç»ç½‘ç»œï¼š model.py</span><span class="token comment"># ä½¿ç”¨äº† from model import *</span><span class="token keyword">class</span> <span class="token class-name">Bin</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>Bin<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>model <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">64</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>model<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token keyword">return</span> x<span class="token builtin">bin</span> <span class="token operator">=</span> Bin<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å°†ç½‘ç»œæ¨¡å‹è½¬ç§»åˆ°è®¾å¤‡ä¸Šå»</span><span class="token builtin">bin</span> <span class="token operator">=</span> <span class="token builtin">bin</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token comment"># 5ã€æ„å»ºæŸå¤±å‡½æ•°</span>loss_fn <span class="token operator">=</span> nn<span class="token punctuation">.</span>CrossEntropyLoss<span class="token punctuation">(</span><span class="token punctuation">)</span>loss_fn <span class="token operator">=</span> loss_fn<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token comment"># 6ã€æ„å»ºä¼˜åŒ–å™¨</span><span class="token comment"># å­¦ä¹ é€Ÿç‡</span><span class="token comment"># learning_rate = 0.01</span><span class="token comment"># ä¹Ÿæœ‰ä¸‹é¢çš„å†™æ³•</span><span class="token comment"># 1e-2 = (10) ^ (-2) = 0.01</span>learning_rate <span class="token operator">=</span> <span class="token number">1e-2</span>optimizer <span class="token operator">=</span> torch<span class="token punctuation">.</span>optim<span class="token punctuation">.</span>SGD<span class="token punctuation">(</span><span class="token builtin">bin</span><span class="token punctuation">.</span>parameters<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lr<span class="token operator">=</span>learning_rate<span class="token punctuation">)</span><span class="token comment"># 7ã€è®¾ç½®è®­ç»ƒç½‘ç»œå½“ä¸­çš„ä¸€äº›å‚æ•°</span><span class="token comment"># è®­ç»ƒçš„æ¬¡æ•°</span>total_train_step <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># æµ‹è¯•çš„æ¬¡æ•°</span>total_test_step <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># è®­ç»ƒçš„è½®æ•°</span>epoch <span class="token operator">=</span> <span class="token number">10</span><span class="token comment"># 8ã€å¾ªç¯è¿›è¡Œè®­ç»ƒ</span><span class="token comment"># åœ¨è®­ç»ƒçš„è¿‡ç¨‹å½“ä¸­æ·»åŠ tensorboard</span>writer <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token string">"./logs_train"</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>epoch<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ç¬¬ &#123;&#125; è½®è®­ç»ƒå¼€å§‹"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># è®­ç»ƒæ­¥éª¤å¼€å§‹</span>    <span class="token builtin">bin</span><span class="token punctuation">.</span>train<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> data <span class="token keyword">in</span> train_dataloader<span class="token punctuation">:</span>        imgs<span class="token punctuation">,</span> targets <span class="token operator">=</span> data        imgs <span class="token operator">=</span> imgs<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>        targets <span class="token operator">=</span> targets<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>        output <span class="token operator">=</span> <span class="token builtin">bin</span><span class="token punctuation">(</span>imgs<span class="token punctuation">)</span>        loss <span class="token operator">=</span> loss_fn<span class="token punctuation">(</span>output<span class="token punctuation">,</span> targets<span class="token punctuation">)</span>        <span class="token comment"># ä¼˜åŒ–å™¨ä¼˜åŒ–æ¨¡å‹</span>        optimizer<span class="token punctuation">.</span>zero_grad<span class="token punctuation">(</span><span class="token punctuation">)</span>        loss<span class="token punctuation">.</span>backward<span class="token punctuation">(</span><span class="token punctuation">)</span>        optimizer<span class="token punctuation">.</span>step<span class="token punctuation">(</span><span class="token punctuation">)</span>        total_train_step <span class="token operator">=</span> total_train_step <span class="token operator">+</span> <span class="token number">1</span>        <span class="token keyword">if</span> total_train_step <span class="token operator">%</span> <span class="token number">100</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è®­ç»ƒæ¬¡æ•°: &#123;&#125; ï¼Œ loss: &#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>total_train_step<span class="token punctuation">,</span> loss<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment"># å°†è®­ç»ƒè¿‡ç¨‹å½“ä¸­çš„é¢lossæ·»åŠ åˆ°tensorboardä¸Š</span>            writer<span class="token punctuation">.</span>add_scalar<span class="token punctuation">(</span><span class="token string">"train_loss"</span><span class="token punctuation">,</span> loss<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> total_train_step<span class="token punctuation">)</span>    <span class="token comment"># æµ‹è¯•æ­¥éª¤å¼€å§‹</span>    <span class="token builtin">bin</span><span class="token punctuation">.</span><span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    total_test_loss <span class="token operator">=</span> <span class="token number">0</span>    total_accuracy <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment"># ä¸éœ€è¦è¿›è¡Œæ¢¯åº¦å¤„ç†</span>    <span class="token keyword">with</span> torch<span class="token punctuation">.</span>no_grad<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> data <span class="token keyword">in</span> test_dataloader<span class="token punctuation">:</span>            imgs<span class="token punctuation">,</span> targets <span class="token operator">=</span> data            imgs <span class="token operator">=</span> imgs<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>            targets <span class="token operator">=</span> targets<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>            outputs <span class="token operator">=</span> <span class="token builtin">bin</span><span class="token punctuation">(</span>imgs<span class="token punctuation">)</span>            loss <span class="token operator">=</span> loss_fn<span class="token punctuation">(</span>outputs<span class="token punctuation">,</span> targets<span class="token punctuation">)</span>            total_test_loss <span class="token operator">=</span> total_test_loss <span class="token operator">+</span> loss<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span>            accuracy <span class="token operator">=</span> <span class="token punctuation">(</span>outputs<span class="token punctuation">.</span>argmax<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> targets<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            total_accuracy <span class="token operator">=</span> total_accuracy <span class="token operator">+</span> accuracy    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ•´ä½“æµ‹è¯•é›†ä¸Šçš„loss: &#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>total_test_loss<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ•´ä½“æµ‹è¯•é›†ä¸Šçš„æ­£ç¡®ç‡ï¼š &#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>total_accuracy<span class="token operator">/</span>test_data_size<span class="token punctuation">)</span><span class="token punctuation">)</span>    writer<span class="token punctuation">.</span>add_scalar<span class="token punctuation">(</span><span class="token string">"test_loss"</span><span class="token punctuation">,</span> total_test_loss<span class="token punctuation">,</span> total_test_step<span class="token punctuation">)</span>    writer<span class="token punctuation">.</span>add_scalar<span class="token punctuation">(</span><span class="token string">"test_accuracy"</span><span class="token punctuation">,</span> total_accuracy<span class="token operator">/</span>test_data_size<span class="token punctuation">,</span> total_test_step<span class="token punctuation">)</span>    total_test_step <span class="token operator">=</span> total_test_step <span class="token operator">+</span> <span class="token number">1</span>    <span class="token comment"># åœ¨è¿™é‡Œä¿å­˜æ¯ä¸€è½®è®­ç»ƒçš„ç»“æœ</span>    torch<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token builtin">bin</span><span class="token punctuation">,</span> <span class="token string">"bin_&#123;&#125;.pth"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ¨¡å‹å·²ä¿å­˜"</span><span class="token punctuation">)</span>writer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></font>]]></content>
      
      
      <categories>
          
          <category> Pytorch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
            <tag> ç½‘ç»œæ¨¡å‹ </tag>
            
            <tag> æ¨¡å‹è®­ç»ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pytorchå­¦ä¹ 6-å®Œæ•´çš„æ¨¡å‹è®­ç»ƒå¡”è·¯</title>
      <link href="/2022/110816120.html"/>
      <url>/2022/110816120.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h3 id="ä¸€ã€æ¨¡å‹çš„ä½¿ç”¨"><a class="header-anchor" href="#ä¸€ã€æ¨¡å‹çš„ä½¿ç”¨">Â¶</a>ä¸€ã€æ¨¡å‹çš„ä½¿ç”¨</h3><p>é¦–å…ˆåˆ›å»ºæ¨¡å‹çš„pyæ–‡ä»¶</p><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">from</span> torch <span class="token keyword">import</span> nn<span class="token comment"># æ­å»ºç¥ç»ç½‘ç»œ</span><span class="token keyword">class</span> <span class="token class-name">Bin</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>Bin<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>model <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">64</span><span class="token operator">*</span><span class="token number">4</span><span class="token operator">*</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>model<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token keyword">return</span> x<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    <span class="token builtin">bin</span> <span class="token operator">=</span> Bin<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token builtin">input</span> <span class="token operator">=</span> torch<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    output <span class="token operator">=</span> <span class="token builtin">bin</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>output<span class="token punctuation">.</span>shape<span class="token punctuation">)</span></code></pre><h5 id="ä¸€å¥—å®Œæ•´çš„æ¨¡å‹è®­ç»ƒè¿‡ç¨‹"><a class="header-anchor" href="#ä¸€å¥—å®Œæ•´çš„æ¨¡å‹è®­ç»ƒè¿‡ç¨‹">Â¶</a>ä¸€å¥—å®Œæ•´çš„æ¨¡å‹è®­ç»ƒè¿‡ç¨‹</h5><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">import</span> torchvision<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>tensorboard <span class="token keyword">import</span> SummaryWriter<span class="token keyword">from</span> model <span class="token keyword">import</span> <span class="token operator">*</span><span class="token comment"># 1ã€å‡†å¤‡æ•°æ®é›†(å‚æ•°å½“ä¸­éœ€è¦å°†å…¶è½¬æ¢ä¸ºtensorç±»å‹)</span><span class="token keyword">from</span> torch <span class="token keyword">import</span> nn<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> DataLoadertrain_data <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>CIFAR10<span class="token punctuation">(</span>root<span class="token operator">=</span><span class="token string">"./data"</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> transform<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                          download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>test_data <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>CIFAR10<span class="token punctuation">(</span>root<span class="token operator">=</span><span class="token string">"./data"</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> transform<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                         download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token comment"># 2ã€æŸ¥çœ‹è®­ç»ƒæ•°æ®é›† æµ‹è¯•æ•°æ®é›†çš„å¤§å°</span>train_data_size <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>train_data<span class="token punctuation">)</span>test_data_size <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>test_data<span class="token punctuation">)</span><span class="token comment"># ä¸‹é¢æ˜¯å­—ç¬¦ä¸²çš„æ›¿æ¢æ–¹æ³•</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è®­ç»ƒæ•°æ®é›†çš„å¤§å°ä¸ºï¼š&#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>train_data_size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æµ‹è¯•æ•°æ®é›†çš„å¤§å°ä¸ºï¼š&#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>test_data_size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># è®­ç»ƒæ•°æ®é›†çš„å¤§å°ä¸ºï¼š50000</span><span class="token comment"># æµ‹è¯•æ•°æ®é›†çš„å¤§å°ä¸ºï¼š10000</span><span class="token comment"># 3ã€ä½¿ç”¨DataLoaderåŠ è½½æ•°æ®é›†</span>train_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span>test_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>test_data<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token comment"># 4ã€å¼•å…¥æ­å»ºå¥½çš„ç¥ç»ç½‘ç»œï¼š model.py</span><span class="token comment"># ä½¿ç”¨äº† from model import *</span><span class="token builtin">bin</span> <span class="token operator">=</span> Bin<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># 5ã€æ„å»ºæŸå¤±å‡½æ•°</span>loss_fn <span class="token operator">=</span> nn<span class="token punctuation">.</span>CrossEntropyLoss<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># 6ã€æ„å»ºä¼˜åŒ–å™¨</span><span class="token comment"># å­¦ä¹ é€Ÿç‡</span><span class="token comment"># learning_rate = 0.01</span><span class="token comment"># ä¹Ÿæœ‰ä¸‹é¢çš„å†™æ³•</span><span class="token comment"># 1e-2 = (10) ^ (-2) = 0.01</span>learning_rate <span class="token operator">=</span> <span class="token number">1e-2</span>optimizer <span class="token operator">=</span> torch<span class="token punctuation">.</span>optim<span class="token punctuation">.</span>SGD<span class="token punctuation">(</span><span class="token builtin">bin</span><span class="token punctuation">.</span>parameters<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lr<span class="token operator">=</span>learning_rate<span class="token punctuation">)</span><span class="token comment"># 7ã€è®¾ç½®è®­ç»ƒç½‘ç»œå½“ä¸­çš„ä¸€äº›å‚æ•°</span><span class="token comment"># è®­ç»ƒçš„æ¬¡æ•°</span>total_train_step <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># æµ‹è¯•çš„æ¬¡æ•°</span>total_test_step <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># è®­ç»ƒçš„è½®æ•°</span>epoch <span class="token operator">=</span> <span class="token number">10</span><span class="token comment"># 8ã€å¾ªç¯è¿›è¡Œè®­ç»ƒ</span><span class="token comment"># åœ¨è®­ç»ƒçš„è¿‡ç¨‹å½“ä¸­æ·»åŠ tensorboard</span>writer <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token string">"./logs_train"</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>epoch<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ç¬¬ &#123;&#125; è½®è®­ç»ƒå¼€å§‹"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># è®­ç»ƒæ­¥éª¤å¼€å§‹</span>    <span class="token builtin">bin</span><span class="token punctuation">.</span>train<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> data <span class="token keyword">in</span> train_dataloader<span class="token punctuation">:</span>        imgs<span class="token punctuation">,</span> targets <span class="token operator">=</span> data        output <span class="token operator">=</span> <span class="token builtin">bin</span><span class="token punctuation">(</span>imgs<span class="token punctuation">)</span>        loss <span class="token operator">=</span> loss_fn<span class="token punctuation">(</span>output<span class="token punctuation">,</span> targets<span class="token punctuation">)</span>        <span class="token comment"># ä¼˜åŒ–å™¨ä¼˜åŒ–æ¨¡å‹</span>        optimizer<span class="token punctuation">.</span>zero_grad<span class="token punctuation">(</span><span class="token punctuation">)</span>        loss<span class="token punctuation">.</span>backward<span class="token punctuation">(</span><span class="token punctuation">)</span>        optimizer<span class="token punctuation">.</span>step<span class="token punctuation">(</span><span class="token punctuation">)</span>        total_train_step <span class="token operator">=</span> total_train_step <span class="token operator">+</span> <span class="token number">1</span>        <span class="token keyword">if</span> total_train_step <span class="token operator">%</span> <span class="token number">100</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è®­ç»ƒæ¬¡æ•°: &#123;&#125; ï¼Œ loss: &#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>total_train_step<span class="token punctuation">,</span> loss<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment"># å°†è®­ç»ƒè¿‡ç¨‹å½“ä¸­çš„é¢lossæ·»åŠ åˆ°tensorboardä¸Š</span>            writer<span class="token punctuation">.</span>add_scalar<span class="token punctuation">(</span><span class="token string">"train_loss"</span><span class="token punctuation">,</span> loss<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> total_train_step<span class="token punctuation">)</span>    <span class="token comment"># æµ‹è¯•æ­¥éª¤å¼€å§‹</span>    <span class="token builtin">bin</span><span class="token punctuation">.</span><span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    total_test_loss <span class="token operator">=</span> <span class="token number">0</span>    total_accuracy <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment"># ä¸éœ€è¦è¿›è¡Œæ¢¯åº¦å¤„ç†</span>    <span class="token keyword">with</span> torch<span class="token punctuation">.</span>no_grad<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> data <span class="token keyword">in</span> test_dataloader<span class="token punctuation">:</span>            imgs<span class="token punctuation">,</span> targets <span class="token operator">=</span> data            outputs <span class="token operator">=</span> <span class="token builtin">bin</span><span class="token punctuation">(</span>imgs<span class="token punctuation">)</span>            loss <span class="token operator">=</span> loss_fn<span class="token punctuation">(</span>outputs<span class="token punctuation">,</span> targets<span class="token punctuation">)</span>            total_test_loss <span class="token operator">=</span> total_test_loss <span class="token operator">+</span> loss<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span>            accuracy <span class="token operator">=</span> <span class="token punctuation">(</span>outputs<span class="token punctuation">.</span>argmax<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> targets<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            total_accuracy <span class="token operator">=</span> total_accuracy <span class="token operator">+</span> accuracy    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ•´ä½“æµ‹è¯•é›†ä¸Šçš„loss: &#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>total_test_loss<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ•´ä½“æµ‹è¯•é›†ä¸Šçš„æ­£ç¡®ç‡ï¼š &#123;&#125;"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>total_accuracy<span class="token operator">/</span>test_data_size<span class="token punctuation">)</span><span class="token punctuation">)</span>    writer<span class="token punctuation">.</span>add_scalar<span class="token punctuation">(</span><span class="token string">"test_loss"</span><span class="token punctuation">,</span> total_test_loss<span class="token punctuation">,</span> total_test_step<span class="token punctuation">)</span>    writer<span class="token punctuation">.</span>add_scalar<span class="token punctuation">(</span><span class="token string">"test_accuracy"</span><span class="token punctuation">,</span> total_accuracy<span class="token operator">/</span>test_data_size<span class="token punctuation">,</span> total_test_step<span class="token punctuation">)</span>    total_test_step <span class="token operator">=</span> total_test_step <span class="token operator">+</span> <span class="token number">1</span>    <span class="token comment"># åœ¨è¿™é‡Œä¿å­˜æ¯ä¸€è½®è®­ç»ƒçš„ç»“æœ</span>    torch<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token builtin">bin</span><span class="token punctuation">,</span> <span class="token string">"bin_&#123;&#125;.pth"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ¨¡å‹å·²ä¿å­˜"</span><span class="token punctuation">)</span>writer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h5 id="åœ¨tensorboardä¸Šçš„æ•ˆæœå¦‚å›¾"><a class="header-anchor" href="#åœ¨tensorboardä¸Šçš„æ•ˆæœå¦‚å›¾">Â¶</a>åœ¨tensorboardä¸Šçš„æ•ˆæœå¦‚å›¾</h5><p><img src="/2022/110816120/%E5%AE%8C%E6%95%B4%E7%9A%84%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E6%B5%81%E7%A8%8B.png" alt></p></font>]]></content>
      
      
      <categories>
          
          <category> Pytorch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
            <tag> ç½‘ç»œæ¨¡å‹ </tag>
            
            <tag> æ¨¡å‹è®­ç»ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pytorchå­¦ä¹ 5-ç°æœ‰æ¨¡å‹çš„ä¿®æ”¹</title>
      <link href="/2022/110816119.html"/>
      <url>/2022/110816119.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h3 id="ä¸€ã€æ¨¡å‹çš„ä½¿ç”¨"><a class="header-anchor" href="#ä¸€ã€æ¨¡å‹çš„ä½¿ç”¨">Â¶</a>ä¸€ã€æ¨¡å‹çš„ä½¿ç”¨</h3><h5 id="æŸ¥çœ‹vgg16çš„æ¨¡å‹ç»“æ„"><a class="header-anchor" href="#æŸ¥çœ‹vgg16çš„æ¨¡å‹ç»“æ„">Â¶</a>æŸ¥çœ‹vgg16çš„æ¨¡å‹ç»“æ„</h5><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torchvision<span class="token comment"># train_data = torchvision.dataset.ImageNet("./data_image_net", split='train', download=True,</span><span class="token comment">#                                           transform=torchvision.transforms.ToTensor())</span><span class="token keyword">from</span> torch <span class="token keyword">import</span> nnvgg16_false <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>models<span class="token punctuation">.</span>vgg16<span class="token punctuation">(</span>pretrained<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>vgg16_true <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>models<span class="token punctuation">.</span>vgg16<span class="token punctuation">(</span>pretrained<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token comment"># vgg16æ˜¯å·²ç»è®­ç»ƒå¥½äº†ç½‘ç»œæ¨¡å‹æ¶æ„ï¼Œç›¸æ¯”äºnn_moduleæ–‡ä»¶å½“ä¸­çš„æ¨¡å‹æ¶æ„ï¼Œä»–æœ¬èº«å·²ç»å°è£…äº†æ¨¡å‹çš„ç»“æ„</span><span class="token keyword">print</span><span class="token punctuation">(</span>vgg16_true<span class="token punctuation">)</span><span class="token comment"># æ‰“å°è¾“å‡ºVGGçš„æ¨¡å‹ç»“æ„</span><span class="token comment"># VGG(</span><span class="token comment">#   (features): Sequential(</span><span class="token comment">#     (0): Conv2d(3, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (1): ReLU(inplace=True)</span><span class="token comment">#     (2): Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (3): ReLU(inplace=True)</span><span class="token comment">#     (4): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)</span><span class="token comment">#     (5): Conv2d(64, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (6): ReLU(inplace=True)</span><span class="token comment">#     (7): Conv2d(128, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (8): ReLU(inplace=True)</span><span class="token comment">#     (9): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)</span><span class="token comment">#     (10): Conv2d(128, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (11): ReLU(inplace=True)</span><span class="token comment">#     (12): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (13): ReLU(inplace=True)</span><span class="token comment">#     (14): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (15): ReLU(inplace=True)</span><span class="token comment">#     (16): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)</span><span class="token comment">#     (17): Conv2d(256, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (18): ReLU(inplace=True)</span><span class="token comment">#     (19): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (20): ReLU(inplace=True)</span><span class="token comment">#     (21): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (22): ReLU(inplace=True)</span><span class="token comment">#     (23): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)</span><span class="token comment">#     (24): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (25): ReLU(inplace=True)</span><span class="token comment">#     (26): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (27): ReLU(inplace=True)</span><span class="token comment">#     (28): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (29): ReLU(inplace=True)</span><span class="token comment">#     (30): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)</span><span class="token comment">#   )</span><span class="token comment">#   (avgpool): AdaptiveAvgPool2d(output_size=(7, 7))</span><span class="token comment">#   (classifier): Sequential(</span><span class="token comment">#     (0): Linear(in_features=25088, out_features=4096, bias=True)</span><span class="token comment">#     (1): ReLU(inplace=True)</span><span class="token comment">#     (2): Dropout(p=0.5, inplace=False)</span><span class="token comment">#     (3): Linear(in_features=4096, out_features=4096, bias=True)</span><span class="token comment">#     (4): ReLU(inplace=True)</span><span class="token comment">#     (5): Dropout(p=0.5, inplace=False)</span><span class="token comment">#     (6): Linear(in_features=4096, out_features=1000, bias=True)</span><span class="token comment">#   )</span><span class="token comment"># )</span>train_data <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>CIFAR10<span class="token punctuation">(</span><span class="token string">"./data"</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                                          transform<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                          download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token comment"># å¯¹vgg16ç½‘ç»œæ¨¡å‹è¿›è¡Œä¿®æ”¹</span>vgg16_true<span class="token punctuation">.</span>add_module<span class="token punctuation">(</span><span class="token string">"add_linear"</span><span class="token punctuation">,</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>vgg16_true<span class="token punctuation">.</span>classifier<span class="token punctuation">.</span>add_module<span class="token punctuation">(</span><span class="token string">"add_linear"</span><span class="token punctuation">,</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>vgg16_true<span class="token punctuation">)</span><span class="token comment"># VGG(</span><span class="token comment">#   (features): Sequential(</span><span class="token comment">#     (0): Conv2d(3, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (1): ReLU(inplace=True)</span><span class="token comment">#     (2): Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (3): ReLU(inplace=True)</span><span class="token comment">#     (4): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)</span><span class="token comment">#     (5): Conv2d(64, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (6): ReLU(inplace=True)</span><span class="token comment">#     (7): Conv2d(128, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (8): ReLU(inplace=True)</span><span class="token comment">#     (9): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)</span><span class="token comment">#     (10): Conv2d(128, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (11): ReLU(inplace=True)</span><span class="token comment">#     (12): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (13): ReLU(inplace=True)</span><span class="token comment">#     (14): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (15): ReLU(inplace=True)</span><span class="token comment">#     (16): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)</span><span class="token comment">#     (17): Conv2d(256, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (18): ReLU(inplace=True)</span><span class="token comment">#     (19): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (20): ReLU(inplace=True)</span><span class="token comment">#     (21): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (22): ReLU(inplace=True)</span><span class="token comment">#     (23): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)</span><span class="token comment">#     (24): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (25): ReLU(inplace=True)</span><span class="token comment">#     (26): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (27): ReLU(inplace=True)</span><span class="token comment">#     (28): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))</span><span class="token comment">#     (29): ReLU(inplace=True)</span><span class="token comment">#     (30): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)</span><span class="token comment">#   )</span><span class="token comment">#   (avgpool): AdaptiveAvgPool2d(output_size=(7, 7))</span><span class="token comment">#   (classifier): Sequential(</span><span class="token comment">#     (0): Linear(in_features=25088, out_features=4096, bias=True)</span><span class="token comment">#     (1): ReLU(inplace=True)</span><span class="token comment">#     (2): Dropout(p=0.5, inplace=False)</span><span class="token comment">#     (3): Linear(in_features=4096, out_features=4096, bias=True)</span><span class="token comment">#     (4): ReLU(inplace=True)</span><span class="token comment">#     (5): Dropout(p=0.5, inplace=False)</span><span class="token comment">#     (6): Linear(in_features=4096, out_features=1000, bias=True)</span><span class="token comment"># åœ¨åŸæœ‰æ¨¡å‹çš„åŸºç¡€ä¸Šæ·»åŠ çš„æ­¥éª¤</span><span class="token comment">#     (add_linear): Linear(in_features=1000, out_features=10, bias=True)</span><span class="token comment">#   )</span><span class="token comment"># åœ¨åŸæœ‰æ¨¡å‹çš„åŸºç¡€ä¸Šæ·»åŠ çš„æ­¥éª¤</span><span class="token comment">#   (add_linear): Linear(in_features=1000, out_features=10, bias=True)</span><span class="token comment"># )</span></code></pre><h3 id="äºŒã€æ¨¡å‹çš„ä¿å­˜ä¸åŠ è½½"><a class="header-anchor" href="#äºŒã€æ¨¡å‹çš„ä¿å­˜ä¸åŠ è½½">Â¶</a>äºŒã€æ¨¡å‹çš„ä¿å­˜ä¸åŠ è½½</h3><pre class="language-python" data-language="python"><code class="language-python"><span class="token comment">################################## æ¨¡å‹çš„ä¿å­˜ #################################</span><span class="token keyword">import</span> torch<span class="token keyword">import</span> torchvisionvgg16 <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>models<span class="token punctuation">.</span>vgg16<span class="token punctuation">(</span>pretrained<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token comment"># ä¿å­˜çš„æ–¹å¼1</span><span class="token comment"># ç›´æ¥ä¿å­˜åˆ°å½“å‰ç›®å½•ä¸‹ï¼Œä¿å­˜çš„æœ‰æ¨¡å‹çš„ç»“æ„/å‚æ•°/</span><span class="token comment"># ç„¶ååœ¨model_save_loadå½“ä¸­è¿›è¡Œæ¨¡å‹çš„åŠ è½½</span>torch<span class="token punctuation">.</span>save<span class="token punctuation">(</span>vgg16<span class="token punctuation">,</span> <span class="token string">"vgg16_method1.pth"</span><span class="token punctuation">)</span><span class="token comment"># ä¿å­˜æ–¹å¼2</span><span class="token comment"># ä¿ç•™äº†æ¨¡å‹çš„å‚æ•°åˆ°å­—å…¸å½“ä¸­ï¼ˆå®˜ç½‘æ¨èï¼‰</span>torch<span class="token punctuation">.</span>save<span class="token punctuation">(</span>vgg16<span class="token punctuation">.</span>state_dict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"vgg16_method2.pth"</span><span class="token punctuation">)</span><span class="token comment">################################## æ¨¡å‹çš„åŠ è½½###################################</span><span class="token keyword">import</span> torch<span class="token comment"># æ–¹å¼1-->æ¨¡å‹çš„åŠ è½½</span><span class="token keyword">import</span> torchvisionmodel <span class="token operator">=</span> torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">"vgg16_method1.pth"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token comment"># æ–¹å¼2</span>vgg16 <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>models<span class="token punctuation">.</span>vgg16<span class="token punctuation">(</span>pretrained<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>vgg16<span class="token punctuation">.</span>load_state_dict<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">"vgg_method2.pth"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>vgg16<span class="token punctuation">)</span></code></pre></font>]]></content>
      
      
      <categories>
          
          <category> Pytorch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
            <tag> ç½‘ç»œæ¨¡å‹ </tag>
            
            <tag> VGG </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pytorchå­¦ä¹ 3-ç¥ç»ç½‘ç»œçš„æ­å»º</title>
      <link href="/2022/110716118.html"/>
      <url>/2022/110716118.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h4 id="ä¸€ã€ç›¸å…³åœ°å€"><a class="header-anchor" href="#ä¸€ã€ç›¸å…³åœ°å€">Â¶</a>ä¸€ã€ç›¸å…³åœ°å€</h4><h5 id="ç¥ç»ç½‘ç»œNN-Neural-Network"><a class="header-anchor" href="#ç¥ç»ç½‘ç»œNN-Neural-Network">Â¶</a>ç¥ç»ç½‘ç»œNN[Neural Network]</h5><p><a href="https://pytorch.org/docs/stable/nn.html">PyTorchçš„nn Api</a></p><h4 id="äºŒã€torch-nn-Module-å¯¹æ‰€æœ‰çš„ç¥ç»ç½‘ç»œæ„æˆæœ€åŸºæœ¬çš„ç±»"><a class="header-anchor" href="#äºŒã€torch-nn-Module-å¯¹æ‰€æœ‰çš„ç¥ç»ç½‘ç»œæ„æˆæœ€åŸºæœ¬çš„ç±»">Â¶</a>äºŒã€torch.nn.Module å¯¹æ‰€æœ‰çš„ç¥ç»ç½‘ç»œæ„æˆæœ€åŸºæœ¬çš„ç±»</h4><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>functional <span class="token keyword">as</span> F<span class="token keyword">class</span> <span class="token class-name">Model</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>conv1 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>conv2 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        x <span class="token operator">=</span> F<span class="token punctuation">.</span>relu<span class="token punctuation">(</span>self<span class="token punctuation">.</span>conv1<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> F<span class="token punctuation">.</span>relu<span class="token punctuation">(</span>self<span class="token punctuation">.</span>conv2<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>ä¸Šè¿°ä»£ç å½“ä¸­çš„ç¥ç»ç½‘ç»œåŒ…æ‹¬ä¸¤ä¸ªè¿‡ç¨‹ï¼šforwardå‡½æ•°å¯¹xé¦–å…ˆè¿›è¡Œå·ç§¯1ï¼Œå·ç§¯1çš„å¤„ç†è¿‡ç¨‹åœ¨__init__å‡½æ•°å½“ä¸­å®šä¹‰nn.Conv2d(1, 20, 5)ï¼Œç„¶åå¯¹å…¶è¿›è¡Œéçº¿æ€§çš„å¤„ç†reluï¼Œå†æ¥ä¸€æ¬¡å·ç§¯2å’Œéçº¿æ€§reluï¼Œæœ€åè¿”å›ç»“æœã€‚</p><p><img src="/2022/110716118/forward%E5%87%BD%E6%95%B0%E4%BD%9C%E7%94%A8.png" alt></p><h4 id="ä¸‰ã€å·ç§¯æ“ä½œ"><a class="header-anchor" href="#ä¸‰ã€å·ç§¯æ“ä½œ">Â¶</a>ä¸‰ã€å·ç§¯æ“ä½œ</h4><p><img src="/2022/110716118/%E5%8D%B7%E7%A7%AF%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt></p><pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># å¯ä»¥æ‰‹åŠ¨ç®—ä¸€ç®—</span><span class="token keyword">import</span> torch<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>functional <span class="token keyword">as</span> F<span class="token builtin">input</span> <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                      <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                      <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                      <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                      <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>kernel <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                       <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                       <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>kernel<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token comment"># torch.Size([5, 5])</span><span class="token comment"># torch.Size([3, 3])</span><span class="token comment"># è¿›è¡Œå˜æ¢ä¸ºå››ç»´çš„çŸ©é˜µ</span><span class="token builtin">input</span> <span class="token operator">=</span> torch<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>kernel <span class="token operator">=</span> torch<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>kernel<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>kernel<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span class="token comment"># torch.Size([1, 1, 5, 5])</span><span class="token comment"># torch.Size([1, 1, 3, 3])</span><span class="token comment"># conv2dï¼šè¡¨ç¤º2ç»´å·ç§¯     conv3dï¼šè¡¨ç¤º3ç»´å·ç§¯</span><span class="token comment"># conv2dè¡¨ç¤ºè¿›è¡Œå·ç§¯æ“ä½œ strideä¸ºæ­¥è¿›å€¼</span>output <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">,</span> kernel<span class="token punctuation">,</span> stride<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token comment"># tensor([[[[10, 12, 12],</span><span class="token comment">#           [18, 16, 16],</span><span class="token comment">#           [13,  9,  3]]]])</span>output2 <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">,</span> kernel<span class="token punctuation">,</span> stride<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>output2<span class="token punctuation">)</span><span class="token comment"># tensor([[[[10, 12],</span><span class="token comment">#           [13,  3]]]])</span><span class="token comment"># padding è¡¨ç¤ºåœ¨è¾“å…¥çŸ©é˜µçš„å¤–å›´å¡«å……ä¸€åœˆ,é»˜è®¤å¡«å……çš„æ˜¯0</span>output3 <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">,</span> kernel<span class="token punctuation">,</span> stride<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>output3<span class="token punctuation">)</span><span class="token comment"># tensor([[[[ 1,  3,  4, 10,  8],</span><span class="token comment">#           [ 5, 10, 12, 12,  6],</span><span class="token comment">#           [ 7, 18, 16, 16,  8],</span><span class="token comment">#           [11, 13,  9,  3,  4],</span><span class="token comment">#           [14, 13,  9,  7,  4]]]])</span></code></pre><p><img src="/2022/110716118/%E5%8D%B7%E7%A7%AF%E6%93%8D%E4%BD%9C1.png" alt></p><p><a href="https://github.com/vdumoulin/conv_arithmetic/blob/master/README.md">å®˜ç½‘ä¸Šçš„å·ç§¯æµç¨‹</a></p><p>å·ç§¯æµç¨‹å¦‚ä¸‹ï¼š<br><img src="/2022/110716118/%E5%8D%B7%E7%A7%AF%E5%8A%A8%E7%94%BB.png" alt></p><p><img src="/2022/110716118/%E5%8D%B7%E7%A7%AF%E5%8F%82%E6%95%B0.png" alt></p><h4 id="å››ã€å·ç§¯æ•°æ®é›†"><a class="header-anchor" href="#å››ã€å·ç§¯æ•°æ®é›†">Â¶</a>å››ã€å·ç§¯æ•°æ®é›†</h4><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">import</span> torchvision<span class="token keyword">from</span> torch <span class="token keyword">import</span> nn<span class="token keyword">from</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">import</span> Conv2d<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> DataLoader<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>tensorboard <span class="token keyword">import</span> SummaryWriterdataset <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>CIFAR10<span class="token punctuation">(</span><span class="token string">"./data"</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> transform<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>dataset<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">BinConv2d</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>BinConv2d<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>conv1 <span class="token operator">=</span> Conv2d<span class="token punctuation">(</span>in_channels<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> out_channels<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> stride<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>conv1<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token keyword">return</span> xbinConv2d <span class="token operator">=</span> BinConv2d<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>binConv2d<span class="token punctuation">)</span>step <span class="token operator">=</span> <span class="token number">0</span>writer <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token string">"logs"</span><span class="token punctuation">)</span><span class="token keyword">for</span> data <span class="token keyword">in</span> dataloader<span class="token punctuation">:</span>    imgs<span class="token punctuation">,</span> targets <span class="token operator">=</span> data    output <span class="token operator">=</span> binConv2d<span class="token punctuation">(</span>imgs<span class="token punctuation">)</span>    <span class="token comment"># å°†å›¾åƒæ”¾å…¥åˆ°å®šä¹‰å¥½çš„å·ç§¯å¤„ç†æµç¨‹å½“ä¸­è¿›è¡Œå¤„ç†</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>imgs<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>targets<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>    <span class="token comment"># torch.Size([64, 3, 32, 32])</span>    writer<span class="token punctuation">.</span>add_images<span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">,</span> imgs<span class="token punctuation">,</span> step<span class="token punctuation">)</span>    <span class="token comment"># torch.Size([64, 6, 30, 30]) -> [xxx, 3, 30, 30]</span>    <span class="token comment"># åŸå§‹çš„outputæ ¼å¼torch.Size([64, 6, 30, 30])ï¼Œä½†æ˜¯éœ€è¦è½¬åŒ–ä¸º[xxx, 3, 30, 30]</span>    output <span class="token operator">=</span> torch<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>output<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    writer<span class="token punctuation">.</span>add_images<span class="token punctuation">(</span><span class="token string">"output"</span><span class="token punctuation">,</span> output<span class="token punctuation">,</span> step<span class="token punctuation">)</span>    step <span class="token operator">=</span> step <span class="token operator">+</span> <span class="token number">1</span>writer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>å·ç§¯åçš„æ•ˆæœå›¾ï¼š<br><img src="/2022/110716118/%E5%8D%B7%E7%A7%AF%E5%90%8E%E7%9A%84tensorboard.png" alt></p><h4 id="äº”ã€æ± åŒ–å±‚Pooling-layers"><a class="header-anchor" href="#äº”ã€æ± åŒ–å±‚Pooling-layers">Â¶</a>äº”ã€æ± åŒ–å±‚Pooling layers</h4><p>maxpooling: æœ€å¤§æ± åŒ–çš„ä½œç”¨ï¼šä¿ç•™åŸå§‹çš„ç‰¹å¾çš„åŒæ—¶ï¼Œä¹Ÿéœ€è¦é™ä½ç»´åº¦ã€‚æ¢è€Œè¨€ä¹‹å°±æ˜¯å¯¹å…¶è¿›è¡Œå‹ç¼©ï¼Œæˆ‘ä»¬çœ‹çš„è§†é¢‘æ˜¯1080Pçš„ï¼Œæ± åŒ–ä¹‹åæ˜¯720pä¹Ÿå¯ä»¥æ»¡è¶³å¯¹è§†é¢‘çš„éœ€æ±‚ï¼Œä½†æ˜¯å…¶é™ä½äº†æ•°æ®çš„è®¡ç®—é‡ã€‚</p><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>functional <span class="token keyword">as</span> F<span class="token keyword">import</span> torchvision<span class="token keyword">from</span> torch <span class="token keyword">import</span> nn<span class="token keyword">from</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">import</span> MaxPool2d<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> DataLoader<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>tensorboard <span class="token keyword">import</span> SummaryWriterdataset <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>CIFAR10<span class="token punctuation">(</span><span class="token string">"./data"</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                                       transform<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>dataset<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token comment"># input = torch.tensor([[1, 2, 0, 3, 1],</span><span class="token comment">#                       [0, 1, 2, 3, 1],</span><span class="token comment">#                       [1, 2, 1, 0, 0],</span><span class="token comment">#                       [5, 2, 3, 1, 1],</span><span class="token comment">#                       [2, 1, 0, 1, 1]], dtype=torch.float32)</span><span class="token comment">#</span><span class="token comment"># input = torch.reshape(input, (-1, 1, 5, 5))</span><span class="token comment"># print(input.shape)</span><span class="token keyword">class</span> <span class="token class-name">BinMaxPool</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>BinMaxPool<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># ceil_mode è¡¨ç¤ºï¼šå¦‚æœåŒ¹é…çš„è¿‡ç¨‹ä¸­æœ‰ç©ºæ´çš„åœ°æ–¹ï¼Œæ˜¯å¦éœ€è¦è·³è¿‡</span>        <span class="token comment"># kernel_size è¡¨ç¤ºï¼š æ¯ä¸€æ¬¡æ± åŒ–æ ¸èµ°çš„æ—¶å€™ï¼Œèµ°3æ­¥</span>        self<span class="token punctuation">.</span>maxpool1 <span class="token operator">=</span> MaxPool2d<span class="token punctuation">(</span>kernel_size<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> ceil_mode<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token builtin">input</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        output <span class="token operator">=</span> self<span class="token punctuation">.</span>maxpool1<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> outputbinmaxpool <span class="token operator">=</span> BinMaxPool<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># output = binmaxpool(input)</span><span class="token comment"># print(output)</span>writer <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token string">"./logs_maxpool"</span><span class="token punctuation">)</span>step <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> data <span class="token keyword">in</span> dataloader<span class="token punctuation">:</span>    imgs<span class="token punctuation">,</span> targets <span class="token operator">=</span> data    <span class="token comment"># setpå¯¹åº”ä¸Šæ¯ä¸€æ­¥çš„è¾“å…¥å’Œè¾“å‡ºå›¾åƒ</span>    writer<span class="token punctuation">.</span>add_images<span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">,</span> imgs<span class="token punctuation">,</span> step<span class="token punctuation">)</span>    output <span class="token operator">=</span> binmaxpool<span class="token punctuation">(</span>imgs<span class="token punctuation">)</span>    writer<span class="token punctuation">.</span>add_images<span class="token punctuation">(</span><span class="token string">"output"</span><span class="token punctuation">,</span> output<span class="token punctuation">,</span> step<span class="token punctuation">)</span>    step <span class="token operator">=</span> step <span class="token operator">+</span> <span class="token number">1</span>writer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><img src="/2022/110716118/%E6%9C%80%E5%A4%A7%E6%B1%A0%E5%8C%96%E6%95%88%E6%9E%9C%E5%9B%BE.png" alt></p><h4 id="å…­ã€éçº¿æ€§æ¿€æ´»reluå¤„ç†å’Œsigmoidå¤„ç†"><a class="header-anchor" href="#å…­ã€éçº¿æ€§æ¿€æ´»reluå¤„ç†å’Œsigmoidå¤„ç†">Â¶</a>å…­ã€éçº¿æ€§æ¿€æ´»reluå¤„ç†å’Œsigmoidå¤„ç†</h4><p>éçº¿æ€§æ¿€æ´»å‡½æ•°å®é™…ä¸Šæ˜¯ç»™æ¨¡å‹å¢å¼ºéçº¿æ€§çš„è¡¨è¾¾èƒ½åŠ›æˆ–è€…å› ç´ ï¼Œæœ‰äº†éçº¿æ€§å‡½æ•°æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›å°±ä¼šæ›´å¼ºã€‚æ•´ä¸ªæ¨¡å‹å°±åƒæ´»äº†ä¸€æ ·ï¼Œè€Œä¸æ˜¯åƒæœºå™¨ä¸€æ ·åªä¼šåšä¸€äº›å•ä¸€çš„çº¿æ€§æ“ä½œã€‚<br>æ²¡æœ‰æ¿€æ´»å‡½æ•°çš„ç¥ç»ç½‘ç»œå®é™…ä¸Šæ˜¯çº¿æ€§å¯åŠ çš„ï¼Œé‚£ä¹ˆå¤šçº¿æ€§å±‚å…¶å®å¯ä»¥å½’ä¸ºä¸€å±‚ï¼Œåªå…·æœ‰çº¿æ€§çš„ç¥ç»ç½‘ç»œè¡¨è¾¾èƒ½åŠ›åŠå…¶æœ‰é™ã€‚</p><p><img src="/2022/110716118/relu%E6%95%88%E6%9E%9C.png" alt></p><p>æ³¨æ„ï¼šæ‰¹çš„å¤§å°å°±æ˜¯batch_sizeï¼Œæ¯å–ä¸€æ¬¡å°±æ˜¯ä¸€ä¸ªstepï¼Œstepä¸batch_sizeæ˜¯æœ‰å…³ç³»çš„ï¼Œå› ä¸ºé€šå¸¸æ•°æ®é›†éƒ½å¾ˆå¤§ï¼Œæ²¡æœ‰åŠæ³•ä¸€æ¬¡æ€§å…¨éƒ¨å–å‡ºæ¥ï¼Œå•ä¸ªå•ä¸ªçš„å–æµªè´¹æ—¶é—´ï¼ˆä¸IOæ“ä½œæœ‰å…³ç³»ï¼‰ï¼Œæ‰€æœ‰æŒ‰ç…§æ‰¹å¤„ç†çš„æ–¹å¼è¿›è¡Œã€‚</p><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">import</span> torchvision<span class="token keyword">from</span> torch <span class="token keyword">import</span> nn<span class="token keyword">from</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">import</span> ReLU<span class="token punctuation">,</span> Sigmoid<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> DataLoader<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>tensorboard <span class="token keyword">import</span> SummaryWriter<span class="token builtin">input</span> <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                      <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token builtin">input</span> <span class="token operator">=</span> torch<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">.</span>shape<span class="token punctuation">)</span>   <span class="token comment"># å°†æ•°æ®è½¬åŒ–ä¸ºæ»¡è¶³æ ¼å¼çš„</span>dataset <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>CIFAR10<span class="token punctuation">(</span><span class="token string">"./data"</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                                       transform<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>dataset<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">BinReLU</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>BinReLU<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>relu1 <span class="token operator">=</span> ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>sigmoid11 <span class="token operator">=</span> Sigmoid<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token builtin">input</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        output <span class="token operator">=</span> self<span class="token punctuation">.</span>sigmoid11<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> outputbinRelu <span class="token operator">=</span> BinReLU<span class="token punctuation">(</span><span class="token punctuation">)</span>output <span class="token operator">=</span> binRelu<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span>writer <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token string">"./logs_relu"</span><span class="token punctuation">)</span>step <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> data <span class="token keyword">in</span> dataloader<span class="token punctuation">:</span>    imgs<span class="token punctuation">,</span> targets <span class="token operator">=</span> data    writer<span class="token punctuation">.</span>add_images<span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">,</span> <span class="token builtin">input</span><span class="token punctuation">,</span> global_step<span class="token operator">=</span>step<span class="token punctuation">)</span>    output <span class="token operator">=</span> binRelu<span class="token punctuation">(</span>imgs<span class="token punctuation">)</span>    writer<span class="token punctuation">.</span>add_images<span class="token punctuation">(</span><span class="token string">"output"</span><span class="token punctuation">,</span> output<span class="token punctuation">,</span> step<span class="token punctuation">)</span>    step <span class="token operator">+=</span> <span class="token number">1</span>writer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h4 id="ä¸ƒã€CIFAR10-modelç»“æ„"><a class="header-anchor" href="#ä¸ƒã€CIFAR10-modelç»“æ„">Â¶</a>ä¸ƒã€CIFAR10 modelç»“æ„</h4><p><img src="/2022/110716118/CIFAR10model%E7%BB%93%E6%9E%84.png" alt></p><p><img src="/2022/110716118/stride-padding%E7%9A%84%E8%AE%A1%E7%AE%97.png" alt></p><h5 id="ç½‘ç»œçš„å¤„ç†æµç¨‹ï¼š"><a class="header-anchor" href="#ç½‘ç»œçš„å¤„ç†æµç¨‹ï¼š">Â¶</a>ç½‘ç»œçš„å¤„ç†æµç¨‹ï¼š</h5><pre><code>å·ç§¯---æ± åŒ–---å·ç§¯---æ± åŒ–---å·ç§¯---æ± åŒ–---å±•å¼€---çº¿æ€§å±‚---çº¿æ€§å±‚</code></pre><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">from</span> torch <span class="token keyword">import</span> nn<span class="token keyword">from</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">import</span> Conv2d<span class="token punctuation">,</span> MaxPool2d<span class="token punctuation">,</span> Flatten<span class="token punctuation">,</span> Linear<span class="token punctuation">,</span> Sequential<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>tensorboard <span class="token keyword">import</span> SummaryWriter<span class="token keyword">class</span> <span class="token class-name">BinSeq</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>BinSeq<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># self.conv1 = Conv2d(3, 32, 5, padding=2)</span>        <span class="token comment"># self.maxpool1 = MaxPool2d(2)</span>        <span class="token comment"># self.conv2 = Conv2d(32, 32, 5, padding=2)</span>        <span class="token comment"># self.maxpool2 = MaxPool2d(2)</span>        <span class="token comment"># self.conv3 = Conv2d(32, 64, 5, padding=2)</span>        <span class="token comment"># self.maxpool3 = MaxPool2d(2)</span>        <span class="token comment"># self.flatten = Flatten()</span>        <span class="token comment"># self.linear1 = Linear(1024, 64)</span>        <span class="token comment"># self.linear2 = Linear(64, 10)</span>        <span class="token comment"># æ¨¡å‹çš„åŒ…è£…  Sequentialçš„ä½¿ç”¨</span>        self<span class="token punctuation">.</span>model1 <span class="token operator">=</span> Sequential<span class="token punctuation">(</span>            Conv2d<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            Conv2d<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            Conv2d<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            Flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            Linear<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            Linear<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># x = self.conv1(x)</span>        <span class="token comment"># x = self.maxpool1(x)</span>        <span class="token comment"># x = self.conv2(x)</span>        <span class="token comment"># x = self.maxpool2(x)</span>        <span class="token comment"># x = self.conv3(x)</span>        <span class="token comment"># x = self.maxpool3(x)</span>        <span class="token comment"># x = self.flatten(x)</span>        <span class="token comment"># x = self.linear1(x)</span>        <span class="token comment"># x = self.linear2(x)</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>model1<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token keyword">return</span> xbinseq <span class="token operator">=</span> BinSeq<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>binseq<span class="token punctuation">)</span><span class="token builtin">input</span> <span class="token operator">=</span> torch<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span>output <span class="token operator">=</span> binseq<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>output<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>writer <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token string">"logs_seq"</span><span class="token punctuation">)</span>writer<span class="token punctuation">.</span>add_graph<span class="token punctuation">(</span>binseq<span class="token punctuation">,</span> <span class="token builtin">input</span><span class="token punctuation">)</span>writer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># BinSeq(</span><span class="token comment">#   (model1): Sequential(</span><span class="token comment">#     (0): Conv2d(3, 32, kernel_size=(5, 5), stride=(1, 1), padding=(2, 2))</span><span class="token comment">#     (1): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)</span><span class="token comment">#     (2): Conv2d(32, 32, kernel_size=(5, 5), stride=(1, 1), padding=(2, 2))</span><span class="token comment">#     (3): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)</span><span class="token comment">#     (4): Conv2d(32, 64, kernel_size=(5, 5), stride=(1, 1), padding=(2, 2))</span><span class="token comment">#     (5): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)</span><span class="token comment">#     (6): Flatten(start_dim=1, end_dim=-1)</span><span class="token comment">#     (7): Linear(in_features=1024, out_features=64, bias=True)</span><span class="token comment">#     (8): Linear(in_features=64, out_features=10, bias=True)</span><span class="token comment">#   )</span><span class="token comment"># )</span></code></pre><p>ç½‘ç»œæ­å»ºåœ¨tensorboardå½“ä¸­çš„æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/2022/110716118/seq%E7%9A%84tensorboard%E6%95%88%E6%9E%9C.png" alt></p><h4 id="å…«ã€æŸå¤±å‡½æ•°ä¸åå‘ä¼ æ’­"><a class="header-anchor" href="#å…«ã€æŸå¤±å‡½æ•°ä¸åå‘ä¼ æ’­">Â¶</a>å…«ã€æŸå¤±å‡½æ•°ä¸åå‘ä¼ æ’­</h4><p>æŸå¤±å‡½æ•°ï¼šæŒ‡çš„æ˜¯å®é™…çš„è¾“å‡ºä¸ç›®æ ‡ä¹‹é—´çš„å·®è·<br>æ–¹å‘ä¼ æ’­ï¼šæŒ‡ä¸ºæˆ‘ä»¬æ›´æ–°æ•°æ®æä¾›äº†ä¸€å®šçš„ä¾æ®</p><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">from</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">import</span> L1Loss<span class="token keyword">from</span> torch <span class="token keyword">import</span> nn<span class="token comment"># æ³¨æ„çš„æ˜¯ï¼šè¿™é‡Œçš„[1, 2, 3]æ˜¯æŒ‡3ä¸ªç»´åº¦ï¼Œæ˜¯ä¸€ç»´1ï¼Œ 2ï¼Œ 3</span><span class="token builtin">input</span> <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>torch<span class="token punctuation">.</span>float32<span class="token punctuation">)</span>target <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>torch<span class="token punctuation">.</span>float32<span class="token punctuation">)</span><span class="token builtin">input</span> <span class="token operator">=</span> torch<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>target <span class="token operator">=</span> torch<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>loss <span class="token operator">=</span> L1Loss<span class="token punctuation">(</span><span class="token punctuation">)</span>result <span class="token operator">=</span> loss<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token comment"># è®¡ç®—å‡æ–¹è¯¯å·®</span>loss_mse <span class="token operator">=</span> nn<span class="token punctuation">.</span>MSELoss<span class="token punctuation">(</span><span class="token punctuation">)</span>result_mse <span class="token operator">=</span> loss_mse<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>       <span class="token comment"># tensor(0.6667)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result_mse<span class="token punctuation">)</span>   <span class="token comment"># tensor(1.3333)</span><span class="token comment"># ä¸‹é¢è¿›è¡Œäº¤å‰ç†µæŸå¤±å‡½æ•°çš„è®¡ç®—</span>x <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>y <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>x <span class="token operator">=</span> torch<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>loss_cross <span class="token operator">=</span> nn<span class="token punctuation">.</span>CrossEntropyLoss<span class="token punctuation">(</span><span class="token punctuation">)</span>result_cross <span class="token operator">=</span> loss_cross<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result_cross<span class="token punctuation">)</span>     <span class="token comment"># tensor(1.1019)</span></code></pre><p><img src="/2022/110716118/%E6%8D%9F%E5%A4%B1%E5%87%BD%E6%95%B0.png" alt></p><h5 id="äº¤å‰ç†µæŸå¤±å‡½æ•°çš„è®¡ç®—"><a class="header-anchor" href="#äº¤å‰ç†µæŸå¤±å‡½æ•°çš„è®¡ç®—">Â¶</a>äº¤å‰ç†µæŸå¤±å‡½æ•°çš„è®¡ç®—</h5><p>äº¤å‰ç†µæŸå¤±å‡½æ•°çš„è§£è¯»ï¼š</p><p>Â Â Â Â å‡è®¾ï¼šç›®æ ‡ä¸ºæ£€æµ‹å·¦ä¾§çš„å›¾åƒï¼Œä¸­é—´çš„ä¸ºæ·±åº¦ç¥ç»ç½‘ç»œçš„æ¨¡å‹å›¾ï¼Œåˆ†æˆä¸‰ç»„[person, dog, cat]ï¼Œå…¶ä¸‹æ ‡åˆ†åˆ«è¡¨ç¤º[0, 1, 2]è¾“å‡ºçš„ç»“æœä¸º[0.1, 0.2, 0.3], ç›®æ ‡æ˜¯æ£€æµ‹ä¸ºdog[1]ã€‚</p><p>å¯¹åº”äºå…¬å¼ä¸­ï¼šxè¡¨ç¤ºoutputï¼Œclassè¡¨ç¤ºtargetçš„å€¼</p><p>åˆ™Loss(x, class) = -0.2 * 1  + log(exp(0.1) + exp(0.2) + exp(0.3))</p><p><img src="/2022/110716118/%E4%BA%A4%E5%8F%89%E7%86%B5%E6%8D%9F%E5%A4%B1%E5%87%BD%E6%95%B0.png" alt></p></font>]]></content>
      
      
      <categories>
          
          <category> Pytorch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> ç¥ç»ç½‘ç»œ </tag>
            
            <tag> PytorchåŸºç¡€ä»£ç  </tag>
            
            <tag> Pythonå·ç§¯/æ± åŒ–/éçº¿æ€§ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pytorchå­¦ä¹ 2-åŸºç¡€ä»£ç è§£æ</title>
      <link href="/2022/110716117.html"/>
      <url>/2022/110716117.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h4 id="ä¸€ã€æ•°æ®åŠ è½½æ¨¡å—"><a class="header-anchor" href="#ä¸€ã€æ•°æ®åŠ è½½æ¨¡å—">Â¶</a>ä¸€ã€æ•°æ®åŠ è½½æ¨¡å—</h4><p>DataSet: æä¾›ä¸€ç§æ–¹å¼å»è·å–æ•°æ®åŠå…¶label<br>DataLoader: ä¸ºåé¢çš„ç½‘ç»œæä¾›ä¸åŒçš„æ•°æ®å½¢å¼</p><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> Dataset<span class="token keyword">import</span> cv2<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token keyword">import</span> os<span class="token keyword">class</span> <span class="token class-name">MyData</span><span class="token punctuation">(</span>Dataset<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> root_dir<span class="token punctuation">,</span> label_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>root_dir <span class="token operator">=</span> root_dir        self<span class="token punctuation">.</span>label_dir <span class="token operator">=</span> label_dir        self<span class="token punctuation">.</span>path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>self<span class="token punctuation">.</span>root_dir<span class="token punctuation">,</span> self<span class="token punctuation">.</span>label_dir<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>img_path <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>self<span class="token punctuation">.</span>path<span class="token punctuation">)</span>       <span class="token comment"># è·å–è·¯å¾„ä¸‹çš„æ‰€æœ‰å›¾ç‰‡åœ°å€</span>    <span class="token keyword">def</span> <span class="token function">__getitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> idx<span class="token punctuation">)</span><span class="token punctuation">:</span>        img_name <span class="token operator">=</span> self<span class="token punctuation">.</span>img_path<span class="token punctuation">[</span>idx<span class="token punctuation">]</span>               <span class="token comment"># æ¯ä¸€å¼ å›¾ç‰‡çš„ä½ç½®</span>        <span class="token comment"># æ¯ä¸€å¼ å›¾ç‰‡çš„åŠ è½½è·¯å¾„ ä½¿ç”¨åˆ°äº†os.path.join  root_dir  label_dir img_name</span>        img_item_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>self<span class="token punctuation">.</span>root_dir<span class="token punctuation">,</span> self<span class="token punctuation">.</span>label_dir<span class="token punctuation">,</span> img_name<span class="token punctuation">)</span>        img <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>img_item_path<span class="token punctuation">)</span>             <span class="token comment"># è¿”å›çš„æ˜¯å›¾ç‰‡ï¼Œæ‰“å¼€</span>        label <span class="token operator">=</span> self<span class="token punctuation">.</span>label_dir                      <span class="token comment"># è¿”å›è¯¥å›¾ç‰‡çš„labelä½ç½®</span>        <span class="token keyword">return</span> img<span class="token punctuation">,</span> label    <span class="token keyword">def</span> <span class="token function">__len__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>img_path<span class="token punctuation">)</span>                   <span class="token comment"># è¿”å›å®šä¹‰çš„æ‰€æœ‰ç…§ç‰‡çš„listé•¿åº¦</span><span class="token comment"># åˆ›å»ºå®ä¾‹</span>root_dir <span class="token operator">=</span> <span class="token string">"dataset/hymenoptera_data/train"</span>ants_label_dir <span class="token operator">=</span> <span class="token string">"ants"</span>bees_label_dir <span class="token operator">=</span> <span class="token string">"bees"</span>ants_dataset <span class="token operator">=</span> MyData<span class="token punctuation">(</span>root_dir<span class="token punctuation">,</span> ants_label_dir<span class="token punctuation">)</span>     <span class="token comment"># è¿”å›çš„æ˜¯èš‚èšæ•°æ®é›†</span>bees_dataset <span class="token operator">=</span> MyData<span class="token punctuation">(</span>root_dir<span class="token punctuation">,</span> bees_label_dir<span class="token punctuation">)</span>train_dataset <span class="token operator">=</span> ants_dataset <span class="token operator">+</span> bees_dataset<span class="token comment"># è¾“å‡ºants_datasetå½“ä¸­çš„img, label</span>img<span class="token punctuation">,</span> label <span class="token operator">=</span> ants_dataset<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token comment"># img.show(ants_dataset[0])</span><span class="token keyword">print</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> label<span class="token punctuation">)</span><span class="token comment"># &lt;PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=500x333 at 0x14AE1EC0340> ants</span><span class="token keyword">print</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token comment"># ants</span><span class="token keyword">print</span><span class="token punctuation">(</span>ants_dataset<span class="token punctuation">.</span>__len__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># 124</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>ants_dataset<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># 124</span></code></pre><p><img src="/2022/110716117/DataSet%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.png" alt></p><h4 id="äºŒã€tensorboardæ•°æ®å±•ç¤ºæ¨¡å—"><a class="header-anchor" href="#äºŒã€tensorboardæ•°æ®å±•ç¤ºæ¨¡å—">Â¶</a>äºŒã€tensorboardæ•°æ®å±•ç¤ºæ¨¡å—</h4><p>tensorboardçš„ä½¿ç”¨</p><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>tensorboard <span class="token keyword">import</span> SummaryWriter<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> Dataset<span class="token keyword">import</span> cv2<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token keyword">import</span> os<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token comment"># å°†ç›¸å…³çš„è§£ææ–‡ä»¶å­˜æ”¾åœ¨logsæ–‡ä»¶å¤¹å½“ä¸­</span>writer <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token string">"logs"</span><span class="token punctuation">)</span>image_path <span class="token operator">=</span> <span class="token string">"dataset/train/ants_image/0013035.jpg"</span>img_PIL <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>image_path<span class="token punctuation">)</span>img_array <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>img_PIL<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>img_array<span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment"># &lt;class 'numpy.ndarray'></span><span class="token keyword">print</span><span class="token punctuation">(</span>img_array<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>      <span class="token comment"># (512, 768, 3) æŸ¥çœ‹é€šé“çš„æ•°é‡å’Œä½ç½®ï¼Œå³ä¸‹é¢çš„dataformats</span><span class="token comment"># å‚æ•°åˆ†åˆ«è¡¨ç¤ºï¼šåç§°, å›¾åƒï¼Œæ­¥éª¤ï¼Œæ•°æ®æ ¼å¼</span><span class="token comment"># è¿™ä¸ªæ­¥éª¤å¯ä»¥åœ¨tensorboardä¸Šè¿›è¡Œæ‹–åŠ¨å±•ç¤ºï¼Œè¡¨ç¤ºæ¯ä¸€ä¸ªæ­¥éª¤çš„å›¾åƒç»“æœ</span>writer<span class="token punctuation">.</span>add_image<span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> img_array<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> dataformats<span class="token operator">=</span><span class="token string">"HWC"</span><span class="token punctuation">)</span><span class="token comment"># ç»˜åˆ¶ä¸€æ¡y=xçš„çº¿</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    writer<span class="token punctuation">.</span>add_scalar<span class="token punctuation">(</span><span class="token string">"y=2*x"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">*</span>i<span class="token punctuation">,</span> i<span class="token punctuation">)</span>writer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># è¿™é‡Œæ˜¯ä¼šå‡ºç°å¤šä¸ªå‡½æ•°ï¼Œæœ€åæ‰­åœ¨ä¸€èµ·æ˜¯å¤šä¸ªå‡½æ•°è¿›è¡Œäº†ä¸€ä¸ªæ‹Ÿåˆï¼Œéœ€è¦æŠŠlogsæ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹åˆ é™¤å³å¯</span><span class="token comment"># terminalå½“ä¸­ç¼–å†™å‘½ä»¤ï¼š tensorboard --logdir=logs --port=6007</span></code></pre><p><img src="/2022/110716117/tensorboard%E8%BF%87%E7%A8%8B.png" alt></p><p><img src="/2022/110716117/tensorboard%E6%95%88%E6%9E%9C%E5%9B%BE.png" alt></p><h4 id="ä¸‰ã€transforms"><a class="header-anchor" href="#ä¸‰ã€transforms">Â¶</a>ä¸‰ã€transforms</h4><p>åœ¨pythonå½“ä¸­çš„ç”¨æ³• â€”&gt;tensorçš„æ•°æ®ç±»å‹<br>é€šè¿‡transforms.ToTensorå»çœ‹ä¸¤ä¸ªé—®é¢˜ï¼š<br>1ã€transformsè¯¥å¦‚ä½•ä½¿ç”¨ï¼ˆpythonï¼‰<br>2ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦Tensoræ•°æ®ç±»å‹</p><p><img src="/2022/110716117/transforms%E7%BB%93%E6%9E%9C%E5%8F%8A%E7%94%A8%E6%B3%95.png" alt></p><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>tensorboard <span class="token keyword">import</span> SummaryWriter<span class="token keyword">from</span> torchvision <span class="token keyword">import</span> transforms<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token keyword">import</span> cv2img_path <span class="token operator">=</span> <span class="token string">"dataset/train/ants_image/6240329_72c01e663e.jpg"</span>img <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>img_path<span class="token punctuation">)</span>writer <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token string">"logs"</span><span class="token punctuation">)</span><span class="token comment"># 1ã€ä½¿ç”¨transformsçš„æ–¹æ³•</span>tensor_trans <span class="token operator">=</span> transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span>tensor_img <span class="token operator">=</span> tensor_trans<span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>tensor_img<span class="token punctuation">)</span><span class="token comment"># &lt;PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=500x369 at 0x20B7D789640></span><span class="token comment"># tensor([[[0.3725, 0.3725, 0.3725,  ..., 0.7216, 0.7216, 0.7176],</span><span class="token comment">#          [0.3843, 0.3843, 0.3804,  ..., 0.7216, 0.7176, 0.7176],</span><span class="token comment">#          [0.4000, 0.4000, 0.3961,  ..., 0.7176, 0.7176, 0.7176],</span><span class="token comment">#          ...,</span><span class="token comment">#          [0.1176, 0.1176, 0.1176,  ..., 0.3059, 0.3059, 0.3020],</span><span class="token comment">#          [0.1176, 0.1176, 0.1176,  ..., 0.3020, 0.2980, 0.2980],</span><span class="token comment">#          [0.1176, 0.1020, 0.0980,  ..., 0.3020, 0.2980, 0.2941]],</span><span class="token comment">#</span><span class="token comment">#         [[0.3137, 0.3137, 0.3137,  ..., 0.6588, 0.6588, 0.6549],</span><span class="token comment">#          [0.3255, 0.3255, 0.3216,  ..., 0.6588, 0.6549, 0.6549],</span><span class="token comment">#          [0.3412, 0.3412, 0.3373,  ..., 0.6549, 0.6549, 0.6549],</span><span class="token comment">#          ...,</span><span class="token comment">#          [0.0980, 0.0980, 0.0980,  ..., 0.5176, 0.5176, 0.5137],</span><span class="token comment">#          [0.0980, 0.0980, 0.0980,  ..., 0.5137, 0.5098, 0.5098],</span><span class="token comment">#          [0.1020, 0.0863, 0.0824,  ..., 0.5137, 0.5098, 0.5059]],</span><span class="token comment">#</span><span class="token comment">#         [[0.2941, 0.2941, 0.2941,  ..., 0.6588, 0.6588, 0.6549],</span><span class="token comment">#          [0.3059, 0.3059, 0.3020,  ..., 0.6588, 0.6549, 0.6549],</span><span class="token comment">#          [0.3216, 0.3216, 0.3176,  ..., 0.6549, 0.6549, 0.6549],</span><span class="token comment">#          ...,</span><span class="token comment">#          [0.0824, 0.0824, 0.0824,  ..., 0.5647, 0.5647, 0.5608],</span><span class="token comment">#          [0.0824, 0.0824, 0.0824,  ..., 0.5608, 0.5569, 0.5569],</span><span class="token comment">#          [0.0902, 0.0745, 0.0706,  ..., 0.5608, 0.5569, 0.5529]]])</span><span class="token comment"># 2ã€ä¸ºä»€ä¹ˆä½¿ç”¨tensorçš„æ•°æ®ç±»å‹</span><span class="token comment"># å°†å…¶å­˜æ”¾åˆ°logså½“ä¸­çš„tensorboardå½“ä¸­</span>writer<span class="token punctuation">.</span>add_image<span class="token punctuation">(</span><span class="token string">"Tensor_img"</span><span class="token punctuation">,</span> tensor_img<span class="token punctuation">)</span>writer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h5 id="transformså¸¸è§çš„å‡½æ•°"><a class="header-anchor" href="#transformså¸¸è§çš„å‡½æ•°">Â¶</a>transformså¸¸è§çš„å‡½æ•°</h5><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>tensorboard <span class="token keyword">import</span> SummaryWriter<span class="token keyword">from</span> torchvision <span class="token keyword">import</span> transformswriter <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token string">"logs"</span><span class="token punctuation">)</span>img <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"dataset/train/ants_image/6240329_72c01e663e.jpg"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token comment"># transformså½“ä¸­çš„æ–¹æ³•çš„ä½¿ç”¨</span><span class="token comment"># 1ã€ToTensor</span><span class="token comment"># å°†åŸæ¥çš„PILæ•°æ®ç±»å‹è½¬åŒ–ä¸ºtensorçš„æ•°æ®ç±»å‹</span>trans_totensor <span class="token operator">=</span> transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ–¹æ³•trans_totensorä¸ºï¼šç±»å‹è½¬åŒ–ä¸ºTensor</span>img_tensor <span class="token operator">=</span> trans_totensor<span class="token punctuation">(</span>img<span class="token punctuation">)</span>        <span class="token comment"># å°†å‚æ•°ä¼ è¿›å»ï¼Œå®Œæˆæ•°æ®ç±»å‹çš„è¿”å›</span>writer<span class="token punctuation">.</span>add_image<span class="token punctuation">(</span><span class="token string">"ToTensor"</span><span class="token punctuation">,</span> img_tensor<span class="token punctuation">)</span><span class="token comment"># æ·»åŠ åˆ°tensorboardå½“ä¸­å»</span><span class="token comment"># 2ã€Normalize</span><span class="token comment"># Normalize()å‡½æ•°çš„ä½œç”¨æ˜¯å°†æ•°æ®è½¬æ¢ä¸ºæ ‡å‡†é«˜æ–¯åˆ†å¸ƒï¼Œå³é€ä¸ªchannelçš„å¯¹å›¾åƒè¿›è¡Œæ ‡å‡†åŒ–</span><span class="token comment"># ï¼ˆå‡å€¼å˜ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1ï¼‰ï¼Œå¯ä»¥åŠ å¿«æ¨¡å‹çš„æ”¶æ•›</span><span class="token keyword">print</span><span class="token punctuation">(</span>img_tensor<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>trans_norm <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Normalize<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>img_norm <span class="token operator">=</span> trans_norm<span class="token punctuation">(</span>img_tensor<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>img_norm<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>writer<span class="token punctuation">.</span>add_image<span class="token punctuation">(</span><span class="token string">"Normalize"</span><span class="token punctuation">,</span> img_norm<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># 3ã€ Resize å°†å›¾åƒå¤§å¤§å°è½¬ä¸º512 512</span><span class="token keyword">print</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>size<span class="token punctuation">)</span>trans_resize <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Resize<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">)</span><span class="token punctuation">)</span>img_resize <span class="token operator">=</span> trans_resize<span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>img_resize<span class="token punctuation">)</span><span class="token comment"># &lt;PIL.Image.Image image mode=RGB size=512x512 at 0x1B3F3850130></span><span class="token comment"># å¤§å°ä¸º 512 * 512</span>img_resize <span class="token operator">=</span> trans_totensor<span class="token punctuation">(</span>img_resize<span class="token punctuation">)</span>  <span class="token comment"># å°†åŸæ¥çš„PILç±»å‹è½¬ä¸ºtensorç±»å‹ï¼Œå†æ”¾å…¥tensorboardå½“ä¸­</span>writer<span class="token punctuation">.</span>add_image<span class="token punctuation">(</span><span class="token string">"Resize"</span><span class="token punctuation">,</span> img_resize<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>img_resize<span class="token punctuation">)</span><span class="token comment"># 4ã€Compose - resize -2</span><span class="token comment"># Compose ä¸­çš„å‚æ•°éœ€è¦ä¸€ä¸ªåˆ—è¡¨ åˆ—è¡¨çš„è¡¨ç¤ºå½¢å¼ä¸º[æ•°æ®1ï¼Œ æ•°æ®2ï¼Œ...]</span><span class="token comment"># åœ¨Composeä¸­ æ•°æ®éœ€è¦tansformsç±»å‹ æ‰€ä»¥å¾—åˆ°çš„æ˜¯Compose([tansformså‚æ•°1],[tansformså‚æ•°2]...)</span>trans_resize_2 <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Resize<span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">)</span>trans_compose <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>trans_resize_2<span class="token punctuation">,</span> trans_totensor<span class="token punctuation">]</span><span class="token punctuation">)</span>img_resize_2 <span class="token operator">=</span> trans_compose<span class="token punctuation">(</span>img<span class="token punctuation">)</span>writer<span class="token punctuation">.</span>add_image<span class="token punctuation">(</span><span class="token string">"Resize"</span><span class="token punctuation">,</span> img_resize_2<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># 5ã€RandomCrop éšæœºçš„è£å‰ªå›¾ç‰‡</span>trans_random <span class="token operator">=</span> transforms<span class="token punctuation">.</span>RandomCrop<span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span>trans_compose_2 <span class="token operator">=</span> transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>trans_random<span class="token punctuation">,</span> trans_totensor<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    img_crop <span class="token operator">=</span> trans_compose_2<span class="token punctuation">(</span>img<span class="token punctuation">)</span>    writer<span class="token punctuation">.</span>add_image<span class="token punctuation">(</span><span class="token string">"RandomCrop"</span><span class="token punctuation">,</span> img_crop<span class="token punctuation">,</span> i<span class="token punctuation">)</span>writer<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p><img src="/2022/110716117/transform%E6%96%B9%E6%B3%95.png" alt></p></font>]]></content>
      
      
      <categories>
          
          <category> Pytorch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> PytorchåŸºç¡€ä»£ç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pytorchå­¦ä¹ 1-ç¯å¢ƒå®‰è£…</title>
      <link href="/2022/110716116.html"/>
      <url>/2022/110716116.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h3 id="ä¸€ã€å„ç±»èµ„æºåœ°å€"><a class="header-anchor" href="#ä¸€ã€å„ç±»èµ„æºåœ°å€">Â¶</a>ä¸€ã€å„ç±»èµ„æºåœ°å€</h3><p><a href="https://pytorch.org/">Pytorchå®˜ç½‘</a></p><p><a href="https://www.anaconda.com/">anacondaå®˜ç½‘</a></p><p><a href="https://repo.anaconda.com/archive/">anacondaå†å²ç‰ˆæœ¬</a></p><p><a href="https://www.bilibili.com/video/BV1hE411t7RN/?spm_id_from=333.337.search-card.all.click&amp;vd_source=0f50d0008f8b836aa3258f634d65d48e">å®‰è£…æ•™ç¨‹è§†é¢‘</a></p><h4 id="1ã€å®‰è£…anaconda"><a class="header-anchor" href="#1ã€å®‰è£…anaconda">Â¶</a>1ã€å®‰è£…anaconda</h4><p>æ ¹æ®ä¸Šè¿°å®‰è£…åœ°å€ä¸‹è½½å®‰è£…,æœç´¢Anaconda Promptå‡ºç°baseç¯å¢ƒè¯´æ˜å®‰è£…æˆåŠŸ<br><img src="/2022/110716116/anaconda%E7%9A%84base%E7%8E%AF%E5%A2%83.png" alt></p><h4 id="2ã€æ˜¾å¡çš„é…ç½®"><a class="header-anchor" href="#2ã€æ˜¾å¡çš„é…ç½®">Â¶</a>2ã€æ˜¾å¡çš„é…ç½®</h4><p>æœ¬åœ°æ˜¾å¡ç‰ˆæœ¬ï¼šä»»åŠ¡ç®¡ç†å™¨-æ€§èƒ½-GPU<br>è®¾å¤‡ç®¡ç†å™¨-æ˜¾ç¤ºé€‚é…å™¨<br>é©±åŠ¨ + CUDA</p><p>æŸ¥çœ‹é©±åŠ¨ç‰ˆæœ¬ï¼š</p><pre class="language-cmd" data-language="cmd"><code class="language-cmd">nvidia-smi</code></pre><p><img src="/2022/110716116/%E9%A9%B1%E5%8A%A8%E7%89%88%E6%9C%AC%E6%9F%A5%E7%9C%8B.png" alt></p><h4 id="3ã€ä½¿ç”¨condaåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"><a class="header-anchor" href="#3ã€ä½¿ç”¨condaåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ">Â¶</a>3ã€ä½¿ç”¨condaåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h4><p>1ã€æ‰“å¼€Anaconda Promptçª—å£ï¼Œåˆ›å»ºç¯å¢ƒPytorch</p><pre class="language-conda" data-language="conda"><code class="language-conda">conda create -n pytorch python&#x3D;3.6</code></pre><p>2ã€æ¿€æ´»ç¯å¢ƒ</p><pre class="language-cmd" data-language="cmd"><code class="language-cmd">conda activate pytorch</code></pre><p>3ã€æŸ¥çœ‹ç¯å¢ƒå½“ä¸­å…·å¤‡å“ªäº›å·¥å…·åŒ…ï¼š</p><pre class="language-cmd" data-language="cmd"><code class="language-cmd">pip list</code></pre><p>4ã€æŸ¥çœ‹pytorchæ˜¯å¦å¯ç”¨</p><pre class="language-cmd" data-language="cmd"><code class="language-cmd">python&gt;&gt;&gt; import torch&gt;&gt;&gt; torch.cuda.is_available();# è¿”å›Trueè¡¨ç¤ºæœ¬æœºGPUå¯è¢«pytorchä½¿ç”¨</code></pre><p>5ã€åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</p><pre class="language-cmd" data-language="cmd"><code class="language-cmd">conda remove -n pytorch_env(è™šæ‹Ÿç¯å¢ƒåç§°)  --all</code></pre><p><img src="/2022/110716116/%E6%9F%A5%E7%9C%8Bpytorch%E6%98%AF%E5%90%A6%E5%8F%AF%E7%94%A8.png" alt></p><p>6ã€å°†pytorchå®‰è£…åˆ°æŒ‡å®šçš„ç›®å½•ä¸‹</p><pre class="language-cmd" data-language="cmd"><code class="language-cmd">æŸ¥çœ‹anacondaæ–‡æ¡£conda create helpå®‰è£…è™šæ‹Ÿç¯å¢ƒåˆ°æŒ‡å®šç›®å½•ä¸‹conda create --prefix&#x3D;D:\Anaconda\setup\envs\BinPytorch python&#x3D;3.8æŸ¥çœ‹å½“å‰çš„ç¯å¢ƒåŠåœ°å€conda info --envså‡ºç°ä»¥ä¸‹ç¯å¢ƒï¼šlabelImg                 C:\Users\Administrator\.conda\envs\labelImgbase                  *  D:\Anaconda\setuppytorch                  D:\Anaconda\setup\envs\pytorch</code></pre><p>7ã€åˆ›å»ºå¥½äº†è™šæ‹Ÿç¯å¢ƒä¹‹åï¼Œå®‰è£…pytorch<br><a href="https://pytorch.org/">pytorchå®‰è£…è·¯å¾„</a><br><img src alt></p><h3 id="äºŒã€ç›¸å…³çš„æ“ä½œå‘½ä»¤"><a class="header-anchor" href="#äºŒã€ç›¸å…³çš„æ“ä½œå‘½ä»¤">Â¶</a>äºŒã€ç›¸å…³çš„æ“ä½œå‘½ä»¤</h3><pre class="language-cmd" data-language="cmd"><code class="language-cmd">dir() : æ‰“å¼€å‡½æ•°ï¼ŒæŸ¥çœ‹æœ‰å“ªäº›æ–¹æ³•help(): å·¥å…·çš„ä½¿ç”¨æ–¹æ³•</code></pre><p><img src="/2022/110716116/pythorch%E5%91%BD%E4%BB%A4.png" alt><br><img src="/2022/110716116/pytorch%E5%91%BD%E4%BB%A42.png" alt><br><img src="/2022/110716116/pytorch%E5%91%BD%E4%BB%A43.png" alt></p><h5 id="æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ"><a class="header-anchor" href="#æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ">Â¶</a>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</h5><p>åœ¨pycharmå½“ä¸­å®Œæˆç¯å¢ƒçš„é…ç½®ä¹‹å</p><pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">print</span><span class="token punctuation">(</span>torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>torch<span class="token punctuation">.</span>backends<span class="token punctuation">.</span>cudnn<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>torch<span class="token punctuation">.</span>cuda_version<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>torch<span class="token punctuation">.</span>backends<span class="token punctuation">.</span>cudnn<span class="token punctuation">.</span>version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></font>]]></content>
      
      
      <categories>
          
          <category> Pytorch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨¡å‹/ä»£ç /è®ºæ–‡/èµ„æº åœ°å€æ±‡æ€»</title>
      <link href="/2022/110616115.html"/>
      <url>/2022/110616115.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h2 id="ä¸€ã€æ¨¡å‹"><a class="header-anchor" href="#ä¸€ã€æ¨¡å‹">Â¶</a>ä¸€ã€æ¨¡å‹</h2><pre class="language-none"><code class="language-none">æ¨¡å‹æœ¬åœ°å­˜æ”¾åœ°å€ï¼š</code></pre><h3 id="1ã€ResNetç›¸å…³é¢„è®­ç»ƒæ¨¡å‹ä¸‹è½½åœ°å€"><a class="header-anchor" href="#1ã€ResNetç›¸å…³é¢„è®­ç»ƒæ¨¡å‹ä¸‹è½½åœ°å€">Â¶</a>1ã€ResNetç›¸å…³é¢„è®­ç»ƒæ¨¡å‹ä¸‹è½½åœ°å€</h3><pre class="language-python" data-language="python"><code class="language-python">model_urls <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token string">'resnet18'</span><span class="token punctuation">:</span> <span class="token string">'https://download.pytorch.org/models/resnet18-f37072fd.pth'</span><span class="token punctuation">,</span>    <span class="token string">'resnet34'</span><span class="token punctuation">:</span> <span class="token string">'https://download.pytorch.org/models/resnet34-b627a593.pth'</span><span class="token punctuation">,</span>    <span class="token string">'resnet50'</span><span class="token punctuation">:</span> <span class="token string">'https://download.pytorch.org/models/resnet50-0676ba61.pth'</span><span class="token punctuation">,</span>    <span class="token string">'resnet101'</span><span class="token punctuation">:</span> <span class="token string">'https://download.pytorch.org/models/resnet101-63fe2227.pth'</span><span class="token punctuation">,</span>    <span class="token string">'resnet152'</span><span class="token punctuation">:</span> <span class="token string">'https://download.pytorch.org/models/resnet152-394f9c45.pth'</span><span class="token punctuation">,</span>    <span class="token string">'resnext50_32x4d'</span><span class="token punctuation">:</span> <span class="token string">'https://download.pytorch.org/models/resnext50_32x4d-7cdf4587.pth'</span><span class="token punctuation">,</span>    <span class="token string">'resnext101_32x8d'</span><span class="token punctuation">:</span> <span class="token string">'https://download.pytorch.org/models/resnext101_32x8d-8ba56ff5.pth'</span><span class="token punctuation">,</span>    <span class="token string">'wide_resnet50_2'</span><span class="token punctuation">:</span> <span class="token string">'https://download.pytorch.org/models/wide_resnet50_2-95faca4d.pth'</span><span class="token punctuation">,</span>    <span class="token string">'wide_resnet101_2'</span><span class="token punctuation">:</span> <span class="token string">'https://download.pytorch.org/models/wide_resnet101_2-32ee1156.pth'</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span></code></pre><p>ä¸¤ç§è½½å…¥æ–¹å¼ï¼š</p><pre class="language-python" data-language="python"><code class="language-python"><span class="token comment"># methold1ï¼š</span><span class="token comment"># model = torchvision.models.resnet152(pretrained=True)</span> <span class="token comment"># methold2ï¼š</span>model<span class="token operator">=</span>torchvision<span class="token punctuation">.</span>models<span class="token punctuation">.</span>resnet152<span class="token punctuation">(</span><span class="token punctuation">)</span>model<span class="token punctuation">.</span>load_state_dict<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'./resnet152-394f9c45.pth'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h2 id="äºŒã€ä»£ç "><a class="header-anchor" href="#äºŒã€ä»£ç ">Â¶</a>äºŒã€ä»£ç </h2><h4 id="1ã€reID-Relation-Aware-Global-Attention-for-Person-Re-identification-CVPR2020"><a class="header-anchor" href="#1ã€reID-Relation-Aware-Global-Attention-for-Person-Re-identification-CVPR2020">Â¶</a>1ã€reID: Relation-Aware Global Attention for Person Re-identification(CVPR2020)</h4><p><a href="https://openaccess.thecvf.com/content_CVPR_2020/papers/Zhang_Relation-Aware_Global_Attention_for_Person_Re-Identification_CVPR_2020_paper.pdf">è®ºæ–‡åœ°å€</a><br><a href="https://github.com/microsoft/Relation-Aware-Global-Attention-Networks">githubåœ°å€</a><br><a href="https://www.bilibili.com/video/BV1eW4y1h7SZ?p=9&amp;spm_id_from=pageDriver&amp;vd_source=0f50d0008f8b836aa3258f634d65d48e">è§†é¢‘æ•™ç¨‹åœ°å€</a><br>æœ¬æœºä»£ç åœ°å€ï¼š [E:\DeepLearning\REID\RGA\Relation Network for Person Re-identification\githubCode]</p><h2 id="ä¸‰ã€è®ºæ–‡"><a class="header-anchor" href="#ä¸‰ã€è®ºæ–‡">Â¶</a>ä¸‰ã€è®ºæ–‡</h2><h4 id="1ã€reID-Relation-Aware-Global-Attention-for-Person-Re-identification-CVPR2020-v2"><a class="header-anchor" href="#1ã€reID-Relation-Aware-Global-Attention-for-Person-Re-identification-CVPR2020-v2">Â¶</a>1ã€<a href="https://openaccess.thecvf.com/content_CVPR_2020/papers/Zhang_Relation-Aware_Global_Attention_for_Person_Re-Identification_CVPR_2020_paper.pdf">reID: Relation-Aware Global Attention for Person Re-identification(CVPR2020)</a></h4><h2 id="å››ã€å…¶ä»–èµ„æº"><a class="header-anchor" href="#å››ã€å…¶ä»–èµ„æº">Â¶</a>å››ã€å…¶ä»–èµ„æº</h2></font>]]></content>
      
      
      <categories>
          
          <category> èµ„æº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> èµ„æº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>reIDè®ºæ–‡-Relation_Aware_Global_Attention_for_Person_Re-identification(CVPR2020)</title>
      <link href="/2022/110616114.html"/>
      <url>/2022/110616114.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h2 id="reID-Relation-Aware-Global-Attention-for-Person-Re-identification-CVPR2020"><a class="header-anchor" href="#reID-Relation-Aware-Global-Attention-for-Person-Re-identification-CVPR2020">Â¶</a>reID: Relation-Aware Global Attention for Person Re-identification(CVPR2020)</h2><p><a href="https://openaccess.thecvf.com/content_CVPR_2020/papers/Zhang_Relation-Aware_Global_Attention_for_Person_Re-Identification_CVPR_2020_paper.pdf">è®ºæ–‡åœ°å€</a></p><p><a href="https://github.com/microsoft/Relation-Aware-Global-Attention-Networks">githubåœ°å€</a></p><p><a href="https://www.bilibili.com/video/BV1eW4y1h7SZ?p=9&amp;spm_id_from=pageDriver&amp;vd_source=0f50d0008f8b836aa3258f634d65d48e">è§†é¢‘æ•™ç¨‹åœ°å€</a></p><h3 id="ä¸€ã€æ¨¡å‹å›¾è§£è¯»"><a class="header-anchor" href="#ä¸€ã€æ¨¡å‹å›¾è§£è¯»">Â¶</a>ä¸€ã€æ¨¡å‹å›¾è§£è¯»</h3><p><img src="/2022/110616114/%E5%9F%BA%E4%BA%8E%E7%A9%BA%E9%97%B4%E5%92%8Cchannel%E7%9A%84%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6.png" alt></p><p>å›¾a: ç©ºé—´æ³¨æ„åŠ›æœºåˆ¶çš„æå–ï¼šå¾—åˆ°ç‰¹å¾å›¾ä¹‹åï¼Œä¸€ä¸ªç»´åº¦ä¸Šè¿›è¡Œç‰¹å¾çš„è¿ç®—<br>å›¾b: ç©ºé—´æ³¨æ„åŠ›æœºåˆ¶çš„æå–ï¼šå¾—åˆ°ç‰¹å¾å›¾ä¹‹åï¼Œä¸€ä¸ªchannelä¸Šè¿›è¡Œç‰¹å¾çš„è¿ç®—</p><p>æ•´ä½“æ€æƒ³ï¼šé€šè¿‡æå–å›¾åƒçš„ç‰¹å¾å›¾ï¼Œä»ç‰¹å¾å›¾ä¸Šæ¥çœ‹ï¼Œæœ¬æ–‡çš„ä¸¤ä¸ªåˆ›æ–°ç‚¹åœ¨äºï¼š</p><p>1ã€å¯¹åº”å›¾aï¼Œä»ä¸€ä¸ªchannelå‡ºå‘ï¼Œä¸€å¼ å›¾åƒ[H * W]çš„æ‰€æœ‰ç‰¹å¾ç‚¹å¯ä»¥å¹¶ä¸æ˜¯å…¨éƒ¨éƒ½æ˜¯è¡Œäººçš„ç‰¹å¾(å­˜åœ¨éƒ¨åˆ†èƒŒæ™¯å› ç´ ),å› æ­¤æˆ‘ä»¬éœ€è¦å°†ç‰¹å¾ç‚¹è¿›è¡Œæƒé‡çš„åˆ’åˆ†ï¼Œå³è·å–ä¸€ä¸ªå¤§å°ä¸º[H * W]çš„æƒé‡æ•°ç»„ï¼Œå†ä¸ç‰¹å¾å›¾è¿›è¡Œç›¸ä¹˜ã€‚<br>2ã€å¯¹åº”å›¾bï¼Œä»ä¸åŒçš„channelå‡ºå‘ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯éœ€è¦å¯¹æ¯ä¸€ä¸ªchannelé€šé“è¿›è¡Œè¿ç®—ï¼Œè€Œæ˜¯æ ¹æ®é€šé“ä¹‹é—´çš„æƒé‡è¿›è¡Œè®¡ç®—ï¼Œå› æ­¤æˆ‘ä»¬è®¡ç®—å‡ºä¸åŒé€šé“çš„æƒé‡[c],æœ€åä¸ç‰¹å¾å›¾çš„é€šé“ç›¸ä¹˜ã€‚<br>æ³¨ï¼šä»¥ä¸Šçš„ä¸¤ä¸ªæ“ä½œè¿‡ç¨‹ç›¸ä¼¼ï¼Œåªæ˜¯ä»ä¸¤ä¸ªä¸åŒçš„ç»´åº¦å‡ºå‘çš„ï¼</p><p>æ¨¡å‹ç»“æ„ï¼š<br>å›¾aï¼š<br>Â Â Â Â     1ã€å°†å›¾åƒçš„ç‰¹å¾å›¾embeddingæˆä¸€ä¸ªé€šé“çš„ç«‹ä½“å›¾(åŸå§‹ç‰¹å¾å›¾çš„ç‰¹å¾)-----&gt;ä¿ç•™åŸå§‹çš„ç‰¹å¾å›¾ä¿¡æ¯</p><p>Â Â Â Â     2ã€è®¡ç®—[H * W]å½“ä¸­ä¸¤ä¸¤ç‰¹å¾ç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œreshapeæˆä¸€ä¸ª[H * W]çš„ç‰¹å¾</p><p>Â Â Â Â     3ã€ä¸ºä»€ä¹ˆæœ‰ä¸¤ä¸ªï¼Ÿ-----&gt; ä¸€ä¸ªè®¡ç®—çš„æ˜¯æˆ‘ä¸å¦å¤–ä¸€ä¸ªç‰¹å¾ç‚¹çš„å…³ç³»ï¼Œä¸€ä¸ªæ˜¯å¦å¤–ä¸€ä¸ªç‰¹å¾ç‚¹ä¸æˆ‘çš„å…³ç³»(ä»–ä»¬ä¹‹é—´çš„å…³ç³»æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¯ä»¥è¯•ç€ç†è§£ç†è§£)</p><p>Â Â Â Â     4ã€æœ€åå°†ä¸Šè¿°çš„ä¸‰ä¸ªç‰¹å¾å›¾è¿›è¡Œç»„è£…æ‹¼æ¥ï¼Œå³ï¼šRelation-aware Feature</p><p>Â Â Â Â     5ã€æœ€åå°†Relation-aware Featureåšä¸€ä¸ªå·ç§¯æ“ä½œï¼Œæå–å‡ºæ¯ä¸€ä¸ªç‰¹å¾ç‚¹ä½ç½®ä¸Šçš„æƒé‡å€¼ï¼ŒåŠå¤§å°ä¸º[H * W]çš„æƒé‡æ•°ç»„Spatial Attention</p><p>å›¾b: å‡ ä¹åŒä¸Š(è·å–é€šé“çš„æƒé‡æ•°ç»„)</p></font>]]></content>
      
      
      <categories>
          
          <category> reID </category>
          
          <category> reIDè®ºæ–‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œäººé‡è¯†åˆ« </tag>
            
            <tag> reId </tag>
            
            <tag> ç§‘ç ”er </tag>
            
            <tag> è®ºæ–‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>reIDåŸºç¡€çŸ¥è¯†1-è¡Œäººé‡è¯†åˆ«å®šä¹‰åŠè¿‡ç¨‹</title>
      <link href="/2022/110416113.html"/>
      <url>/2022/110416113.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h2 id="reID-Person-re-identification"><a class="header-anchor" href="#reID-Person-re-identification">Â¶</a>reID: Person re-identification</h2><h3 id="ä¸€ã€reIDè¦åšä»€ä¹ˆï¼Ÿ"><a class="header-anchor" href="#ä¸€ã€reIDè¦åšä»€ä¹ˆï¼Ÿ">Â¶</a>ä¸€ã€reIDè¦åšä»€ä¹ˆï¼Ÿ</h3><blockquote><ul><li>åœ¨å¤šæ‘„åƒå¤´çš„å¤æ‚ç¯å¢ƒå½“ä¸­ï¼Œå¿«é€Ÿçš„å®šä½æŸ¥æ‰¾æŒ‡å®šçš„ç›®æ ‡çš„æ‰€æœ‰ç»“æœ</li></ul></blockquote><p>in other wordsï¼šç»™å®šä¸€ä¸ªç…§ç‰‡ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¤æ‚çš„ç¯å¢ƒå½“ä¸­æ‰¾åˆ°æœ€åŒ¹é…è¿™å¼ ç…§ç‰‡çš„è‹¥å¹²ä¸ªç»“æœï¼</p><h3 id="äºŒã€è¡Œäººé‡è¯†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a class="header-anchor" href="#äºŒã€è¡Œäººé‡è¯†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ">Â¶</a>äºŒã€è¡Œäººé‡è¯†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>è¡Œäººè¯†åˆ«ï¼šæ˜¯å°†å›¾åƒå½“ä¸­çš„è¡Œäººæ‰¾åˆ°<br>è¡Œäººé‡è¯†åˆ«ï¼šè¾“å…¥ä¸€å¼ å›¾åƒï¼Œç„¶ååœ¨ä¼—å¤šçš„æ‘„åƒå¤´æ‰€æˆªå–çš„å›¾åƒå½“ä¸­è·å–å…·å¤‡è¾“å…¥å›¾åƒç‰¹å¾çš„è‹¥å¹²å¼ è¡Œäººå›¾åƒ<br>ä¸€èˆ¬è€Œè¨€ï¼šæˆ‘ä»¬ä¼šå°†è¯¥è¾“å…¥å›¾åƒè¿›è¡Œç‰¹å¾æå–è·å–å…¶ç‰¹å¾å›¾ï¼ˆä¾‹å¦‚ï¼š1024ç»´çš„ç‰¹å¾å‘é‡/å›¾ï¼‰ï¼Œç„¶åå†å°†å›¾åƒåº“å½“ä¸­çš„æ•°æ®ä¹Ÿå…¨éƒ¨è½¬åŒ–ä¸º1024ç»´çš„ç‰¹å¾å‘é‡/å›¾ï¼Œæœ€åé€šè¿‡è®¡ç®—ä»–ä»¬ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œæ¥åˆ¤åˆ«æœ€åé‚£äº›å›¾åƒæ˜¯æˆ‘éœ€è¦å¯»æ‰¾çš„ã€‚<br><img src="/2022/110416113/%E8%A1%8C%E4%BA%BA%E9%87%8D%E8%AF%86%E5%88%AB%E5%9B%BE.png" alt></p><h3 id="ä¸‰ã€è¡Œäººé‡è¯†åˆ«çš„åº”ç”¨åœºæ™¯"><a class="header-anchor" href="#ä¸‰ã€è¡Œäººé‡è¯†åˆ«çš„åº”ç”¨åœºæ™¯">Â¶</a>ä¸‰ã€è¡Œäººé‡è¯†åˆ«çš„åº”ç”¨åœºæ™¯</h3><blockquote><ul><li>æ‰‹æœºç›¸å†Œåˆ†ç±»ï¼ˆæœ‰äº›æ˜¯äººè„¸è¯†åˆ«ï¼Œæœ‰äº›æ˜¯äººçš„ç‰¹å¾ï¼‰</li><li>äººæœºäº¤äº’</li><li>æ™ºèƒ½è¶…å¸‚</li><li>ä¸€åˆ†é’Ÿæˆ‘è¦å¥¹çš„æ‰€æœ‰ä¿¡æ¯</li></ul></blockquote><p><img src="/2022/110416113/%E8%A1%8C%E4%BA%BA%E9%87%8D%E8%AF%86%E5%88%AB%E7%9A%84%E8%83%8C%E6%99%AF.png" alt></p><p>ä¸€å¥è¯ï¼š æˆ‘ä»¬è¿›è¡Œé‡è¯†åˆ«ï¼Œå…¶æ ¹æœ¬çš„æ–¹æ³•å°±æ˜¯<font color="#0000FF">ç›¸ä¼¼åº¦çš„åŒ¹é…</font></p><h3 id="å››ã€è¡Œäººé‡è¯†åˆ«é¢†åŸŸå½“ä¸­å­˜åœ¨çš„æŒ‘æˆ˜"><a class="header-anchor" href="#å››ã€è¡Œäººé‡è¯†åˆ«é¢†åŸŸå½“ä¸­å­˜åœ¨çš„æŒ‘æˆ˜">Â¶</a>å››ã€è¡Œäººé‡è¯†åˆ«é¢†åŸŸå½“ä¸­å­˜åœ¨çš„æŒ‘æˆ˜</h3><blockquote><ul><li>ç”±äºè¡Œäººå­˜åœ¨äºå›¾åƒå½“ä¸­ï¼Œæ£€æµ‹çš„è¿‡ç¨‹å½“ä¸­æˆªå–å‡ºæ¥çš„è¡Œäººåƒç´ è¾ƒä½</li><li>ä¸åŒäºäººè„¸è¯†åˆ«ï¼Œäººè„¸æ‰€å­˜åœ¨çš„å¹²æ‰°éå¸¸å°‘ï¼Œè€Œè¡ŒäººåŒ…æ‹¬ï¼šè‚¢ä½“ï¼ŒèƒŒæ™¯ï¼Œç¯å¢ƒï¼Œè¡£ç€ç­‰çš„å½±å“</li><li>ä½¿ç”¨åˆ°çš„æ•°æ®é›†é‡æ¯”è¾ƒä½ï¼Œæ ¡å›­æ•°æ®é›†ä¸€èˆ¬è€Œè¨€éƒ½æ˜¯1000äººã€10000å›¾ç‰‡å·¦å³</li></ul></blockquote><p><img src="/2022/110416113/%E8%A1%8C%E4%BA%BA%E9%87%8D%E8%AF%86%E5%88%AB%E5%AD%98%E5%9C%A8%E7%9A%84%E6%8C%91%E6%88%98.png" alt></p><blockquote><ul><li>åˆ†è¾¨ç‡è¾ƒä½</li><li>è¡Œäººè‚¢ä½“å—åˆ°é®æŒ¡</li><li>ä¸åŒè§†è§’ä¸‹çš„å›¾åƒï¼Œå¯¹æ¯”èµ·æ¥è¾ƒä¸ºå›°éš¾</li><li>ä¸åŒè§†è§’ä¸‹çš„å›¾åƒï¼Œå…‰ç…§æ¡ä»¶å¯èƒ½ä¸åŒ</li><li>è§†è§‰æ¨¡ç³Š</li></ul></blockquote><p>ç›®å‰ç ”ç©¶æ‰€å­˜åœ¨çš„é—®é¢˜ï¼š<font color="#00FF00">è·¨åŸŸé—®é¢˜</font>ï¼Œå°±æ˜¯åœ¨æµ‹è¯•ç¯å¢ƒå½“ä¸­æ˜¯<font color="#FF0000">state-of-the-art</font>ï¼Œæ”¾åˆ°å„ç§å¤æ‚çš„ç¯å¢ƒå½“ä¸­æ•ˆæœè¹­è¹­å¾€ä¸‹æ‰ï¼å…¬å¼€çš„æ•°æ®é›†éƒ½æ˜¯å­¦æ ¡çš„æ•°æ®é›†ï¼</p><h4 id="è®ºæ–‡å½“ä¸­å¸¸ç”¨çš„æ•°æ®é›†"><a class="header-anchor" href="#è®ºæ–‡å½“ä¸­å¸¸ç”¨çš„æ•°æ®é›†">Â¶</a>è®ºæ–‡å½“ä¸­å¸¸ç”¨çš„æ•°æ®é›†</h4><blockquote><ul><li>CUHK03: é¦™æ¸¯ä¸­æ–‡å¤§å­¦(CUHK)æ ¡å›­</li><li>Market-1501: æ¸…åå¤§å­¦æ ¡å›­</li><li>DukeMTMC: 8ä¸ªæ‘„åƒæœº</li><li>MSMIT17ï¼š12ä¸ªå®¤å¤–å’Œ3ä¸ªå®¤å†…ï¼ˆæ ¡å›­ï¼‰</li></ul></blockquote><p><img src="/2022/110416113/%E6%A0%A1%E5%9B%AD%E6%95%B0%E6%8D%AE%E9%9B%86.png" alt></p><h3 id="äº”ã€è¡Œäººé‡è¯†åˆ«æ•ˆæœçš„è¯„ä¼°æ ‡å‡†"><a class="header-anchor" href="#äº”ã€è¡Œäººé‡è¯†åˆ«æ•ˆæœçš„è¯„ä¼°æ ‡å‡†">Â¶</a>äº”ã€è¡Œäººé‡è¯†åˆ«æ•ˆæœçš„è¯„ä¼°æ ‡å‡†</h3><p>è¯„ä¼°æ ‡å‡†ï¼šåŸºæœ¬ä¸Šæ‰€æœ‰è®ºæ–‡éƒ½æ˜¯æå‡ºä¸¤ä¸ªæ¦‚å¿µï¼š <font color="#FF0000">rank1</font>  Â Â Â  <font color="#FF0000">map</font></p><h4 id="rank1-è¿”å›ç»“æœçš„ä¸€ç³»åˆ—å›¾åƒå½“ä¸­ï¼Œrank1è¡¨ç¤ºç¬¬ä¸€ç« ç»“æœæ­£ç¡®"><a class="header-anchor" href="#rank1-è¿”å›ç»“æœçš„ä¸€ç³»åˆ—å›¾åƒå½“ä¸­ï¼Œrank1è¡¨ç¤ºç¬¬ä¸€ç« ç»“æœæ­£ç¡®">Â¶</a>rank1: è¿”å›ç»“æœçš„ä¸€ç³»åˆ—å›¾åƒå½“ä¸­ï¼Œrank1è¡¨ç¤ºç¬¬ä¸€ç« ç»“æœæ­£ç¡®</h4><h4 id="map-è®¡ç®—å¤šç»„ap-average-presicion-çš„å¹³å‡å€¼"><a class="header-anchor" href="#map-è®¡ç®—å¤šç»„ap-average-presicion-çš„å¹³å‡å€¼">Â¶</a>map: è®¡ç®—å¤šç»„ap(average presicion)çš„å¹³å‡å€¼</h4><p><img src="/2022/110416113/map%E7%9A%84%E8%AE%A1%E7%AE%971.png" alt></p><p>é€šä¿—çš„è®¡ç®—ï¼š ap(average presicion) = (1/1 + 2/3 + 3/6 + 4/9 + 5/10) / 5<br>åˆ†å­ä¸ºï¼šæ¯ä¸€ä¸ªæ­£ç¡®çš„å›¾ç‰‡æ‰€åº”è¯¥å­˜æ”¾çš„ä½ç½®<br>åˆ†æ¯ä¸ºï¼šè¯†åˆ«çš„æ­£ç¡®çš„ç»“æœ(æ©™è‰²)åœ¨è¯†åˆ«çš„ç»“æœå½“ä¸­çš„ä½ç½®</p><p>åˆ†æï¼šå¦‚æœè¯†åˆ«çš„æ‰€æœ‰ç»“æœå‡åœ¨æ­£ç¡®çš„ä½ç½®ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯†åˆ«å‡ºæ¥çš„ç¬¬ä¸€å¼ æœ€ç›¸ä¼¼ï¼Œç¬¬äºŒå¼ æ¬¡ä¹‹ï¼Œä»¥æ­¤ç±»æ¨ï¼Œé‚£ä¹ˆap = (1/1 + 2/2 + 3/3 + 4/4 +5/5) / 5 = 1 ã€‚å³apå€¼è¶Šæ¥è¿‘äº1ï¼Œè¶Šèƒ½å¤Ÿè¯æ˜è¯†åˆ«çš„æ•ˆæœå¥½ï¼</p><p><img src="/2022/110416113/map%E7%9A%84%E8%AE%A1%E7%AE%972.png" alt></p><p>ä¸€èˆ¬è€Œè¨€åšä¸€ç»„å®éªŒä¸èƒ½è¯æ˜å…¶æœ€ç»ˆçš„æ•ˆæœï¼Œæˆ‘ä»¬åšå¤šç»„å®éªŒ(ä¸Šä¸¤å¼ å›¾ap_1 = 0.62 ap_2 = 0.44),åˆ™æœ€ç»ˆçš„ map = (0.62 + 0.44)/2 = 0.53</p><h3 id="å…­ã€æŸå¤±å‡½æ•°"><a class="header-anchor" href="#å…­ã€æŸå¤±å‡½æ•°">Â¶</a>å…­ã€æŸå¤±å‡½æ•°</h3><p>(å­¦ä¹ å®Œäº†è¿‡æ¥è¡¥å……)</p><h3 id="é™„ï¼šç‰›é€¼çš„åœ°æ–¹ï¼š"><a class="header-anchor" href="#é™„ï¼šç‰›é€¼çš„åœ°æ–¹ï¼š">Â¶</a>é™„ï¼šç‰›é€¼çš„åœ°æ–¹ï¼š</h3><p><a href="https://research.megvii.com/">æ—·è§†ç ”ç©¶é™¢</a></p><p><a href="https://aaai.org/Conferences/AAAI-22/">AAAI</a></p><p><a href="https://cvpr2022.thecvf.com/">CVPR</a></p><p><a href="https://www.bilibili.com/video/BV1eW4y1h7SZ?p=2&amp;spm_id_from=pageDriver&amp;vd_source=0f50d0008f8b836aa3258f634d65d48e">è¯¾ç¨‹åœ°å€</a></p><p>è¯¾ä»¶åœ°å€: (E:\DeepLearning\REID\RGA)</p></font>]]></content>
      
      
      <categories>
          
          <category> reID </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œäººé‡è¯†åˆ« </tag>
            
            <tag> reId </tag>
            
            <tag> ç§‘ç ”er </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¥ç»ç½‘ç»œåŸºç¡€-çº¿æ€§å‡½æ•°&amp;æŸå¤±å‡½æ•°</title>
      <link href="/2022/110116112.html"/>
      <url>/2022/110116112.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h2 id="ç™»å½•"><a class="header-anchor" href="#ç™»å½•">Â¶</a>ç™»å½•</h2><h3 id="ä¸€ã€"><a class="header-anchor" href="#ä¸€ã€">Â¶</a>ä¸€ã€</h3></font>]]></content>
      
      
      <categories>
          
          <category> ç¥ç»ç½‘ç»œå­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¥ç»ç½‘ç»œåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ6-springbootç³»ç»Ÿä¸­ä¸‰å±‚æ¶æ„çš„åˆ†æ</title>
      <link href="/2022/103116111.html"/>
      <url>/2022/103116111.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h2 id="ç™»å½•"><a class="header-anchor" href="#ç™»å½•">Â¶</a>ç™»å½•</h2><h3 id="ä¸€ã€"><a class="header-anchor" href="#ä¸€ã€">Â¶</a>ä¸€ã€</h3></font>]]></content>
      
      
      <categories>
          
          <category> å‰åç«¯åˆ†ç¦»webç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å®ç”¨å°å·¥å…· </tag>
            
            <tag> SpringBoot+vue </tag>
            
            <tag> å‰åç«¯åˆ†ç¦» </tag>
            
            <tag> æ­£åˆ™è¡¨è¾¾å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ5-ç™»å½•ç³»ç»Ÿçš„é€»è¾‘</title>
      <link href="/2022/103116110.html"/>
      <url>/2022/103116110.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h2 id="ç™»å½•"><a class="header-anchor" href="#ç™»å½•">Â¶</a>ç™»å½•</h2><h3 id="ä¸€ã€"><a class="header-anchor" href="#ä¸€ã€">Â¶</a>ä¸€ã€</h3></font>]]></content>
      
      
      <categories>
          
          <category> å‰åç«¯åˆ†ç¦»webç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å®ç”¨å°å·¥å…· </tag>
            
            <tag> SpringBoot+vue </tag>
            
            <tag> å‰åç«¯åˆ†ç¦» </tag>
            
            <tag> æ­£åˆ™è¡¨è¾¾å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ4-è¡¨å•éªŒè¯åŠæ­£åˆ™è¡¨è¾¾å¼</title>
      <link href="/2022/102916109.html"/>
      <url>/2022/102916109.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h2 id="Quick-Start"><a class="header-anchor" href="#Quick-Start">Â¶</a>Quick Start</h2><h3 id="ä¸€ã€è¡¨å•éªŒè¯ä»£ç "><a class="header-anchor" href="#ä¸€ã€è¡¨å•éªŒè¯ä»£ç ">Â¶</a>ä¸€ã€è¡¨å•éªŒè¯ä»£ç </h3><h5 id="1-ã€å‰ç«¯ä»£ç "><a class="header-anchor" href="#1-ã€å‰ç«¯ä»£ç ">Â¶</a>(1)ã€å‰ç«¯ä»£ç </h5><p><img src="/2022/102916109/%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81html%E4%BB%A3%E7%A0%81.png" alt></p><h5 id="2-ã€å‰ç«¯é€»è¾‘ä»£ç "><a class="header-anchor" href="#2-ã€å‰ç«¯é€»è¾‘ä»£ç ">Â¶</a>(2)ã€å‰ç«¯é€»è¾‘ä»£ç </h5><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">"../../utils/request"</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"addAdmin"</span><span class="token punctuation">,</span>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//////////////////////////////////// è‡ªå®šä¹‰è¡¨å•æ ¡éªŒè§„åˆ™ //////////////////////////////////</span>        <span class="token keyword">const</span> <span class="token function-variable function">checkAge</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'å¹´é¾„ä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">// éªŒè¯æ˜¯æ•°å­—</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[0-9]*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥æ•°å­—å€¼'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">// éªŒè¯æ˜¯åˆç†çš„èŒƒå›´</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">120</span> <span class="token operator">||</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥åˆç†çš„å¹´é¾„èŒƒå›´'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">const</span> <span class="token function-variable function">checkPhone</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[1][3,4,5,6,7,8,9][0-9]&#123;9&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token comment">//////////////////////////////////// è‡ªå®šä¹‰è¡¨å•æ ¡éªŒè§„åˆ™ //////////////////////////////////</span>        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>            <span class="token literal-property property">addAdminForm</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token string">''</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token literal-property property">addAdminRules</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// ä¸è¡¨å•çš„propå±æ€§ç›¸å¯¹åº”</span>                <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token punctuation">[</span>                    <span class="token punctuation">&#123;</span><span class="token literal-property property">required</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span><span class="token string">'è¯·è¾“å…¥å§“å'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span><span class="token string">'blur'</span><span class="token punctuation">&#125;</span>                <span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">[</span>                    <span class="token punctuation">&#123;</span> <span class="token literal-property property">validator</span><span class="token operator">:</span> checkAge<span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">&#125;</span>                <span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token literal-property property">phone</span><span class="token operator">:</span><span class="token punctuation">[</span>                    <span class="token punctuation">&#123;</span> <span class="token literal-property property">validator</span><span class="token operator">:</span> checkPhone<span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'blur'</span> <span class="token punctuation">&#125;</span>                <span class="token punctuation">]</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span><span class="token string">'addUserRef'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">valid</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>                request<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/admin/save"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>addAdminForm<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">'200'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                        <span class="token keyword">this</span><span class="token punctuation">.</span>$notify<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'æ·»åŠ æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">this</span><span class="token punctuation">.</span>addAdminForm <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                        <span class="token keyword">this</span><span class="token punctuation">.</span>$notify<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p><a href="https://element.eleme.cn/#/zh-CN/component/form">å®˜ç½‘æ¡ˆä¾‹</a></p><h3 id="äºŒã€ç›¸å…³çš„æ­£åˆ™è¡¨è¾¾å¼"><a class="header-anchor" href="#äºŒã€ç›¸å…³çš„æ­£åˆ™è¡¨è¾¾å¼">Â¶</a>äºŒã€ç›¸å…³çš„æ­£åˆ™è¡¨è¾¾å¼</h3><pre class="language-javascript" data-language="javascript"><code class="language-javascript">è¯­æ³•ï¼š<span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">//:åœ¨jsä¸­è¡¨ç¤ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼  var regExp =/......./</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">^</span><span class="token operator">:</span>åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å¤´ä½ç½®    <span class="token literal-property property">$</span><span class="token operator">:</span>åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®<span class="token number">3</span>ï¼‰<span class="token punctuation">[</span><span class="token punctuation">]</span> åŒ¹é…æŒ‡å®šå­—ç¬¦ä¸²ä¸­çš„ä»¥ä¸ºå­—ç¬¦<span class="token number">4</span>ï¼‰<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> åŒ¹é…å­—æ•°   ä¾‹ï¼š<span class="token punctuation">&#123;</span>mï¼Œn<span class="token punctuation">&#125;</span>  åŒ¹é…<span class="token constant">M</span>åˆ°næ¬¡<span class="token number">5</span>ï¼‰ç‰¹æ®Šç¬¦å·ï¼š\d  åŒ¹é…ä¸€ä½æ•°å­—ï¼Œç›¸å½“äº<span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\<span class="token constant">D</span> åŒ¹é…ä»¥ä¸ºéæ•°å­—\w åŒ¹é…æ‰€æœ‰çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬æ•°å­— å­—æ¯ ä¸‹åˆ’çº¿\<span class="token constant">W</span> åŒ¹é…è´¹å­—ç¬¦  ï¼Œå¤„ç†å­—æ¯ æ•°å­— ä¸‹åˆ’çº¿ä¹‹å¤–çš„å­—ç¬¦<span class="token operator">*</span> åŒ¹é…<span class="token number">0</span>æ¬¡æˆ–è€…å¤šæ¬¡  ç›¸å½“äº<span class="token punctuation">[</span><span class="token number">0</span>ï¼Œ<span class="token punctuation">]</span><span class="token operator">+</span> åŒ¹é…<span class="token number">1</span>æ¬¡æˆ–è€…å¤šæ¬¡ ç›¸å½“äº<span class="token punctuation">[</span><span class="token number">1</span>ï¼Œ<span class="token punctuation">]</span>ï¼Ÿ åŒ¹é…<span class="token number">0</span>æ¬¡æˆ–è€…<span class="token number">1</span>æ¬¡ï¼Œç›¸å½“äº<span class="token punctuation">[</span><span class="token number">0</span>ï¼Œ<span class="token number">1</span><span class="token punctuation">]</span><span class="token number">1.</span> æ•°å­—ï¼š<span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span>$ <span class="token number">2.</span> nä½çš„æ•°å­—ï¼š<span class="token operator">^</span>\d<span class="token punctuation">&#123;</span>n<span class="token punctuation">&#125;</span>$ <span class="token number">3.</span> è‡³å°‘nä½çš„æ•°å­—ï¼š<span class="token operator">^</span>\d<span class="token punctuation">&#123;</span>n<span class="token punctuation">,</span><span class="token punctuation">&#125;</span>$ <span class="token number">4.</span> m<span class="token operator">-</span>nä½çš„æ•°å­—ï¼š<span class="token operator">^</span>\d<span class="token punctuation">&#123;</span>m<span class="token punctuation">,</span>n<span class="token punctuation">&#125;</span>$ <span class="token number">5.</span> é›¶å’Œéé›¶å¼€å¤´çš„æ•°å­—ï¼š<span class="token operator">^</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">)</span>$ <span class="token number">6.</span> éé›¶å¼€å¤´çš„æœ€å¤šå¸¦ä¸¤ä½å°æ•°çš„æ•°å­—ï¼š<span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">?</span>$ <span class="token number">7.</span> å¸¦<span class="token number">1</span><span class="token operator">-</span><span class="token number">2</span>ä½å°æ•°çš„æ­£æ•°æˆ–è´Ÿæ•°ï¼š<span class="token operator">^</span><span class="token punctuation">(</span>\<span class="token operator">-</span><span class="token punctuation">)</span><span class="token operator">?</span>\d<span class="token operator">+</span><span class="token punctuation">(</span>\<span class="token punctuation">.</span>\d<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">?</span>$ <span class="token number">8.</span> æ­£æ•°ã€è´Ÿæ•°ã€å’Œå°æ•°ï¼š<span class="token operator">^</span><span class="token punctuation">(</span>\<span class="token operator">-</span><span class="token operator">|</span>\<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">?</span>\d<span class="token operator">+</span><span class="token punctuation">(</span>\<span class="token punctuation">.</span>\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">?</span>$ <span class="token number">9.</span> æœ‰ä¸¤ä½å°æ•°çš„æ­£å®æ•°ï¼š<span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">?</span>$ <span class="token number">10.</span> æœ‰<span class="token number">1</span><span class="token operator">~</span><span class="token number">3</span>ä½å°æ•°çš„æ­£å®æ•°ï¼š<span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">?</span>$ <span class="token number">11.</span> éé›¶çš„æ­£æ•´æ•°ï¼š<span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d<span class="token operator">*</span>$ æˆ– <span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">&#125;</span>$ æˆ– <span class="token operator">^</span>\<span class="token operator">+</span><span class="token operator">?</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span>$ <span class="token number">12.</span> éé›¶çš„è´Ÿæ•´æ•°ï¼š<span class="token operator">^</span>\<span class="token operator">-</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span>"<span class="token operator">*</span>$ æˆ– <span class="token operator">^</span><span class="token operator">-</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d<span class="token operator">*</span>$<span class="token number">13.</span> éè´Ÿæ•´æ•°ï¼š<span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d<span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token number">0</span><span class="token punctuation">)</span>$<span class="token number">14.</span> éæ­£æ•´æ•°ï¼š<span class="token operator">^</span><span class="token operator">-</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d<span class="token operator">*</span><span class="token operator">|</span>0$ æˆ– <span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span>\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">)</span>$<span class="token number">15.</span> éè´Ÿæµ®ç‚¹æ•°ï¼š<span class="token operator">^</span>\d<span class="token operator">+</span><span class="token punctuation">(</span>\<span class="token punctuation">.</span>\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">?</span>$ æˆ– <span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d<span class="token operator">*</span>\<span class="token punctuation">.</span>\d<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span>\<span class="token punctuation">.</span>\d<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span><span class="token operator">?</span>\<span class="token number">.0</span><span class="token operator">+</span><span class="token operator">|</span>0$<span class="token number">16.</span> éæ­£æµ®ç‚¹æ•°ï¼š<span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span>\d<span class="token operator">+</span><span class="token punctuation">(</span>\<span class="token punctuation">.</span>\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">+</span><span class="token punctuation">(</span>\<span class="token number">.0</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">)</span><span class="token punctuation">)</span>$ æˆ– <span class="token operator">^</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d<span class="token operator">*</span>\<span class="token punctuation">.</span>\d<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span>\<span class="token punctuation">.</span>\d<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d<span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token number">0</span><span class="token operator">?</span>\<span class="token number">.0</span><span class="token operator">+</span><span class="token operator">|</span>0$<span class="token number">17.</span> æ­£æµ®ç‚¹æ•°ï¼š<span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d<span class="token operator">*</span>\<span class="token punctuation">.</span>\d<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span>\<span class="token punctuation">.</span>\d<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d<span class="token operator">*</span>$ æˆ– <span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span>\<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span>\<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span>$<span class="token number">18.</span> è´Ÿæµ®ç‚¹æ•°ï¼š<span class="token operator">^</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d<span class="token operator">*</span>\<span class="token punctuation">.</span>\d<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span>\<span class="token punctuation">.</span>\d<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d<span class="token operator">*</span><span class="token punctuation">)</span>$ æˆ– <span class="token operator">^</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span>\<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span>\<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>$<span class="token number">19.</span> æµ®ç‚¹æ•°ï¼š<span class="token operator">^</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token operator">?</span>\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">(</span>\<span class="token punctuation">.</span>\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">?</span>$ æˆ– <span class="token operator">^</span><span class="token operator">-</span><span class="token operator">?</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d<span class="token operator">*</span>\<span class="token punctuation">.</span>\d<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span>\<span class="token punctuation">.</span>\d<span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d<span class="token operator">*</span><span class="token operator">|</span><span class="token number">0</span><span class="token operator">?</span>\<span class="token number">.0</span><span class="token operator">+</span><span class="token operator">|</span><span class="token number">0</span><span class="token punctuation">)</span>$äºŒã€æ ¡éªŒå­—ç¬¦çš„è¡¨è¾¾å¼ <span class="token number">1.</span> æ±‰å­—ï¼š<span class="token operator">^</span><span class="token punctuation">[</span>\u4e00<span class="token operator">-</span>\u9fa5<span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span>$<span class="token number">2.</span> è‹±æ–‡å’Œæ•°å­—ï¼š<span class="token operator">^</span><span class="token punctuation">[</span><span class="token constant">A</span><span class="token operator">-</span>Za<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span>$ æˆ– <span class="token operator">^</span><span class="token punctuation">[</span><span class="token constant">A</span><span class="token operator">-</span>Za<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">&#125;</span>$<span class="token number">3.</span> é•¿åº¦ä¸º<span class="token number">3</span><span class="token operator">-</span><span class="token number">20</span>çš„æ‰€æœ‰å­—ç¬¦ï¼š<span class="token operator">^</span><span class="token punctuation">.</span><span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">&#125;</span>$<span class="token number">4.</span> ç”±<span class="token number">26</span>ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š<span class="token operator">^</span><span class="token punctuation">[</span><span class="token constant">A</span><span class="token operator">-</span>Za<span class="token operator">-</span>z<span class="token punctuation">]</span><span class="token operator">+</span>$<span class="token number">5.</span> ç”±<span class="token number">26</span>ä¸ªå¤§å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š<span class="token operator">^</span><span class="token punctuation">[</span><span class="token constant">A</span><span class="token operator">-</span><span class="token constant">Z</span><span class="token punctuation">]</span><span class="token operator">+</span>$<span class="token number">6.</span> ç”±<span class="token number">26</span>ä¸ªå°å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š<span class="token operator">^</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z<span class="token punctuation">]</span><span class="token operator">+</span>$<span class="token number">7.</span> ç”±æ•°å­—å’Œ<span class="token number">26</span>ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š<span class="token operator">^</span><span class="token punctuation">[</span><span class="token constant">A</span><span class="token operator">-</span>Za<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span>$<span class="token number">8.</span> ç”±æ•°å­—ã€<span class="token number">26</span>ä¸ªè‹±æ–‡å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼š<span class="token operator">^</span>\w<span class="token operator">+</span>$ æˆ– <span class="token operator">^</span>\w<span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">&#125;</span>$<span class="token number">9.</span> ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—åŒ…æ‹¬ä¸‹åˆ’çº¿ï¼š<span class="token operator">^</span><span class="token punctuation">[</span>\u4E00<span class="token operator">-</span>\u9FA5A<span class="token operator">-</span>Za<span class="token operator">-</span>z0<span class="token operator">-</span>9_<span class="token punctuation">]</span><span class="token operator">+</span>$<span class="token number">10.</span> ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ä½†ä¸åŒ…æ‹¬ä¸‹åˆ’çº¿ç­‰ç¬¦å·ï¼š<span class="token operator">^</span><span class="token punctuation">[</span>\u4E00<span class="token operator">-</span>\u9FA5A<span class="token operator">-</span>Za<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span>$ æˆ– <span class="token operator">^</span><span class="token punctuation">[</span>\u4E00<span class="token operator">-</span>\u9FA5A<span class="token operator">-</span>Za<span class="token operator">-</span>z0<span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">&#125;</span>$<span class="token number">11.</span> å¯ä»¥è¾“å…¥å«æœ‰<span class="token operator">^</span><span class="token operator">%</span><span class="token operator">&amp;</span><span class="token string">',;=?$\"ç­‰å­—ç¬¦ï¼š[^%&amp;'</span><span class="token punctuation">,</span><span class="token punctuation">;</span><span class="token operator">=</span><span class="token operator">?</span>$\x22<span class="token punctuation">]</span><span class="token operator">+</span> <span class="token number">12</span> ç¦æ­¢è¾“å…¥å«æœ‰<span class="token operator">~</span>çš„å­—ç¬¦ï¼š<span class="token punctuation">[</span><span class="token operator">^</span><span class="token operator">~</span>\x22<span class="token punctuation">]</span><span class="token operator">+</span>ä¸‰ã€ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼<span class="token number">1.</span> Emailåœ°å€ï¼š<span class="token operator">^</span>\w<span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token operator">+</span><span class="token punctuation">.</span><span class="token punctuation">]</span>\w<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">*</span>@\w<span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">.</span><span class="token punctuation">]</span>\w<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">*</span>\<span class="token punctuation">.</span>\w<span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token punctuation">.</span><span class="token punctuation">]</span>\w<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">*</span>$<span class="token number">2.</span> åŸŸåï¼š<span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span><span class="token constant">Z0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span>a<span class="token operator">-</span>zA<span class="token operator">-</span><span class="token constant">Z0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">62</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;)+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token operator">?</span><span class="token number">3.</span> InternetURLï¼š<span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span>z<span class="token punctuation">]</span><span class="token operator">+</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token punctuation">[</span><span class="token operator">^</span>\s<span class="token punctuation">]</span><span class="token operator">*</span> æˆ– <span class="token operator">^</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\w<span class="token operator">-</span><span class="token punctuation">]</span><span class="token operator">+</span>\<span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">[</span>\w<span class="token operator">-</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">/</span><span class="token punctuation">[</span>\w<span class="token operator">-</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token operator">?</span><span class="token operator">%</span><span class="token operator">&amp;=</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">?</span>$<span class="token number">4.</span> æ‰‹æœºå·ç ï¼š<span class="token operator">^</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">14</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token operator">|</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">15</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">|</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span><span class="token number">6</span><span class="token operator">|</span><span class="token number">7</span><span class="token operator">|</span><span class="token number">8</span><span class="token operator">|</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">18</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">|</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span><span class="token number">3</span><span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span><span class="token number">6</span><span class="token operator">|</span><span class="token number">7</span><span class="token operator">|</span><span class="token number">8</span><span class="token operator">|</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\d<span class="token punctuation">&#123;</span><span class="token number">8</span><span class="token punctuation">&#125;</span>$<span class="token number">5.</span> <span class="token function">ç”µè¯å·ç </span><span class="token punctuation">(</span><span class="token string">"XXX-XXXXXXX"</span>ã€<span class="token string">"XXXX-XXXXXXXX"</span>ã€<span class="token string">"XXX-XXXXXXX"</span>ã€<span class="token string">"XXX-XXXXXXXX"</span>ã€<span class="token string">"XXXXXXX"</span>å’Œ"<span class="token constant">XXXXXXXX</span><span class="token punctuation">)</span>ï¼š<span class="token operator">^</span><span class="token punctuation">(</span>\<span class="token punctuation">(</span>\d<span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">-</span><span class="token punctuation">)</span><span class="token operator">|</span>\d<span class="token punctuation">&#123;</span><span class="token number">3.4</span><span class="token punctuation">&#125;</span><span class="token operator">-</span><span class="token punctuation">)</span><span class="token operator">?</span>\d<span class="token punctuation">&#123;</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">&#125;</span>$ <span class="token number">6.</span> <span class="token function">å›½å†…ç”µè¯å·ç </span><span class="token punctuation">(</span><span class="token number">0511</span><span class="token operator">-</span><span class="token number">4405222</span>ã€<span class="token number">021</span><span class="token operator">-</span><span class="token number">87888822</span><span class="token punctuation">)</span>ï¼š\d<span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token operator">-</span>\d<span class="token punctuation">&#123;</span><span class="token number">8</span><span class="token punctuation">&#125;</span><span class="token operator">|</span>\d<span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">-</span>\d<span class="token punctuation">&#123;</span><span class="token number">7</span><span class="token punctuation">&#125;</span><span class="token number">7.</span> <span class="token function">èº«ä»½è¯å·</span><span class="token punctuation">(</span><span class="token number">15</span>ä½ã€<span class="token number">18</span>ä½æ•°å­—<span class="token punctuation">)</span>ï¼š<span class="token operator">^</span>\d<span class="token punctuation">&#123;</span><span class="token number">15</span><span class="token punctuation">&#125;</span><span class="token operator">|</span>\d<span class="token punctuation">&#123;</span><span class="token number">18</span><span class="token punctuation">&#125;</span>$<span class="token number">8.</span> <span class="token function">çŸ­èº«ä»½è¯å·ç </span><span class="token punctuation">(</span>æ•°å­—ã€å­—æ¯xç»“å°¾<span class="token punctuation">)</span>ï¼š<span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span>x<span class="token operator">|</span><span class="token constant">X</span><span class="token punctuation">)</span><span class="token operator">?</span>$ æˆ– <span class="token operator">^</span>\d<span class="token punctuation">&#123;</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">&#125;</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span>9x<span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">&#125;</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span>9X<span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">&#125;</span><span class="token operator">?</span>$<span class="token number">9.</span> <span class="token function">å¸å·æ˜¯å¦åˆæ³•</span><span class="token punctuation">(</span>å­—æ¯å¼€å¤´ï¼Œå…è®¸<span class="token number">5</span><span class="token operator">-</span><span class="token number">16</span>å­—èŠ‚ï¼Œå…è®¸å­—æ¯æ•°å­—ä¸‹åˆ’çº¿<span class="token punctuation">)</span>ï¼š<span class="token operator">^</span><span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span><span class="token constant">Z</span><span class="token punctuation">]</span><span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span><span class="token constant">Z0</span><span class="token operator">-</span>9_<span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">&#125;</span>$<span class="token number">10.</span> <span class="token function">å¯†ç </span><span class="token punctuation">(</span>ä»¥å­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨<span class="token number">6</span><span class="token operator">~</span><span class="token number">18</span>ä¹‹é—´ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿<span class="token punctuation">)</span>ï¼š<span class="token operator">^</span><span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span><span class="token constant">Z</span><span class="token punctuation">]</span>\w<span class="token punctuation">&#123;</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">&#125;</span>$<span class="token number">11.</span> <span class="token function">å¼ºå¯†ç </span><span class="token punctuation">(</span>å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—çš„ç»„åˆï¼Œä¸èƒ½ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ï¼Œé•¿åº¦åœ¨<span class="token number">8</span><span class="token operator">-</span><span class="token number">10</span>ä¹‹é—´<span class="token punctuation">)</span>ï¼š<span class="token operator">^</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">=</span><span class="token punctuation">.</span><span class="token operator">*</span>\d<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">=</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">[</span>a<span class="token operator">-</span>z<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">=</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token constant">A</span><span class="token operator">-</span><span class="token constant">Z</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">&#123;</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">&#125;</span>$<span class="token number">12.</span> æ—¥æœŸæ ¼å¼ï¼š<span class="token operator">^</span>\d<span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">-</span>\d<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token operator">-</span>\d<span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token number">13.</span> <span class="token function">ä¸€å¹´çš„12ä¸ªæœˆ</span><span class="token punctuation">(</span><span class="token number">01</span>ï½<span class="token number">09</span>å’Œ<span class="token number">1</span>ï½<span class="token number">12</span><span class="token punctuation">)</span>ï¼š<span class="token operator">^</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">?</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>$<span class="token number">14.</span> <span class="token function">ä¸€ä¸ªæœˆçš„31å¤©</span><span class="token punctuation">(</span><span class="token number">01</span>ï½<span class="token number">09</span>å’Œ<span class="token number">1</span>ï½<span class="token number">31</span><span class="token punctuation">)</span>ï¼š<span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">?</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">|</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token number">30</span><span class="token operator">|</span><span class="token number">31</span><span class="token punctuation">)</span>$<span class="token number">15.</span> é’±çš„è¾“å…¥æ ¼å¼ï¼š<span class="token number">16.</span> <span class="token number">1.</span><span class="token literal-property property">æœ‰å››ç§é’±çš„è¡¨ç¤ºå½¢å¼æˆ‘ä»¬å¯ä»¥æ¥å—</span><span class="token operator">:</span><span class="token string">"10000.00"</span> å’Œ <span class="token string">"10,000.00"</span><span class="token punctuation">,</span> å’Œæ²¡æœ‰ <span class="token string">"åˆ†"</span> çš„ <span class="token string">"10000"</span> å’Œ <span class="token string">"10,000"</span>ï¼š<span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span>$ <span class="token number">17.</span> <span class="token number">2.</span>è¿™è¡¨ç¤ºä»»æ„ä¸€ä¸ªä¸ä»¥<span class="token number">0</span>å¼€å¤´çš„æ•°å­—<span class="token punctuation">,</span>ä½†æ˜¯<span class="token punctuation">,</span>è¿™ä¹Ÿæ„å‘³ç€ä¸€ä¸ªå­—ç¬¦<span class="token string">"0"</span>ä¸é€šè¿‡<span class="token punctuation">,</span>æ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨ä¸‹é¢çš„å½¢å¼ï¼š<span class="token operator">^</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">)</span>$ <span class="token number">18.</span> <span class="token number">3.</span>ä¸€ä¸ª<span class="token number">0</span>æˆ–è€…ä¸€ä¸ªä¸ä»¥<span class="token number">0</span>å¼€å¤´çš„æ•°å­—<span class="token punctuation">.</span>æˆ‘ä»¬è¿˜å¯ä»¥å…è®¸å¼€å¤´æœ‰ä¸€ä¸ªè´Ÿå·ï¼š<span class="token operator">^</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">|</span><span class="token operator">-</span><span class="token operator">?</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">)</span>$ <span class="token number">19.</span> <span class="token number">4.</span>è¿™è¡¨ç¤ºä¸€ä¸ª<span class="token number">0</span>æˆ–è€…ä¸€ä¸ªå¯èƒ½ä¸ºè´Ÿçš„å¼€å¤´ä¸ä¸º<span class="token number">0</span>çš„æ•°å­—<span class="token punctuation">.</span>è®©ç”¨æˆ·ä»¥<span class="token number">0</span>å¼€å¤´å¥½äº†<span class="token punctuation">.</span>æŠŠè´Ÿå·çš„ä¹Ÿå»æ‰<span class="token punctuation">,</span>å› ä¸ºé’±æ€»ä¸èƒ½æ˜¯è´Ÿçš„å§<span class="token punctuation">.</span>ä¸‹é¢æˆ‘ä»¬è¦åŠ çš„æ˜¯è¯´æ˜å¯èƒ½çš„å°æ•°éƒ¨åˆ†ï¼š<span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">?</span>$ <span class="token number">20.</span> <span class="token number">5.</span>å¿…é¡»è¯´æ˜çš„æ˜¯<span class="token punctuation">,</span>å°æ•°ç‚¹åé¢è‡³å°‘åº”è¯¥æœ‰<span class="token number">1</span>ä½æ•°<span class="token punctuation">,</span>æ‰€ä»¥<span class="token string">"10."</span>æ˜¯ä¸é€šè¿‡çš„<span class="token punctuation">,</span>ä½†æ˜¯ <span class="token string">"10"</span> å’Œ <span class="token string">"10.2"</span> æ˜¯é€šè¿‡çš„ï¼š<span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">?</span>$ <span class="token number">21.</span> <span class="token number">6.</span>è¿™æ ·æˆ‘ä»¬è§„å®šå°æ•°ç‚¹åé¢å¿…é¡»æœ‰ä¸¤ä½<span class="token punctuation">,</span>å¦‚æœä½ è®¤ä¸ºå¤ªè‹›åˆ»äº†<span class="token punctuation">,</span>å¯ä»¥è¿™æ ·ï¼š<span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">?</span>$ <span class="token number">22.</span> <span class="token number">7.</span>è¿™æ ·å°±å…è®¸ç”¨æˆ·åªå†™ä¸€ä½å°æ•°<span class="token punctuation">.</span>ä¸‹é¢æˆ‘ä»¬è¯¥è€ƒè™‘æ•°å­—ä¸­çš„é€—å·äº†<span class="token punctuation">,</span>æˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼š<span class="token operator">^</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">?</span>$ <span class="token number">23</span> <span class="token number">8.1</span>åˆ°<span class="token number">3</span>ä¸ªæ•°å­—<span class="token punctuation">,</span>åé¢è·Ÿç€ä»»æ„ä¸ª é€—å·<span class="token operator">+</span><span class="token number">3</span>ä¸ªæ•°å­—<span class="token punctuation">,</span>é€—å·æˆä¸ºå¯é€‰<span class="token punctuation">,</span>è€Œä¸æ˜¯å¿…é¡»ï¼š<span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">?</span>$ <span class="token number">24.</span> å¤‡æ³¨ï¼šè¿™å°±æ˜¯æœ€ç»ˆç»“æœäº†<span class="token punctuation">,</span>åˆ«å¿˜äº†<span class="token string">"+"</span>å¯ä»¥ç”¨<span class="token string">"*"</span><span class="token function">æ›¿ä»£å¦‚æœä½ è§‰å¾—ç©ºå­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ¥å—çš„è¯</span><span class="token punctuation">(</span>å¥‡æ€ª<span class="token punctuation">,</span>ä¸ºä»€ä¹ˆ<span class="token operator">?</span><span class="token punctuation">)</span>æœ€å<span class="token punctuation">,</span>åˆ«å¿˜äº†åœ¨ç”¨å‡½æ•°æ—¶å»æ‰å»æ‰é‚£ä¸ªåæ–œæ <span class="token punctuation">,</span>ä¸€èˆ¬çš„é”™è¯¯éƒ½åœ¨è¿™é‡Œ <span class="token number">25.</span> xmlæ–‡ä»¶ï¼š<span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span><span class="token constant">Z</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token operator">-</span><span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span><span class="token constant">Z0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">+</span>\\<span class="token punctuation">.</span><span class="token punctuation">[</span>x<span class="token operator">|</span><span class="token constant">X</span><span class="token punctuation">]</span><span class="token punctuation">[</span>m<span class="token operator">|</span><span class="token constant">M</span><span class="token punctuation">]</span><span class="token punctuation">[</span>l<span class="token operator">|</span><span class="token constant">L</span><span class="token punctuation">]</span>$ <span class="token number">26.</span> ä¸­æ–‡å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š<span class="token punctuation">[</span>\u4e00<span class="token operator">-</span>\u9fa5<span class="token punctuation">]</span> <span class="token number">27.</span> åŒå­—èŠ‚å­—ç¬¦ï¼š<span class="token punctuation">[</span><span class="token operator">^</span>\x00<span class="token operator">-</span>\xff<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token function">åŒ…æ‹¬æ±‰å­—åœ¨å†…ï¼Œå¯ä»¥ç”¨æ¥è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦</span><span class="token punctuation">(</span>ä¸€ä¸ªåŒå­—èŠ‚å­—ç¬¦é•¿åº¦è®¡<span class="token number">2</span>ï¼Œ<span class="token constant">ASCII</span>å­—ç¬¦è®¡<span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token number">28.</span> ç©ºç™½è¡Œçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\n\s<span class="token operator">*</span>\<span class="token function">r</span> <span class="token punctuation">(</span>å¯ä»¥ç”¨æ¥åˆ é™¤ç©ºç™½è¡Œ<span class="token punctuation">)</span> <span class="token number">29.</span> <span class="token constant">HTML</span>æ ‡è®°çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š<span class="token operator">&lt;</span><span class="token punctuation">(</span>\<span class="token constant">S</span><span class="token operator">*</span><span class="token operator">?</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">^</span><span class="token operator">></span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">?</span><span class="token operator">&lt;</span><span class="token operator">/</span>\<span class="token number">1</span><span class="token operator">></span><span class="token operator">|</span><span class="token operator">&lt;</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">?</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token punctuation">(</span>ç½‘ä¸Šæµä¼ çš„ç‰ˆæœ¬å¤ªç³Ÿç³•ï¼Œä¸Šé¢è¿™ä¸ªä¹Ÿä»…ä»…èƒ½éƒ¨åˆ†ï¼Œå¯¹äºå¤æ‚çš„åµŒå¥—æ ‡è®°ä¾æ—§æ— èƒ½ä¸ºåŠ›<span class="token punctuation">)</span> <span class="token number">30.</span> é¦–å°¾ç©ºç™½å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š<span class="token operator">^</span>\s<span class="token operator">*</span><span class="token operator">|</span>\s<span class="token operator">*</span><span class="token function">$æˆ–</span><span class="token punctuation">(</span><span class="token operator">^</span>\s<span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span>\s<span class="token operator">*</span>$<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">å¯ä»¥ç”¨æ¥åˆ é™¤è¡Œé¦–è¡Œå°¾çš„ç©ºç™½å­—ç¬¦</span><span class="token punctuation">(</span>åŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰<span class="token punctuation">)</span>ï¼Œéå¸¸æœ‰ç”¨çš„è¡¨è¾¾å¼<span class="token punctuation">)</span> <span class="token number">31.</span> è…¾è®¯<span class="token constant">QQ</span>å·ï¼š<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span> <span class="token punctuation">(</span>è…¾è®¯<span class="token constant">QQ</span>å·ä»<span class="token number">10000</span>å¼€å§‹<span class="token punctuation">)</span> <span class="token number">32.</span> ä¸­å›½é‚®æ”¿ç¼–ç ï¼š<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>\d<span class="token punctuation">&#123;</span><span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">!</span>\d<span class="token punctuation">)</span> <span class="token punctuation">(</span>ä¸­å›½é‚®æ”¿ç¼–ç ä¸º<span class="token number">6</span>ä½æ•°å­—<span class="token punctuation">)</span> <span class="token number">33.</span> <span class="token constant">IP</span>åœ°å€ï¼š\d<span class="token operator">+</span>\<span class="token punctuation">.</span>\d<span class="token operator">+</span>\<span class="token punctuation">.</span>\d<span class="token operator">+</span>\<span class="token punctuation">.</span>\d<span class="token operator">+</span> <span class="token punctuation">(</span>æå–<span class="token constant">IP</span>åœ°å€æ—¶æœ‰ç”¨<span class="token punctuation">)</span> <span class="token number">34.</span> <span class="token constant">IP</span><span class="token function">åœ°å€ï¼š</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span><span class="token number">25</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">2</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">]</span>\\d<span class="token operator">|</span><span class="token punctuation">[</span><span class="token number">01</span><span class="token punctuation">]</span><span class="token operator">?</span>\\d<span class="token operator">?</span>\\d<span class="token punctuation">)</span>\\<span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span><span class="token number">25</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">2</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">]</span>\\d<span class="token operator">|</span><span class="token punctuation">[</span><span class="token number">01</span><span class="token punctuation">]</span><span class="token operator">?</span>\\d<span class="token operator">?</span>\\d<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p><a href="https://www.runoob.com/regexp/regexp-syntax.html">æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•</a></p></font>]]></content>
      
      
      <categories>
          
          <category> å‰åç«¯åˆ†ç¦»webç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å®ç”¨å°å·¥å…· </tag>
            
            <tag> SpringBoot+vue </tag>
            
            <tag> å‰åç«¯åˆ†ç¦» </tag>
            
            <tag> æ­£åˆ™è¡¨è¾¾å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ3-å®ç°åˆ†é¡µæŸ¥è¯¢çš„åŠŸèƒ½</title>
      <link href="/2022/102816108.html"/>
      <url>/2022/102816108.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h2 id="Quick-Start"><a class="header-anchor" href="#Quick-Start">Â¶</a>Quick Start</h2><h3 id="ä¸€ã€åç«¯å®Œæˆç›¸å…³çš„é…ç½®"><a class="header-anchor" href="#ä¸€ã€åç«¯å®Œæˆç›¸å…³çš„é…ç½®">Â¶</a>ä¸€ã€åç«¯å®Œæˆç›¸å…³çš„é…ç½®</h3><h5 id="1-ã€å®‰è£…pageHelperçš„ä¾èµ–"><a class="header-anchor" href="#1-ã€å®‰è£…pageHelperçš„ä¾èµ–">Â¶</a>(1)ã€å®‰è£…pageHelperçš„ä¾èµ–</h5><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.github.pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>pagehelper-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.4.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p><img src="/2022/102816108/pageHelper%E4%BE%9D%E8%B5%96.png" alt></p><h5 id="2-ã€ç›¸å…³ä»£ç "><a class="header-anchor" href="#2-ã€ç›¸å…³ä»£ç ">Â¶</a>(2)ã€ç›¸å…³ä»£ç </h5><p>UserController:</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token comment">// ç¼–å†™åˆ†é¡µæŸ¥è¯¢çš„åŠŸèƒ½</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/page"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token class-name">UserPage</span><span class="token punctuation">(</span><span class="token class-name">UserPageRequest</span> userPageRequest<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>userService<span class="token punctuation">.</span><span class="token function">getUserPage</span><span class="token punctuation">(</span>userPageRequest<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>UserService:</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserService</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token function">getUsersList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åˆ†é¡µæŸ¥è¯¢user</span>    <span class="token class-name">Object</span> <span class="token function">getUserPage</span><span class="token punctuation">(</span><span class="token class-name">UserPageRequest</span> userPageRequest<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>UserServiceImpl:</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">IUserService</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">UserMapper</span> userMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token function">getUsersList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name"><span class="token namespace">userMapper<span class="token punctuation">.</span></span>UsersList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// åˆ†é¡µæŸ¥è¯¢ä»¥åŠæ¡ä»¶æŸ¥è¯¢</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getUserPage</span><span class="token punctuation">(</span><span class="token class-name">UserPageRequest</span> userPageRequest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å†å°†å‚æ•°è¿›è¡Œä¼ é€’åˆ°mapperå½“ä¸­è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ é‡ç‚¹ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span>        <span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span>userPageRequest<span class="token punctuation">.</span><span class="token function">getPageNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> userPageRequest<span class="token punctuation">.</span><span class="token function">getPageSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> users <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectUserByCondition</span><span class="token punctuation">(</span>userPageRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PageInfo</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>UserMapper:</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">&#123;</span><span class="token comment">//    @Select("select * from user")</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token class-name">UsersList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// é€šè¿‡å‚æ•°è¿›è¡Œæ¡ä»¶æŸ¥è¯¢ï¼šå¹¶ä¸”è¿”å›åˆ†é¡µçš„æ•ˆæœ</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token function">selectUserByCondition</span><span class="token punctuation">(</span><span class="token class-name">UserPageRequest</span> userPageRequest<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>User.xml:</p><p><img src="/2022/102816108/%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2xml.png" alt></p><h3 id="äºŒã€å‰ç«¯ä»£ç "><a class="header-anchor" href="#äºŒã€å‰ç«¯ä»£ç ">Â¶</a>äºŒã€å‰ç«¯ä»£ç </h3><h5 id="1-ã€åˆ†é¡µæ’ä»¶çš„ä»£ç "><a class="header-anchor" href="#1-ã€åˆ†é¡µæ’ä»¶çš„ä»£ç ">Â¶</a>(1)ã€åˆ†é¡µæ’ä»¶çš„ä»£ç </h5><p><img src="/2022/102816108/%E5%89%8D%E7%AB%AF%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6.png" alt></p><h5 id="2-ã€å¤„ç†å˜åŒ–å‡½æ•°çš„ä»£ç "><a class="header-anchor" href="#2-ã€å¤„ç†å˜åŒ–å‡½æ•°çš„ä»£ç ">Â¶</a>(2)ã€å¤„ç†å˜åŒ–å‡½æ•°çš„ä»£ç </h5><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// fetch("http://localhost:9090/user/list").then(res => res.json()).then(res => &#123;</span>    <span class="token comment">//   console.log(res);</span>    <span class="token comment">//   this.tableData = res;</span>    <span class="token comment">// &#125;)</span>    request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/user/page"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>        <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>params        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">'200'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>tableData <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>total <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>total<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token comment">// é‡ç½®å‡½æ•°ï¼šå°†å„ç§å‚æ•°ç½®ä¸ºåˆå§‹å€¼åé‡æ–°åŠ è½½</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>params <span class="token operator">=</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token literal-property property">pageSize</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>    <span class="token literal-property property">pageNum</span><span class="token operator">:</span> <span class="token number">1</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token comment">// åˆ†é¡µæ¡ä»¶çš„ç›‘è§†å‡½æ•°</span><span class="token function">handleSizeChange</span><span class="token punctuation">(</span><span class="token parameter">pageSize</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// console.log("å¤šå°‘æ¡æ¯é¡µå‘ç”Ÿå˜åŒ–");</span>    <span class="token comment">// console.log(pageSize);</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>params<span class="token punctuation">.</span>pageSize <span class="token operator">=</span> pageSize<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token function">handleCurrentChange</span><span class="token punctuation">(</span><span class="token parameter">pageNum</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">// console.log("å‰å¾€ç¬¬å‡ é¡µå‘ç”Ÿå˜åŒ–");</span>    <span class="token comment">// console.log(pageNum);</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>params<span class="token punctuation">.</span>pageNum <span class="token operator">=</span> pageNum<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p><img src="/2022/102816108/%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C.png" alt></p><p><a href="https://www.bilibili.com/video/BV12Y4y1N7Sw/?p=4&amp;spm_id_from=pageDriver&amp;vd_source=0f50d0008f8b836aa3258f634d65d48e">è§†é¢‘æ•™ç¨‹</a></p></font>]]></content>
      
      
      <categories>
          
          <category> å‰åç«¯åˆ†ç¦»webç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot+vue </tag>
            
            <tag> å‰åç«¯åˆ†ç¦» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ2-åˆ›å»ºspringbootåç«¯é¡¹ç›®</title>
      <link href="/2022/102816107.html"/>
      <url>/2022/102816107.html</url>
      
        <content type="html"><![CDATA[<h2 id="Quick-Start"><a class="header-anchor" href="#Quick-Start">Â¶</a>Quick Start</h2><h3 id="ä¸€ã€åˆ›å»ºspringbootåç«¯é¡¹ç›®"><a class="header-anchor" href="#ä¸€ã€åˆ›å»ºspringbootåç«¯é¡¹ç›®">Â¶</a>ä¸€ã€åˆ›å»ºspringbootåç«¯é¡¹ç›®</h3><p>æ ¹æ®springbootå®˜ç½‘æˆ–ideaåˆ›å»ºspringbooté¡¹ç›®ï¼Œè¿™ä¸æœ‰æ‰‹å°±è¡ŒğŸ˜…</p><h3 id="äºŒã€å®Œæˆç›¸å…³çš„é…ç½®"><a class="header-anchor" href="#äºŒã€å®Œæˆç›¸å…³çš„é…ç½®">Â¶</a>äºŒã€å®Œæˆç›¸å…³çš„é…ç½®</h3><h5 id="1-ã€æ·»åŠ ç›¸å…³çš„ä¾èµ–é¡¹ï¼Œè¿™é‡Œåšä¸€ä¸ªæ€»ç»“ï¼ˆå·æ‡’ï¼Œä»¥åç›´æ¥æ¥ç”¨å°±è¡Œäº†"><a class="header-anchor" href="#1-ã€æ·»åŠ ç›¸å…³çš„ä¾èµ–é¡¹ï¼Œè¿™é‡Œåšä¸€ä¸ªæ€»ç»“ï¼ˆå·æ‡’ï¼Œä»¥åç›´æ¥æ¥ç”¨å°±è¡Œäº†">Â¶</a>(1)ã€æ·»åŠ ç›¸å…³çš„ä¾èµ–é¡¹ï¼Œè¿™é‡Œåšä¸€ä¸ªæ€»ç»“ï¼ˆå·æ‡’ï¼Œä»¥åç›´æ¥æ¥ç”¨å°±è¡Œäº†</h5><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--mysqlé©±åŠ¨--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.1.47<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- log4jæ—¥å¿— --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- lombok --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.18.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><h5 id="2-ã€springbootè¦è¿è¡Œèµ·æ¥ï¼Œéœ€è¦å®Œæˆæ•°æ®åº“çš„é…ç½®"><a class="header-anchor" href="#2-ã€springbootè¦è¿è¡Œèµ·æ¥ï¼Œéœ€è¦å®Œæˆæ•°æ®åº“çš„é…ç½®">Â¶</a>(2)ã€springbootè¦è¿è¡Œèµ·æ¥ï¼Œéœ€è¦å®Œæˆæ•°æ®åº“çš„é…ç½®</h5><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9090</span><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/library<span class="token punctuation">-</span>managment    <span class="token key atrule">username</span><span class="token punctuation">:</span> root    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">"0613"</span></code></pre><pre class="language-protityes" data-language="protityes"><code class="language-protityes">server.port&#x3D;8080</code></pre><h3 id="ä¸‰ã€å®ŒæˆspringbootæŸ¥å‡ºæ•°æ®åº“å½“ä¸­çš„æ•°æ®"><a class="header-anchor" href="#ä¸‰ã€å®ŒæˆspringbootæŸ¥å‡ºæ•°æ®åº“å½“ä¸­çš„æ•°æ®">Â¶</a>ä¸‰ã€å®ŒæˆspringbootæŸ¥å‡ºæ•°æ®åº“å½“ä¸­çš„æ•°æ®</h3><h5 id="1-ã€åç«¯ä»£ç ç»“æ„"><a class="header-anchor" href="#1-ã€åç«¯ä»£ç ç»“æ„">Â¶</a>(1)ã€åç«¯ä»£ç ç»“æ„</h5><p><img src="/2022/102816107/%E5%90%8E%E7%AB%AF%E7%BB%93%E6%9E%84.png" alt></p><h5 id="2-ã€æ•°æ®åº“è¡¨ç»“æ„åŠå†…å®¹"><a class="header-anchor" href="#2-ã€æ•°æ®åº“è¡¨ç»“æ„åŠå†…å®¹">Â¶</a>(2)ã€æ•°æ®åº“è¡¨ç»“æ„åŠå†…å®¹</h5><p><img src="/2022/102816107/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%93%E6%9E%84.png" alt></p><h5 id="3-ã€springbootç›¸å…³ä»£ç "><a class="header-anchor" href="#3-ã€springbootç›¸å…³ä»£ç ">Â¶</a>(3)ã€springbootç›¸å…³ä»£ç </h5><p>Userå®ä½“ç±»ä»£ç </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> sex<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> phone<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>UserControllerä»£ç </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@CrossOrigin</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">IUserService</span> userService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/list"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">getUsersList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><p>UserServiceä»£ç </p><pre class="language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserService</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token function">getUsersList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><p>UserServiceImpl</p><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">IUserService</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">UserMapper</span> userMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> <span class="token function">getUsersList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name"><span class="token namespace">userMapper<span class="token punctuation">.</span></span>UsersList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="4-ã€å¯åŠ¨é¡¹ç›®ï¼Œåœ¨http-localhost-9090-user-list"><a class="header-anchor" href="#4-ã€å¯åŠ¨é¡¹ç›®ï¼Œåœ¨http-localhost-9090-user-list">Â¶</a>(4)ã€å¯åŠ¨é¡¹ç›®ï¼Œåœ¨http://localhost:9090/user/list</h5><p>åœ¨æµè§ˆå™¨ä¸­å³å¯çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š<br><img src="/2022/102816107/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C.png" alt></p><h5 id="5-ã€å‰ç«¯ä½¿ç”¨fetchå®Œæˆæ•°æ®çš„è½¬åŒ–"><a class="header-anchor" href="#5-ã€å‰ç«¯ä½¿ç”¨fetchå®Œæˆæ•°æ®çš„è½¬åŒ–">Â¶</a>(5)ã€å‰ç«¯ä½¿ç”¨fetchå®Œæˆæ•°æ®çš„è½¬åŒ–</h5><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"http://localhost:9090/user/list"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>tableData <span class="token operator">=</span> res<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre><p>å‰ç«¯æ•ˆæœå¦‚å›¾:<br><img src="/2022/102816107/%E5%89%8D%E7%AB%AF%E6%95%88%E6%9E%9C%E5%9B%BE.png" alt></p><h5 id="6-ã€ä½¿ç”¨mybatisï¼š-https-mybatis-net-cn"><a class="header-anchor" href="#6-ã€ä½¿ç”¨mybatisï¼š-https-mybatis-net-cn">Â¶</a>(6)ã€ä½¿ç”¨mybatisï¼š <a href="https://mybatis.net.cn/">https://mybatis.net.cn/</a></h5><p>åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmapperçš„ç›®å½•ï¼Œåˆ›å»ºUser.xmlï¼Œç¼–å†™SQLè¯­å¥</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bin.library_back.mapper.UserMapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UsersList<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bin.library_back.entity.User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        select * from user    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">></span></span></code></pre><p>å…¶æ¬¡åœ¨é…ç½®æ–‡ä»¶å½“ä¸­ç¼–å†™mybatisçš„é…ç½®</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># å®šä¹‰mapperçš„è·¯å¾„</span><span class="token key atrule">mybatis</span><span class="token punctuation">:</span>  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mapper/<span class="token important">*.xml</span></code></pre><p>å®Œæˆä¸Šè¿°ç›¸åŒçš„æµ‹è¯•æ•ˆæœ</p><h5 id="7-ã€ç»Ÿä¸€è¿”å›ç»“æœResult-java"><a class="header-anchor" href="#7-ã€ç»Ÿä¸€è¿”å›ç»“æœResult-java">Â¶</a>(7)ã€ç»Ÿä¸€è¿”å›ç»“æœResult.java</h5><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Result</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">SUCCESS_CODE</span> <span class="token operator">=</span> <span class="token string">"200"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">ERROR_CODE</span> <span class="token operator">=</span> <span class="token string">"-1"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> code<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Object</span> data<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>    <span class="token comment">// è¿”å›æˆåŠŸæˆ–è€…å¤±è´¥çš„æ–¹æ³•</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">Result</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        result<span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span><span class="token constant">SUCCESS_CODE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token class-name">Object</span> data<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">Result</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        result<span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span><span class="token constant">SUCCESS_CODE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        result<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">Result</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        result<span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span><span class="token constant">ERROR_CODE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        result<span class="token punctuation">.</span><span class="token function">setMsg</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h5 id="8-ã€è§£å†³è·¨åŸŸé—®é¢˜ï¼ˆæœ€ç®€å•ï¼šåœ¨Controllerçš„æ–¹æ³•ä¸ŠåŠ ä¸Š-CrossOriginçš„æ³¨è§£ï¼‰"><a class="header-anchor" href="#8-ã€è§£å†³è·¨åŸŸé—®é¢˜ï¼ˆæœ€ç®€å•ï¼šåœ¨Controllerçš„æ–¹æ³•ä¸ŠåŠ ä¸Š-CrossOriginçš„æ³¨è§£ï¼‰">Â¶</a>(8)ã€è§£å†³è·¨åŸŸé—®é¢˜ï¼ˆæœ€ç®€å•ï¼šåœ¨Controllerçš„æ–¹æ³•ä¸ŠåŠ ä¸Š@CrossOriginçš„æ³¨è§£ï¼‰</h5><pre class="language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@CrossOrigin</span></code></pre><h3 id="å››ã€å®Œæˆå‰åç«¯å¯¹æ¥"><a class="header-anchor" href="#å››ã€å®Œæˆå‰åç«¯å¯¹æ¥">Â¶</a>å››ã€å®Œæˆå‰åç«¯å¯¹æ¥</h3><p>å‰ç«¯é¡¹ç›®å½“ä¸­ç¼–å†™ä¸€ä¸ªutilsæ–¹æ³•ï¼šrequest.js</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">"@/router"</span><span class="token punctuation">;</span><span class="token keyword">import</span> Cookies <span class="token keyword">from</span> <span class="token string">'js-cookie'</span><span class="token keyword">const</span> request <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    <span class="token literal-property property">baseURL</span><span class="token operator">:</span> <span class="token string">'http://localhost:9090'</span><span class="token punctuation">,</span>    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token comment">// request æ‹¦æˆªå™¨</span><span class="token comment">// å¯ä»¥è‡ªè¯·æ±‚å‘é€å‰å¯¹è¯·æ±‚åšä¸€äº›å¤„ç†</span><span class="token comment">// æ¯”å¦‚ç»Ÿä¸€åŠ tokenï¼Œå¯¹è¯·æ±‚å‚æ•°ç»Ÿä¸€åŠ å¯†</span>request<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'Content-Type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'application/json;charset=utf-8'</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> adminJson <span class="token operator">=</span> Cookies<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'admin'</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>adminJson<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// è®¾ç½®è¯·æ±‚å¤´</span>        config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'token'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>adminJson<span class="token punctuation">)</span><span class="token punctuation">.</span>token    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> config<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// response æ‹¦æˆªå™¨</span><span class="token comment">// å¯ä»¥åœ¨æ¥å£å“åº”åç»Ÿä¸€å¤„ç†ç»“æœ</span>request<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>    <span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token keyword">let</span> res <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>        <span class="token comment">// å…¼å®¹æœåŠ¡ç«¯è¿”å›çš„å­—ç¬¦ä¸²æ•°æ®</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> res <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            res <span class="token operator">=</span> res <span class="token operator">?</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">:</span> res        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">'401'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'err'</span> <span class="token operator">+</span> error<span class="token punctuation">)</span> <span class="token comment">// for debug</span>        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> request</code></pre><p>åœ¨vueä»£ç å½“ä¸­å®Œæˆè¯·æ±‚åç«¯çš„æ¥å£</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">"../utils/request"</span><span class="token punctuation">;</span>request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/user/page"</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>params    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">'200'</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>tableData <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>total <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>total<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰åç«¯åˆ†ç¦»webç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot+vue </tag>
            
            <tag> å‰åç«¯åˆ†ç¦» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ1-åˆ›å»ºVueå‰ç«¯é¡¹ç›®</title>
      <link href="/2022/102716107.html"/>
      <url>/2022/102716107.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h2 id="Quick-Start"><a class="header-anchor" href="#Quick-Start">Â¶</a>Quick Start</h2><h3 id="ä¸€ã€åˆ›å»ºVueé¡¹ç›®åŠå®‰è£…ä¾èµ–é¡¹"><a class="header-anchor" href="#ä¸€ã€åˆ›å»ºVueé¡¹ç›®åŠå®‰è£…ä¾èµ–é¡¹">Â¶</a>ä¸€ã€åˆ›å»ºVueé¡¹ç›®åŠå®‰è£…ä¾èµ–é¡¹</h3><p>(1)ã€ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤å®‰è£…/æ›´æ–°Vue-cli</p><pre class="language-base" data-language="base"><code class="language-base">npm install -g @vue&#x2F;cli# ORyarn global add @vue&#x2F;cli</code></pre><p><a href="https://cli.vuejs.org/zh/guide/installation.html">vue-vliå­¦ä¹ ç½‘ç«™</a></p><p>(2)ã€ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤å®‰è£…Vueæ¡†æ¶å†…å®¹</p><pre class="language-base" data-language="base"><code class="language-base">vue create [é¡¹ç›®å]</code></pre><p>(3)ã€ä½¿ç”¨å‘½ä»¤è®¿é—®åˆ›å»ºçš„é¡¹ç›®å†…å®¹</p><pre class="language-base" data-language="base"><code class="language-base">vue run dev&#x2F;serve</code></pre><p>(4)ã€å‰ç«¯é¡¹ç›®å½“ä¸­ä½¿ç”¨Element-ui<br>å®˜ç½‘ï¼š<a href="https://element.eleme.cn/#/zh-CN/guide/design">https://element.eleme.cn/#/zh-CN/guide/design</a></p><pre class="language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i element-ui <span class="token parameter variable">-S</span></code></pre><p>åœ¨vueå‰ç«¯é¡¹ç›®å½“ä¸­ä½¿ç”¨</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// main.js</span><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token keyword">import</span> ElementUI <span class="token keyword">from</span> <span class="token string">'element-ui'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token string">'element-ui/lib/theme-chalk/index.css'</span><span class="token punctuation">;</span><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementUI<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=></span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="äºŒã€å‡ ä¸ªå°æŠ€å·§"><a class="header-anchor" href="#äºŒã€å‡ ä¸ªå°æŠ€å·§">Â¶</a>äºŒã€å‡ ä¸ªå°æŠ€å·§</h3><p>(1)ã€é€šå¸¸æƒ…å†µä¸‹ï¼ŒåŸå§‹çš„ç•Œé¢éƒ½ä¼šå‡ºç°é¡µé¢ä¸€å°éƒ¨åˆ†ç•™ç™½ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–è¾‘å…¨å±€æ ·å¼è¿›è¡Œæ§åˆ¶<br>aã€åœ¨assetsç›®å½•ä¸‹åˆ›å»ºglobal.css<br>bã€åœ¨main.jså½“ä¸­è¿›è¡Œå¼•å…¥ï¼šimport â€œ@/assets/global.cssâ€</p><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">*</span> <span class="token punctuation">&#123;</span>    <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span> //æ¶ˆé™¤æ‰ç›’å­æ¨¡å‹çš„å†…è¾¹è·ï¼Œé€šå¸¸æ˜¯æœ‰ä¸€ä¸ªåƒç´ çš„å¤§å°<span class="token punctuation">&#125;</span></code></pre><p>(2)ã€åœ¨IDEAç¼–è¯‘å™¨å½“ä¸­Add Configurationså½“ä¸­é€‰æ‹©npmï¼Œæ‰¾åˆ°æ‰§è¡Œçš„package.jsonæ–‡ä»¶ï¼Œä½¿ç”¨npm run serveå‘½ä»¤</p><p><img src="/2022/102716107/IDEA%E4%BD%BF%E7%94%A8npm%E8%BF%90%E8%A1%8C%E7%AA%97%E5%8F%A3.png" alt></p><p>(3)ã€æ›´æ–°ç›¸å…³çš„ç³»ç»Ÿicon<br>Â Â Â Â Â Â Â Â Â é˜¿é‡Œå·´å·´iconå›¾æ ‡åº“ï¼š <a href="https://www.iconfont.cn/">https://www.iconfont.cn/</a></p><p>(4)ã€ç³»ç»Ÿçš„æ¡†æ¶çš„æ­å»º<br>é€šå¸¸æƒ…å†µä¸‹ï¼Œç³»ç»Ÿçš„é¡µé¢éƒ½æ˜¯åˆ†ä¸º[å¤´éƒ¨æ ][å·¦ä¾§å¯¼èˆªæ ][ä¸­é—´ä¸»ä½“éƒ¨åˆ†]ä¸‰ä¸ªéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°±è¿™ä¸‰éƒ¨åˆ†è¿›è¡Œç³»ç»Ÿé¡µé¢çš„åˆ’åˆ†<br>åœ¨åˆ›å»ºå¥½çš„vueå‰ç«¯é¡¹ç›®å½“ä¸­ï¼Œåœ¨app.vueæ–‡ä»¶å½“ä¸­å®Œæˆä¸‰ä¸ªéƒ¨åˆ†çš„åˆ’åˆ†</p><p>a)ã€å¤´éƒ¨åŒºåŸŸ</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--å¤´éƒ¨åŒºåŸŸ--></span><span class="token comment">&lt;!--    å…¶ä¸­å°†æ•´ä¸ªå¤´éƒ¨åŒºåŸŸè®¾ç½®height: 60px; line-height: 60px; æ˜¯ç¡®å®šå†…éƒ¨çš„å…ƒç´ éƒ½æ˜¯å±…ä¸­å¯¹é½çš„                        margin-bottom: 2px; æ˜¯å¤´éƒ¨ä¸ä¸‹åˆ—ä¸¤éƒ¨åˆ†ä¹‹é—´å­˜åœ¨ä¸€ä¸ª2pxçš„é—´éš™    å›¾ç‰‡åªè®¾ç½®å®½åº¦/é«˜åº¦ä¸­çš„ä¸€ä¸ª  è€Œä¸è®¾ç½®ä¸¤ä¸ªæ˜¯ä¸ºäº†ä¸è®©logoå¤±çœŸ    position: relative; æ˜¯è®©å›¾ç‰‡ä»å…¶ä¸­è„±ç¦»å‡ºæ¥ï¼Œè‡ªç”±å®šä½--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span> <span class="token property">line-height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span> <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 2px</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@/assets/logo.png<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span> <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span> <span class="token property">top</span><span class="token punctuation">:</span> 9px<span class="token punctuation">;</span> <span class="token property">left</span><span class="token punctuation">:</span> 10px</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span> <span class="token property">margin-left</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>b)ã€ä¸»ä½“åŒºåŸŸ</p><pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--ä¾§è¾¹æ å’Œä¸»ä½“å†…å®¹--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> flex</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--ä¾§è¾¹æ å¯¼èˆªä½ç½®--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span> <span class="token property">min-height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vh - 62px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span> <span class="token property">margin-right</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> white</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu</span> <span class="token attr-name">:default-active</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$route.path<span class="token punctuation">"</span></span> <span class="token attr-name">router</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>el-menu-demo<span class="token punctuation">"</span></span>  <span class="token attr-name">@select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleSelect<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu-item</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>el-icon-s-home<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>é¦–é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu-item</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-submenu</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>el-icon-question<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>å…³äº<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu-item</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/about<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>å…³äºé¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu-item</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-submenu</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é€‰é¡¹4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu-item</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2-4-1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é€‰é¡¹1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu-item</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu-item</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2-4-2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é€‰é¡¹2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu-item</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu-item</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2-4-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>é€‰é¡¹3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu-item</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-submenu</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-submenu</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--ä¸»ä½“æ•°æ®åŒºåŸŸ--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span> <span class="token property">background-color</span><span class="token punctuation">:</span> white</span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--    style="display: flex":                  ç¡®ä¿ä¸‹é¢çš„ä¸¤ä¸ªdivæ˜¯å¹¶æ’å‡ºç°çš„ ä½¿ç”¨flexå¸ƒå±€    min-height: calc(100vh - 62px):         å°†ä¸‹é¢çš„ä¸»é¢˜åŒºåŸŸæ’‘æ»¡ï¼Œå¹¶ä¸”è¦å‡å»å¤´éƒ¨çš„å¤§å°(60 + 2)    index="/":                              åœ¨å¯¼èˆªæ å½“ä¸­ï¼Œindexè¡¨ç¤ºçš„å°±æ˜¯è·³è½¬çš„è·¯å¾„ï¼Œå¯ä»¥å¯¹åº”åˆ°router.jså½“ä¸­çš„path    &lt;router-view/>:                         åˆ‡æ¢è¿‡ç¨‹å½“ä¸­é¡µé¢åˆ‡æ¢çš„éƒ¨åˆ†ï¼Œä¸€ä¸ªä»£æ›¿çš„éƒ¨åˆ†ï¼Œåªéœ€è¦æ”¾åˆ°ä¸»é¢˜æ•°æ®åŒºåŸŸå³å¯--></span></code></pre><p>(5)ã€å°†elementUIä¸­çš„å„ç±»ç»„ä»¶çš„å¤§å°è¿›è¡Œé…ç½®</p><pre class="language-javascript" data-language="javascript"><code class="language-javascript">Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementUI<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token string">'mini'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é…ç½®elementuiçš„æ ·å¼å¤§å° medium small mini</span></code></pre></font>]]></content>
      
      
      <categories>
          
          <category> å‰åç«¯åˆ†ç¦»webç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot+vue </tag>
            
            <tag> å‰åç«¯åˆ†ç¦» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo æ­å»ºä¸ªäººåšå®¢</title>
      <link href="/2022/102516107.html"/>
      <url>/2022/102516107.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h2 id="å¦‚ä½ æ‰€è§ï¼Œæ‚¨ç°åœ¨æ­£åœ¨æµè§ˆçš„å°±æ˜¯æˆ‘ä½¿ç”¨Hexoæ¡†æ¶æ­å»ºçš„ä¸ªäººåšå®¢"><a class="header-anchor" href="#å¦‚ä½ æ‰€è§ï¼Œæ‚¨ç°åœ¨æ­£åœ¨æµè§ˆçš„å°±æ˜¯æˆ‘ä½¿ç”¨Hexoæ¡†æ¶æ­å»ºçš„ä¸ªäººåšå®¢">Â¶</a>å¦‚ä½ æ‰€è§ï¼Œæ‚¨ç°åœ¨æ­£åœ¨æµè§ˆçš„å°±æ˜¯æˆ‘ä½¿ç”¨Hexoæ¡†æ¶æ­å»ºçš„ä¸ªäººåšå®¢</h2><p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><blockquote><p>åœ¨å®‰è£…ä¹‹å‰ï¼Œä½ çš„ç”µè„‘ä¸Šåº”è¯¥å·²ç»å®‰è£…äº†ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>Git: ä¹Ÿå¯ä½¿ç”¨æœ¬æœºcmdå‘½ä»¤çª—å£å®Œæˆ</li><li>node.js: Hexoæ¡†æ¶è¿è¡Œçš„</li></ul></blockquote><h2 id="Quick-Start"><a class="header-anchor" href="#Quick-Start">Â¶</a>Quick Start</h2><h3 id="1ã€å®‰è£…Git"><a class="header-anchor" href="#1ã€å®‰è£…Git">Â¶</a>1ã€å®‰è£…Git</h3><p>ä½ ä¸ä¼šè·Ÿæˆ‘è¯´ä½ æ²¡è£…Gitå§~~~</p><p>More info: <a href="https://blog.csdn.net/mukes/article/details/115693833?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166687136816782412530437%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=166687136816782412530437&amp;biz_id=0&amp;spm=1018.2226.3001.4187">å®‰è£…æ•™ç¨‹</a></p><h3 id="2ã€å®‰è£…Node-js"><a class="header-anchor" href="#2ã€å®‰è£…Node-js">Â¶</a>2ã€å®‰è£…Node.js</h3><p>ä½ ä¸ä¼šè·Ÿæˆ‘è¯´ä½ æ²¡è£…Nodeå§~~~</p><p>More info: <a href="https://blog.csdn.net/weixin_44893902/article/details/121788104?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166686140416782395362937%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=166686140416782395362937&amp;biz_id=0&amp;spm=1018.2226.3001.4187">å®‰è£…æ•™ç¨‹</a></p><h3 id="3ã€æœ¬åœ°å®‰è£…Hexo"><a class="header-anchor" href="#3ã€æœ¬åœ°å®‰è£…Hexo">Â¶</a>3ã€æœ¬åœ°å®‰è£…Hexo</h3><p>åœ¨å®‰è£…å®ŒæˆGitå’ŒNodeJSä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯æœ¬åœ°ä¸‹è½½Hexoï¼Œé¦–å…ˆåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªBlog(åå­—ä»»å–)çš„æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œé¼ æ ‡å³é”®ä½¿ç”¨git bashã€‚</p><p>(1)ä½¿ç”¨å‘½ä»¤å®‰è£…Hexo</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ hexo <span class="token function">install</span> <span class="token parameter variable">-g</span> hexo-cli</code></pre><p>(2)ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹Hexoçš„ç‰ˆæœ¬ä¿¡æ¯</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ hexo <span class="token parameter variable">-v</span></code></pre><p>(3)å®‰è£…å®Œæ¯•ä¹‹åè¿›è¡Œåˆå§‹åŒ–ï¼Œå®Œæˆå¯¹è‡ªå·±åšå®¢é¡¹ç›®çš„åˆ›å»º</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ hexo init</code></pre><p>åœ¨å®‰è£…å®Œæˆçš„ç›®å½•ä¸‹ï¼Œä¼šå­˜åœ¨ä»¥ä¸‹ç›®å½•ï¼š</p><blockquote><ul><li>node_modules: ä¾èµ–åŒ…</li><li>public: å­˜æ”¾ç”Ÿæˆçš„é¡µé¢</li><li>scaffolds: ç”Ÿæˆæ–‡ç« çš„ä¸€äº›æ¨¡æ¿</li><li>source: ç”¨æ¥ä½ çš„æ–‡ç« </li><li>themes: ä¸‹è½½ä¿å­˜è‡ªå·±çš„ä¸»é¢˜ï¼Œæœ¬ä¸»é¢˜<a href="https://github.com/blinkfox/hexo-theme-matery">hexo-theme-matery</a></li><li>_config.yml: é‡ç‚¹é…ç½®æ–‡ä»¶</li></ul></blockquote><p>(4)ä½¿ç”¨å‘½ä»¤ç”Ÿæˆåˆ›å»ºçš„é¡µé¢</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ hexo g</code></pre><p>(5)æœ¬åœ°è¿è¡Œä½ çš„åšå®¢é¡¹ç›®</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ hexo s</code></pre><p>è¿è¡ŒæˆåŠŸåï¼Œä½ ä¼šçœ‹åˆ°å¦‚ä¸‹æç¤º</p><pre class="language-bash" data-language="bash"><code class="language-bash">Hexo is running at http://localhost:4000/ <span class="token builtin class-name">.</span> Press Ctrl+C to stop. </code></pre><p>ç„¶åè®¿é—®æ—¥å¿—ä¸­çš„åœ°å€ï¼šlocalhost:4000</p><p>æ­å–œä½ ï¼Œä½ çš„ç¬¬ä¸€ä¸ªåšå®¢ç³»ç»Ÿæ­å»ºæˆåŠŸï¼</p><h3 id="4ã€GitHubåˆ›å»ºä¸ªäººä»“åº“"><a class="header-anchor" href="#4ã€GitHubåˆ›å»ºä¸ªäººä»“åº“">Â¶</a>4ã€GitHubåˆ›å»ºä¸ªäººä»“åº“</h3><p>é¦–å…ˆåœ¨Githubä¸Šæ³¨å†Œè‡ªå·±çš„è´¦å·ï¼Œæ³¨å†Œå®Œæˆä¹‹åï¼Œå®Œå–„å„é¡¹è´¦å·çš„ä¿¡æ¯ã€‚<br>ç„¶åNew Repository å‘½ä»¤ä¸ºä½ ä¸ºï¼š[Githubå].github.io<br>ä¾‹å¦‚ï¼šæˆ‘çš„githubåç§°ä¸ºBinbin0613, æˆ‘çš„åšå®¢ä»“åº“åä¸ºï¼š<a href="http://Binbin0613.github.io">Binbin0613.github.io</a> (å¯ä»¥å‚è€ƒ<a href="https://github.com/Binbin0613/Binbin0613.github.io">æˆ‘çš„ä»“åº“</a>)</p><h3 id="5ã€å°†æœ¬åœ°çš„Hexoéƒ¨ç½²ä¸ŠGitHubä¸Š"><a class="header-anchor" href="#5ã€å°†æœ¬åœ°çš„Hexoéƒ¨ç½²ä¸ŠGitHubä¸Š">Â¶</a>5ã€å°†æœ¬åœ°çš„Hexoéƒ¨ç½²ä¸ŠGitHubä¸Š</h3><p>åœ¨ä½ å®ŒæˆHexoåˆå§‹åŒ–çš„åœ°æ–¹(åŒç¬¬ä¸‰æ­¥çš„ä½ç½®)ï¼Œè¾“å…¥å‘½ä»¤ï¼Œå®Œæˆä»£ç çš„ä¸Šä¼ </p><pre class="language-bash" data-language="bash"><code class="language-bash">$ hexo d</code></pre><p>æ‰§è¡Œåˆ°è¿™ä¸€æ­¥ä¹‹åï¼Œæµè§ˆå™¨è¾“å…¥: [Githubå].github.io å³å¯çœ‹åˆ°ä½ çš„åšå®¢ç½‘ç«™äº†</p><h3 id="6ã€å‘å¸ƒæ–‡ç« "><a class="header-anchor" href="#6ã€å‘å¸ƒæ–‡ç« ">Â¶</a>6ã€å‘å¸ƒæ–‡ç« </h3><p>è‡³æ­¤ä½ çš„åšå®¢é¡¹ç›®å°±æ­å»ºå¥½äº†ï¼Œé‚£ä¹ˆæƒ³è¦å‘å¸ƒæ–‡ç« å°±éœ€è¦æ¥ä¸‹æ¥çš„å‡ æ­¥äº†ï¼</p><p>(1)ã€åœ¨ï¼š [:\BlogName\source_posts] ç›®å½•ä¸‹åˆ›å»ºè‡ªå·±æƒ³è¦å‘å¸ƒæ–‡ç« çš„æ–‡ä»¶(æ‰€æœ‰çš„æ–‡ç« å‘å¸ƒéƒ½æ˜¯ä»¥markDownæ ¼å¼å‘å¸ƒçš„)<br>ä½ å¯ä»¥çœ‹åˆ°çš„æ˜¯å·²ç»æœ‰ä¸€ä¸ªåä¸ºHello World.mdçš„æ–‡ä»¶</p><p>(2)ã€æ–‡ç« ä¸­éœ€è¦æ’å…¥å›¾ç‰‡çš„è¯ï¼Œé¦–å…ˆæ‰¾åˆ°_config.ymlæ–‡ä»¶ã€‚</p><pre class="language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">post_asset_folder</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># åŸæ¥æ˜¯falseï¼Œå°†å…¶è®¾ç½®ä¸ºtrue</span></code></pre><p>ä¸æ­¤åŒæ—¶ï¼Œåœ¨[:\BlogName\source_posts] ç›®å½•ä¸‹åˆ›å»ºä¸æ–‡ç« åŒåçš„æ–‡ä»¶å¤¹ï¼Œç„¶åå°†å›¾ç‰‡æ”¾å…¥ï¼Œè‹¥è¦åœ¨æ–‡ç« ä¸­å¼•å…¥ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„çš„æ–¹å¼è¿›è¡Œè®¿é—®[./æ–‡ç« å/XXX.png]ï¼Œå³å¯å®Œæˆå›¾ç‰‡è®¿é—®ã€‚</p><p>(3)ã€å®Œæˆæ–‡ç« çš„ç¼–å†™åï¼Œä½¿ç”¨ä¸‹åˆ—å‘½åè¿›è¡Œç¼“å­˜çš„æ¸…æ¥š</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ hexo clean</code></pre><p>(4)ã€ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤å®Œæˆåšå®¢çš„é‡æ–°ç”Ÿæˆ</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ hexo g <span class="token comment"># generate</span></code></pre><p>(5)ã€ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤å®Œæˆå¯¹åšå®¢é¡¹ç›®çš„æœ¬åœ°æŸ¥çœ‹</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ hexo s <span class="token comment"># server</span></code></pre><p>(6)ã€ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤å®Œæˆå¯¹åšå®¢é¡¹ç›®çš„ä¸Šä¼ (è‡³Githubä»“åº“)</p><pre class="language-bash" data-language="bash"><code class="language-bash">$ hexo d <span class="token comment"># deploy</span></code></pre><h3 id="æ›´å¤šä¿¡æ¯è¯·å…³æ³¨"><a class="header-anchor" href="#æ›´å¤šä¿¡æ¯è¯·å…³æ³¨">Â¶</a>æ›´å¤šä¿¡æ¯è¯·å…³æ³¨</h3><p>(1)ã€<a href="https://blog.csdn.net/wangqingchuan92/article/details/112277112?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;spm=1018.2226.3001.4187">è§£å†³åšå®¢çš„enjoyé—®é¢˜</a>Â Â Â Â Â Â Â Â   <a href="https://apps.timwhitlock.info/emoji/tables/unicode#">enjoyè¡¨æƒ…åŒ…åˆé›†</a></p><p>(2)ã€<a href>Hexoæ›´å¤šçš„é…ç½®ç›¸å…³é—®é¢˜(å¼€ä¸ªç©ç¬‘)</a></p><p>(3)ã€<a href="https://www.bilibili.com/video/BV1q4411i7gL/?spm_id_from=333.788.recommend_more_video.8&amp;vd_source=0f50d0008f8b836aa3258f634d65d48e">æ›´å…¨çš„å®‰è£…è§†é¢‘</a></p><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p></font>]]></content>
      
      
      <categories>
          
          <category> åšå®¢ä»‹ç» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Binbin0613 </tag>
            
            <tag> å…³äºåšå®¢ </tag>
            
            <tag> æ—¥å¸¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Binbin0613</title>
      <link href="/2022/102416107.html"/>
      <url>/2022/102416107.html</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman, æ¥·ä½“"><h2 id="æ¬¢è¿å¤§å®¶è®¿é—®æˆ‘çš„åšå®¢Binbin0613"><a class="header-anchor" href="#æ¬¢è¿å¤§å®¶è®¿é—®æˆ‘çš„åšå®¢Binbin0613">Â¶</a><strong>æ¬¢è¿å¤§å®¶è®¿é—®æˆ‘çš„åšå®¢<a href="Binbin0613.github.io">Binbin0613</a></strong></h2><h3 id="åšä¸€ä¸ªè‡ªæˆ‘ä»‹ç»"><a class="header-anchor" href="#åšä¸€ä¸ªè‡ªæˆ‘ä»‹ç»">Â¶</a>åšä¸€ä¸ªè‡ªæˆ‘ä»‹ç»</h3><p>Binï¼Œ<a href="http://www.xhu.edu.cn/">XHU</a>è½¯ä»¶å·¥ç¨‹æœ¬ï¼Œ<a href="https://sias.uestc.edu.cn/">UESTC</a>ç”µå­ä¿¡æ¯ä¸“ç¡•ï¼Œ21å²å¤§å››åœ¨è¯»èº«é«˜170cmä½“é‡ä¸è¯´æ¯å¤©8ç‚¹åˆ°23ç‚¹å¾…å®éªŒå®¤å‘¨æœ«æ— ä¼‘è¿˜å¡åœ¨æ¯•è®¾çš„ç å†œä¸€ä½ï¼</p><blockquote><ul><li>çˆ±å¥½ï¼š è¸¢è¶³çƒ(å¤§å­¦åŸºæœ¬æ²¡ç¢°è¿‡ ğŸ˜…)</li><li>å­¦ä¹ æ–¹å‘ï¼š <a href="https://github.com/Binbin0613">REID</a> Â  Â  <a href="https://github.com/Binbin0613">Search</a> Â Â  <a href="https://github.com/Binbin0613">JAVA</a> Â Â  <a href="https://github.com/Binbin0613">Vue</a> Â Â  <a href="https://github.com/Binbin0613">React</a></li></ul></blockquote><p><img src="/2022/102416107/avatar.jpg" alt></p><h5 id="å¿˜è®°è¯´äº†ï¼š-2022å¹´é˜¿æ ¹å»·å¿…å¤ºå† ï¼ï¼ï¼"><a class="header-anchor" href="#å¿˜è®°è¯´äº†ï¼š-2022å¹´é˜¿æ ¹å»·å¿…å¤ºå† ï¼ï¼ï¼">Â¶</a>å¿˜è®°è¯´äº†ï¼š 2022å¹´é˜¿æ ¹å»·å¿…å¤ºå† ï¼ï¼ï¼</h5><h4 id="More-Info"><a class="header-anchor" href="#More-Info">Â¶</a>More Info:</h4><p>QQï¼š3474251879<br>WeChat: Ilovedaisysomuch<br>Email: <a href="mailto:Binbin.0626@foxmail.com">Binbin.0626@foxmail.com</a><br>Github: <a href="https://github.com/Binbin0613">https://github.com/Binbin0613</a><br>Sina: åŸºæœ¬ä¸Šä¸ç©ï¼Œå¶å°”çœ‹çœ‹</p></font>]]></content>
      
      
      <categories>
          
          <category> åšå®¢ä»‹ç» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Binbin0613 </tag>
            
            <tag> å…³äºåšå®¢ </tag>
            
            <tag> å®ç”¨å°å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2022/102316107.html"/>
      <url>/2022/102316107.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a class="header-anchor" href="#Quick-Start">Â¶</a>Quick Start</h2><h3 id="Create-a-new-post"><a class="header-anchor" href="#Create-a-new-post">Â¶</a>Create a new post</h3><pre class="language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a class="header-anchor" href="#Run-server">Â¶</a>Run server</h3><pre class="language-bash" data-language="bash"><code class="language-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a class="header-anchor" href="#Generate-static-files">Â¶</a>Generate static files</h3><pre class="language-bash" data-language="bash"><code class="language-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a class="header-anchor" href="#Deploy-to-remote-sites">Â¶</a>Deploy to remote sites</h3><pre class="language-bash" data-language="bash"><code class="language-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><p><img src="/2022/102316107/avatar.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> åšå®¢ä»‹ç» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Binbin0613 </tag>
            
            <tag> å…³äºåšå®¢ </tag>
            
            <tag> æ—¥å¸¸ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
